function Mediator(n){var t=[],r=[],i=i,u;n===null&&(i=n);this.addDocument=function(n){try{i=n}catch(t){Mediator.debugActivated==!0&&alert("addDocument"+t.message)}};this.addMessageBoard=function(n){try{u=n}catch(t){Mediator.debugActivated==!0&&alert("addMessageBoard"+t.message)}};this.addWidget=function(n,r){var u;try{u=i.getPageElement(n);t[r]=[];t[r].widgetRole=r;t[r].id=n;t[r].element=u}catch(f){Mediator.debugActivated==!0&&alert("addWidget"+f.message)}};this.addValue=function(n,t){try{r[t]=[];r[t].valueRole=t;r[t].value=n}catch(i){Mediator.debugActivated==!0&&alert("addValue"+i.message)}};this.refreshWidgets=function(){try{for(var n in t)this.addWidget(t[n].id,t[n].widgetRole)}catch(i){Mediator.debugActivated==!0&&alert("refreshWidgets"+i.message)}};this.initScenario=function(){};this.getWidgetsArray=function(){return t};this.getValuesArray=function(){return r};this.getDocument=function(){return i};this.getMessageBoard=function(){return u}}function FormDictionary(){this.elementArray=[];this.addElement=function(n,t){try{this.elementArray[t]=n}catch(i){FormDictionary.debugActivated&&alert("FormDictionary.addElement: "+i.message)}};this.get=function(n){return this.elementArray[n]};this.getId=function(n){return this.elementArray[n]!=null?this.elementArray[n].id:null}}function Delegate(){myHandlersArrayArray=[];this.addHandler=function(n,t){var r,i;if(arguments.length>2){for(r=[],i=2;i<arguments.length;++i)r.push(arguments[i]);myHandlersArrayArray.push(function(){return t.apply(n,r)})}else myHandlersArrayArray.push(function(){return t.call(n)})};this.execute=function(){var t,n;if(!isElementNull(myHandlersArrayArray))for(n=0;n<myHandlersArrayArray.length;n++)try{t=myHandlersArrayArray[n];t()}catch(i){alert(i.message+" Class: Delegate()")}}}function MessageBoard(){try{var t=[],n,f="",r=!0,u=!0,i=!1;this.turnOn=function(){if(u=!0,!r){n.style.display="block";try{checkOverflow()}catch(t){}}};this.turnOff=function(){u=!1;n.innerHTML=""};this.lock=function(){i=!0};this.unLock=function(){i=!1};this.addMessage=function(n,i){t[n]=i};this.addBoardElement=function(t){n=t};this.addHtmlElement=function(n){var i=document.createElement("div");return i.innerHTML=t[n],i};this.printMessage=function(e){if(i||(t[e]?n.appendChild(this.addHtmlElement(e)):n.innerHTML=f,r=!1),u){n.style.display="block";try{checkOverflow()}catch(o){}}};this.getMessage=function(n){return t[n]};this.clean=function(){i||(n.innerHTML="",r=!0);n&&(n.innerHTML="")};this.skippable=function(){var n=document.getPageElement("messageBoardSkippable");n&&(n.value="1")}}catch(e){MessageBoard.debugActivated==!0&&alert("MessageBoard.C..tor:"+e.message)}}function verifyDateMajor90(){EADialog.hide();jQuery("#AppViaggi .btnAvanti").click()}function DateDifferenceElement(n,t,i,r){this.dataInizio=n;this.dataFine=t;this.durata=i;this.messageBoard=r;this.valid=!1;this.addedDays=0;this.addOneYear=function(){var n;n=addYear(this.dataInizio.value,1);n=addDate(n,parseInt(-1,10));this.dataFine.value=n};this.addOneYear1=function(){var n;n=addYear(this.dataInizio.value,1);this.dataFine.value=n};this.addOneYear1notPrint=function(){return addYear(this.dataInizio.value,1)};this.removeDate1Day=function(){return SubDaysFromDate(this.dataInizio.value,1)};this.addTwoYears=function(){var n;n=addYear(this.dataInizio.value,2);n=addDate(n,parseInt(-1,10));this.dataFine.value=n};this.addThreeYears=function(){var n;n=addYear(this.dataInizio.value,3);n=addDate(n,parseInt(-1,10));this.dataFine.value=n};this.addFiveYears=function(){var n;n=addYear(this.dataInizio.value,5);n=addDate(n,parseInt(-1,10));this.dataFine.value=n};this.addDays=function(){var n;n=addDate(this.dataInizio.value,parseInt(this.addedDays-1,10));this.dataFine.value=n},function(n){var t,i,r;return t=n.substring(0,2),i=n.substring(3,5),r=n.substring(6,10),new Date(r,i-1,t)},function(n,t,i,r){return i||(i=" "),(t-=n.length)>0?(i=new Array(Math.ceil(t/i.length)+1).join(i)).substr(0,r=r?r==1?0:Math.ceil(t/2):t)+n+i.substr(0,t-r):n},function(n){return pad(new String(n.getDate()),2,"0",0)+"/"+pad(new String(n.getMonth()+1),2,"0",0)+"/"+n.getFullYear()};this.addNSADays=function(){var u,h=this.dataInizio.value,f=this.addedDays,n=getDateFromString(h),t=f%360,e=(f-t)/360,o=t,i,r,s;t=o%30;i=(o-t)/30;r=t;e!=0&&n.setFullYear(n.getFullYear()+e);i!=0&&(s=n.getDate(),n.setMonth(n.getMonth()+i),n.getDate()<s&&(n.setDate(1),n.setDate(n.getDate()-1)));r!=0&&n.setDate(n.getDate()+r);"00:00".substring(0,2)!="24"&&n.setDate(n.getDate()-1);u=getStringFromDate(n);this.dataFine.value=u};this.writeDurata=function(){var t,n;return t=!1,n=diffDate(this.dataInizio.value,this.dataFine.value),n<0&&this.dataFine.value!=""?(this.messageBoard?(this.messageBoard.clean(),this.messageBoard.printMessage("dateDifferenceError")):alert("Data inizio maggiore della data finale!!"),t=!1):(this.messageBoard&&this.messageBoard.clean(),n=diffDate(this.dataInizio.value,this.dataFine.value),n++,this.durata.value=n,this.durata.onchange!=null&&this.durata.onchange(),t=!0),this.valid=t,this.valid};this.writeDurata1=function(){var t,n;return t=!1,n=diffDate(this.dataInizio.value,this.dataFine.value)-1,n<0&&this.dataFine.value!=""?(this.messageBoard?(this.messageBoard.clean(),this.messageBoard.printMessage("dateDifferenceError")):alert("Data inizio maggiore della data finale!!"),t=!1):(this.messageBoard&&this.messageBoard.clean(),n=diffDate(this.dataInizio.value,this.dataFine.value)-1,n++,this.durata.value=n,this.durata.onchange!=null&&this.durata.onchange(),t=!0),this.valid=t,this.valid}}function RGIString(){this._string="";this.IsValid=_IsValid;this.IsValidFromTo=_IsValidFromTo;this.AreDigitsFromTo=_AreDigitsFromTo;this.SetString=_SetString;this.GetString=_GetString}function Validator(){var n,t;this.messageBoard=n;this.formElement=t;this.errorMessageKey="";this.defaultErrorMessage="";arguments[0]!=null&&(this.validator=arguments[0]);this.addMessageBoard=function(n){this.messageBoard=n};this.showErrorMessage=function(){this.messageBoard?this.messageBoard.printMessage(this.errorMessageKey):alert(this.defaultErrorMessage)};this.showPopup=function(n,t){var i=jQuery('<div style="display:none"><\/div>');return i.html(t),jQuery("body").append(i),jQuery("#EADialogClose").remove(),EADialog.open(n,this.errorMessageKey+"Popup","auto",500)};this.useInternalValidator=function(n){return retVal=!0,this.validator!=null&&typeof this.validator.addMessageBoard!="undefined"&&(this.validator.addMessageBoard(this.messageBoard),retVal=this.validator.validate(n)),retVal};this.validate=function(n){return this.formElement=n,retVal=this.onValidate(n),retVal!=!1&&(retVal=this.useInternalValidator(n)),retVal};this.onValidate=function(){}}function validation(n,t,i){this.validator=n;this.formElement=t;this.messageBoard=i;this.validate=function(){return this.messageBoard.clean(),this.validator.addMessageBoard(this.messageBoard),retVal=this.validator.validate(this.formElement)}}function requiredValidator(){arguments[0]&&(this.validator=arguments[0]);this.errorMessageKey="requiredValidationError"}function numericValidator(){arguments[0]&&(this.validator=arguments[0]);this.errorMessageKey="numericValidationError"}function integerValidator(){arguments[0]&&(this.validator=arguments[0]);this.errorMessageKey="integerValidationError"}function positiveNumericValidator(){arguments[0]&&(this.validator=arguments[0]);this.errorMessageKey="positiveDaysValidationError"}function attachValidation(n,t,i){t.validationObject=new validation(n,t,i)}function showHelp_right(n,t,i){var f=n,r,u;jQuery("#EAHelp").length==0&&jQuery("body").append('<div class="ea-form"><div id="EAHelp" class="info-icon right"><\/div><\/div>');jQuery("#EAHelp").stop(!0,!0);jQuery("#EAHelp").html();jQuery("#EAHelp").hide();jQuery("#EAHelp").html('<div class="info-balloon"><div class="info-balloon-arrow-left"><\/div><div class="left text-paragraph pad-top large">'+f+'<\/div><div class="close"><span class="sprite close-blu"><\/span><\/div><\/div>');jQuery("#EAHelp .text-paragraph").css("overflowX","hidden");jQuery("#EAHelp .text-paragraph").css("overflow-x","hidden");jQuery("#EAHelp .text-paragraph").css("overflowY","auto");jQuery("#EAHelp .text-paragraph").css("overflow-y","auto");jQuery("#EAHelp, #EAHelp .text-paragraph").hover(function(){jQuery("#EAHelp").stop(!0).css({opacity:1}).show()},function(){jQuery("#EAHelp").html();jQuery("#EAHelp").delay(3e3).fadeOut()});jQuery("#EAHelp .info-balloon .close").click(function(){return jQuery("#EAHelp").html(),jQuery("#EAHelp").hide(),!1});jQuery("#EAHelp").css({position:"absolute",top:t-15+"px",left:i+"px"});r=jQuery("#EAHelp .info-balloon");u=jQuery("#EAHelp .info-balloon-shadow");r.show();jQuery("#EAHelp").show();jQuery("#EAHelp .info-balloon .info-balloon-arrow").css("display","block");jQuery("#EAHelp .info-balloon .info-balloon-arrow").show();u.width(r.outerWidth());u.height(r.outerHeight());u.show()}var urlcalendar="/_layouts/15/ea/web/ab/images/ico-calendar-slider-tab.png";jQuery.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3c;Prec",nextText:"Succ&#x3e;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",numberOfMonths:2,firstDay:1,isRTL:!1,showOn:"both",buttonImageOnly:!0,buttonText:"Calendar",buttonImage:urlcalendar,dateFormat:"dd/mm/yy",showMonthAfterYear:!1,yearSuffix:""};jQuery.datepicker.setDefaults($.datepicker.regional.it);Mediator.debugActivated=!1;FormDictionary.debugActivated=!1;MessageBoard.debugActivated=!0;myMessageBoard=new MessageBoard;myMessageBoard.addMessage("numericValidationError","Il campo deve essere numerico");myMessageBoard.addMessage("dateValidationError","Il campo deve contenere una data valida");myMessageBoard.addMessage("futureValidationError","La data deve essere compresa tra domani e 12 mesi dalla data odierna!");myMessageBoard.addMessage("requiredValidationError","Attenzione, il campo è obbligatorio");myMessageBoard.addMessage("positiveValidationError","Indicare un numero positivo.");myMessageBoard.addMessage("integerValidationError","Il campo deve essere numerico, non decimale");myMessageBoard.addMessage("dateDifferenceError","La data fine non può precedere la data iniziale.");myMessageBoard.addMessage("departureDateValidationError","Per proseguire &eacute; necessario inserire la data di inizio.");myMessageBoard.addMessage("returnDateValidationError","Per proseguire &eacute; necessario inserire la data di fine.");myMessageBoard.addMessage("positiveDaysValidationError","Il numero di giorni deve essere superiore a 0");myMessageBoard.addMessage("minor90ValidationError","   ");myMessageBoard.addMessage("major1SeniorTravellerValidationError","Selezionare almeno un viaggiatore con et&agrave; maggiore di due anni.");myMessageBoard.addMessage("major1TravellerValidationError","Selezionare almeno un viaggiatore.");myMessageBoard.addMessage("minor9TravellersValidationMsg",'Per pi&ugrave; di 9 viaggiatori si consiglia il prodotto <a href="/europassistance/Tariffa/Index/96" target="_self">VNS Gruppi<\/a>.');myMessageBoard.addMessage("minor9TravellersValidationError","Selezionare al pi&ugrave; 9 viaggiatori.");myMessageBoard.addMessage("minor90ValidationErrorPopup","<div id='minor90ValidationErrorPopup'>Se il tuo viaggio supera i 90 giorni consecutivi devi acquistare la <strong>Polizza Viaggi Nostop TreSeiCinque<\/strong>: chiama il numero verde <strong>800.44.33.22<\/strong> per maggiori informazioni e acquistare. <br/><br/> In caso contrario clicca “continua” e procedi con l'acquisto della <strong>Polizza Multiviaggio<\/strong>, per viaggi con durata massima di permanenza all'estero di <strong>90 giorni consecutivi ciascuno<\/strong>.<br/><br/><div class='right'><a href='#' onclick='verifyDateMajor90(); return false;' class='bottone rosso'>Continua<\/a><\/div><\/div>");addQuestionarioDays=function(n,t){var i=n.getHours()*36e5,r=n.getMinutes()*6e4,u=n.getSeconds()*1e3,f=n.getMilliseconds();return new Date(n.getTime()-i-r-u-f+t*864e5)};customRange=function(n){var r="",f=jQuery("#"+n.id+"_startPoxDate"),t=jQuery("#"+n.id+"_startPoxDateEl");r=f.attr("value")||f.val();t.length!=0&&t.attr("value").length!=0&&jQuery("#"+t.attr("value")).length!=0&&jQuery("#"+t.attr("value")).length!=0&&(r=jQuery("#"+t.attr("value")).attr("value"));var u="",e=jQuery("#"+n.id+"_endPoxDate"),i=jQuery("#"+n.id+"_endPoxDateEl");return u=e.attr("value")||e.val(),i.length!=0&&i.attr("value").length!=0&&jQuery("#"+i.attr("value")).length!=0&&jQuery("#"+i.attr("value")).length!=0&&(u=jQuery("#"+i.attr("value")).attr("value")),{minDate:r,maxDate:u}};noenter=function(n,t){if(window.event&&window.event.keyCode==13||n.keyCode==13){var i=getPageElement("btnAvanti");return t.onchange!=null&&t.onchange(),i.click(),!1}};FormatDate=function(n,t){var i,o,a,s,e,c,h,l;if(n=="")return"";for(t||(t="dd/mm/yyyy"),t=t.toLowerCase(),n=n.toLowerCase(),o=["January","February","March","April","May","June","July","August","September","October","November","December"];n.indexOf("st")>-1;)n=n.replace("st","");while(n.indexOf("nd")>-1)n=n.replace("nd","");while(n.indexOf("rd")>-1)n=n.replace("rd","");while(n.indexOf("th")>-1)n=n.replace("th","");for(n.indexOf(".")>-1&&(s="."),n.indexOf("-")>-1&&(s="-"),n.indexOf("/")>-1&&(s="/"),n.indexOf(" ")>-1&&(s=" "),i=n.split(s),n="",e=0;e<i.length;e++)i[e]!=""&&(n+=i[e]+s);if(n=n.substring(0,n.length-1),i=n.split(s),i.length<3)return"";var r=i[0],f=i[1],u=i[2];for(parseFloat(i[1])>12&&(r=i[1],f=i[0]),parseFloat(r)&&r.toString().length==4&&(u=i[0],r=i[2],f=i[1]),e=0;e<o.length;e++)if(c=o[e].substring(0,3).toLowerCase(),h=n.indexOf(c),h>-1){f=e+1;h==0&&(r=i[1],u=i[2]);break}l=u.toString();l.length==2&&(u=parseFloat(u)>40?"19"+u:"20"+u);parseInt(f,10)<10&&f.toString().length<2&&(f="0"+f);parseInt(r,10)<10&&r.toString().length<2&&(r="0"+r);switch(t){case"dd/mm/yyyy":return r+"/"+f+"/"+u;case"mm/dd/yyyy":return f+"/"+r+"/"+u;case"dd/mmm/yyyy":return r+" "+o[f-1].substring(0,3)+" "+u;case"mmm/dd/yyyy":return o[f-1].substring(0,3)+" "+r+" "+u;case"dd/mmmm/yyyy":return r+" "+o[f-1]+" "+u;case"mmmm/dd/yyyy":return o[f-1]+" "+r+" "+u}return r+"/"+a+"/"+u};isNumeric=function(n){for(var i=!0,r,t=0;t<n.length&&i==!0;t++)r=n.charAt(t),"0123456789.-".indexOf(r)==-1&&(i=!1);return i};isLength=function(n,t,i){try{var r=!0,u=n.length;u>t&&(i=="precise"||i=="minor")&&(r=!1);u<t&&(i=="precise"||i=="major")&&(r=!1)}catch(f){Validator.debugActivated&&alert("isLength"+f.message);r=!1}finally{return r}};isDigit=function(n){if(n.length>1)return!1;return"1234567890".indexOf(n)!=-1?!0:!1};isBlank=function(n){if(n==null)return!0;for(var t=0;t<n.length;t++)if(n.charAt(t)!=" "&&n.charAt(t)!="\t"&&n.charAt(t)!="\n"&&n.charAt(t)!="\r")return!1;return!0};isInteger=function(n){if(isBlank(n))return!1;for(var t=0;t<n.length;t++)if(!isDigit(n.charAt(t)))return!1;return!0};getDateFromString=function(n){var t,i,r;return t=n.value!=null?n.value.substring(0,2):n.substring(0,2),i=n.value!=null?n.value.substring(3,5):n.substring(3,5),r=n.value!=null?n.value.substring(6,10):n.substring(6,10),new Date(r,i-1,t)};isDate=function(n){var t,e;if(n=="")return!0;if(t=FormatDate(n),t=="")return!1;var i=t.split("/"),f=i[0],r=i[1],u=i[2];return!isNumeric(f)||!isNumeric(r)||!isNumeric(u)?!1:u.length>4?!1:(t=r+"/"+f+"/"+u,e=new Date(t),e.getMonth()+1==r?!0:!1)};isFineMese=function(n){var t=new Date(n.getFullYear(),n.getMonth()+1,1);return t.setDate(t.getDate()-1),t.getDate()==n.getDate()};getFineMese=function(n,t){var i=new Date(n,t+1,1);return i.setDate(i.getDate()-1),i.getDate()};CheckDate=function(n){try{if(isDate(n.value))n.value=FormatDate(n.value,strFormat);else return!1}catch(t){alert(t.message)}};IsValid=function(n){var t=!1,i,r,e,u,o,f;if(n.length==10&&(i=new RGIString,i.SetString(n),t=i.AreDigitsFromTo(0,2),t&&(t=i.IsValidFromTo(2,3,"/-")),t&&(t=i.AreDigitsFromTo(3,5)),t&&(t=i.IsValidFromTo(5,6,"/-")),t&&(t=i.AreDigitsFromTo(6,10)),t&&(t=!1,r=parseInt(i.GetString().substring(3,5),10),r>0&&r<13&&(e=parseInt(i.GetString().substring(0,2),10),u=parseInt(i.GetString().substring(6,10),10),u>1899&&(o=new Date(u,r-1,1),e>0))))){switch(r){case 2:f=IsLeapYear(u)?29:28;break;case 4:case 6:case 9:case 11:f=30;break;default:f=31}e<=f&&(t=!0)}return t};StringaToData=function(n){return IsValid(n)?StringheToData(n.substring(6,10),n.substring(3,5),n.substring(0,2)):null};StringheToData=function(n,t,i){return new Date(parseInt(n,10),parseInt(t,10)-1,parseInt(i,10))};var SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR,WEEK=7*DAY,MONTH=4*WEEK,YEAR=12*MONTH;RGIDate=function(){this._date=new Date;this.SetDate=_SetDate;this.AddDays=_AddDays;this.AddYears=_AddYears;this.SetFromString=_SetFromString;this.GetAsString=_GetAsString;this.SubDays=_SubDays;this.SubDaysFromDate=_SubDaysFromDate;this.GetDate=_GetDate};_SetDate=function(n){this._date.setTime(n.getTime())};_AddDays=function(n){this.SubDays(-n)};_SubDays=function(n){this.SubDaysFromDate(this._date,n)};_GetDate=function(){return this._date};_SubDaysFromDate=function(n,t){var u=n.getHours(),r=n.getTimezoneOffset(),i;this._date.setTime(n.getTime()-t*DAY);i=this._date.getTimezoneOffset()-r;this._date.setTime(this._date.getTime()+i*MINUTE)};_AddYears=function(n){var t=this._date.getYear();t+=t<1900?1900:0;this._date.setYear(t+n)};_SetFromString=function(n){var t=IsValid(n),i;return t&&(i=StringaToData(n),this._date.setTime(i.getTime())),t};_GetAsString=function(){var n=new Date;return n.setTime(this._date.getTime()),DataToStringa(n)};_IsValid=function(n){return this.IsValidFromTo(0,this._string.length,n)};_IsValidFromTo=function(n,t,i){for(var u,r=n;r<t;r++)if(u=this._string.charAt(r),i.indexOf(u)==-1)return!1;return!0};_AreDigitsFromTo=function(n,t){return this.IsValidFromTo(n,t,"1234567890")};_SetString=function(n){this._string=n};_GetString=function(){return this._string};diffDate=function(n,t){date1=new RGIDate;date2=new RGIDate;date1.SetFromString(n);date2.SetFromString(t);datDate1=date1.GetDate();datDate2=date2.GetDate();var i=datDate2-datDate1;return Math.round(i/864e5)};GetDurata=function(n,t){var r,i,u;try{return r=!1,i=this.diffDate(n.value,t.value),i<0&&t!=""?r=!1:(i=this.diffDate(n.value,t.value),i++,u=i,r=!0),this.valid=r,u}catch(f){alert(f.message+" Class: GetDurata(strDataInizio, strDataFine, strOra)")}};IsLeapYear=function(n){return new Date(n,1,29).getDate()==29};currentDateComparer=function(){this.currentDate=new Date;this.currentDay=this.currentDate.getDate();this.currentMonth=this.currentDate.getMonth()+1;this.formatYearTwoDigits=function(n){var t=n.toString().slice(2);return parseInt(t,10)};this.currentYear=this.currentDate.getFullYear();this.parseDate=function(n){try{return n.split("/")}catch(t){return alert(t.message+"currentDateComparer() > Subclass: this.parseDate"),null}};this.isPastDate=function(n,t){try{var i=!0,r=t.parseDate(n),f=parseInt(r[0],10),e=parseInt(r[1],10),u=parseInt(r[2],10),s=t.currentYear;return u>t.currentYear?i=!1:u==t.currentYear&&(e>t.currentMonth?i=!1:f>t.currentDay&&(i=!1)),i}catch(o){return alert(o.message+"currentDateComparer() > Subclass: this.isPastDate"),!1}};this.isFutureDate=function(n,t){try{var i=!1,r=t.parseDate(n),e=parseInt(r[0],10),u=parseInt(r[1],10),f=parseInt(r[2],10),s=t.currentYear;return f>t.currentYear?i=!0:f==t.currentYear&&(u>t.currentMonth?i=!0:u==t.currentMonth&&e>t.currentDay&&(i=!0)),i}catch(o){return alert(o.message+"currentDateComparer() > Subclass: this.isFutureDate"),!1}};this.isMoreThanOneYearFuture=function(n,t){try{var i=!1,u=t.parseDate(n),e=parseInt(u[0],10),f=parseInt(u[1],10),r=parseInt(u[2],10),s=t.currentYear;return r=r-1,r>t.currentYear?i=!0:r==t.currentYear&&(parseInt(f,10)>t.currentMonth?i=!0:parseInt(f,10)==t.currentMonth&&parseInt(e,10)>t.currentDay&&(i=!0)),i}catch(o){return alert(o.message+"currentDateComparer() > Subclass: this.isMoreThanOneYearFuture"),!1}}};notMajorThan9=function(n,t){if(retVal=!0,parseFloat(t.totale.value)>9){if(n.disabled==!1)try{n.focus();n.select();jQuery("#"+n.id).addClass("validate");jQuery(t.a1.parentNode).addClass("validate");jQuery(t.a2.parentNode).addClass("validate");jQuery(t.a3.parentNode).addClass("validate");jQuery(t.a4.parentNode).addClass("validate")}catch(i){}else jQuery("#"+n.id).addClass("validate");retVal=!1}return retVal};notEqualToZero=function(n,t){if(retVal=!0,parseFloat(t.totale.value)==0){if(n.disabled==!1)try{n.focus();n.select();jQuery("#"+n.id).addClass("validate");jQuery(t.a1.parentNode).addClass("validate");jQuery(t.a2.parentNode).addClass("validate");jQuery(t.a3.parentNode).addClass("validate");jQuery(t.a4.parentNode).addClass("validate")}catch(i){}else jQuery("#"+n.id).addClass("validate");retVal=!1}return retVal};Validator.debugActivated=!1;requiredValidator.prototype=new Validator;requiredValidator.prototype.onValidate=function(n){if(retVal=!0,n.value==""){if(this.defaultErrorMessage="il campo: "+this.formElement.name+" è obbligatorio!",this.showErrorMessage(),n.disabled==!1)try{n.focus();n.select();jQuery("#"+n.id).addClass("validate")}catch(t){}else jQuery("#"+n.id).addClass("validate");retVal=!1}return retVal};numericValidator.prototype=new Validator;numericValidator.prototype.onValidate=function(n){if(retVal=!0,!isNumeric(n.value)){this.defaultErrorMessage="field: "+n.name+" is numeric!";this.showErrorMessage();try{n.focus();n.select()}catch(t){}retVal=!1}return retVal};integerValidator.prototype=new Validator;integerValidator.prototype.onValidate=function(n){if(retVal=!0,!isInteger(n.value)){this.defaultErrorMessage="field: "+n.name+" is integer!";this.showErrorMessage();try{n.focus();n.select()}catch(t){}retVal=!1}return retVal};positiveNumericValidator.prototype=new Validator;positiveNumericValidator.prototype.onValidate=function(n){if(retVal=!0,typeof n.value!="undefined"&&(n.value=String(n.value).replace(",",".")),isNumeric(n.value)){if(n.value<=0){this.defaultErrorMessage="field: "+this.formElement.name+" has to be positive!";this.showErrorMessage();try{n.focus();n.select()}catch(t){}retVal=!1}}else{this.defaultErrorMessage="field: "+n.name+" is numeric!";this.showErrorMessage();try{n.focus();n.select()}catch(t){}retVal=!1}return retVal};dateValidator=function(){arguments[0]&&(this.validator=arguments[0]);this.errorMessageKey="dateValidationError"};dateValidator.prototype=new Validator;dateValidator.prototype.onValidate=function(n){try{retVal=!0;var t=FormatDate(n.value,"");if(isDate(n.value))n.value=t;else{this.defaultErrorMessage="field: "+n.name+" has to be a valid date!\n        Format has to be: gg/mm/yyyy, and numeric!";this.showErrorMessage();try{n.focus();n.select()}catch(i){}retVal=!1}}catch(i){Validator.debugActivated&&alert("dateValidator.onValidate: "+i.message);retVal=!1}finally{return retVal}};futureValidator=function(){arguments[0]&&(this.validator=arguments[0]);this.errorMessageKey="futureValidationError"};futureValidator.prototype=new Validator;futureValidator.prototype.onValidate=function(n){try{retVal=!0;this.myDateComparer==null&&(this.myDateComparer=new currentDateComparer);try{retVal=!0;var t=FormatDate(n.value,"");return retVal=this.myDateComparer.isFutureDate(t,this.myDateComparer),retVal||(this.defaultErrorMessage="La data deve essere compresa tra domani e 12 mesi dalla data odierna!",this.showErrorMessage()),n.value=t,retVal}catch(i){Validator.debugActivated&&alert("futureValidator.onValidate-1: "+i.message);retVal=!1}}catch(i){Validator.debugActivated&&alert("futureValidator.onValidate-2: "+i.message);retVal=!1}finally{return retVal}};futureOneYearValidator=function(){arguments[0]&&(this.validator=arguments[0]);this.errorMessageKey="futureValidationError"};futureOneYearValidator.prototype=new Validator;futureOneYearValidator.prototype.onValidate=function(n){try{retVal=!0;this.myDateComparer==null&&(this.myDateComparer=new currentDateComparer);try{retVal=!0;var t=FormatDate(n.value,"");return retVal=this.myDateComparer.isFutureDate(t,this.myDateComparer),retVal?this.myDateComparer.isMoreThanOneYearFuture(t,this.myDateComparer)&&(this.defaultErrorMessage="La data deve essere compresa tra domani e 12 mesi dalla data odierna!",this.showErrorMessage(),retVal=!1):(this.defaultErrorMessage="La data deve essere compresa tra domani e 12 mesi dalla data odierna!",this.showErrorMessage()),n.value=t,retVal}catch(i){Validator.debugActivated&&alert("futureOneYearValidator.onValidate-1: "+i.message);retVal=!1}}catch(i){Validator.debugActivated&&alert("futureOneYearValidator.onValidate-2: "+i.message);retVal=!1}finally{return retVal}};rangeValidator=function(){if(arguments[0]&&(this.validator=arguments[0]),arguments[1]!=null&&arguments[2]!=null)this.limit=arguments[1],this.precision=arguments[2];else return alert("missing range validation parameter"),!1;this.errorMessageKey="rangeValidationError"};rangeValidator.prototype=new Validator;rangeValidator.prototype.onValidate=function(n){try{if(retVal=!0,!isRange(n,this.limit,this.precision)){this.defaultErrorMessage="field: "+n.name+" has to be "+this.precision+" "+this.limit+" characters!!";this.showErrorMessage();try{n.focus();n.select();n.value=this.limit;n.onchange()}catch(t){}retVal=!1}}catch(t){Validator.debugActivated&&alert("tangeValidator.onValidate: "+t.message);retVal=!1}finally{return retVal}};rangeNSADateValidator=function(){if(arguments[0]&&(this.validator=arguments[0]),arguments[1]!=null)this.limit=arguments[1],this.partenza=arguments[2],this.ritorno=arguments[3];else return alert("missing range validation parameter"),!1;this.errorMessageKey="minor90ValidationError"};rangeNSADateValidator.prototype=new Validator;rangeNSADateValidator.prototype.onValidate=function(n){try{if(retVal=!0,GetDurata(myScope.get("departureDate"),myScope.get("returnDate"),"00:00")>this.limit){this.defaultErrorMessage="field: "+n.name+" has to be "+this.precision+" "+this.limit+" characters!!";this.showErrorMessage();try{n.focus();n.select();n.value=this.limit;n.onchange()}catch(t){}retVal=!1}}catch(t){Validator.debugActivated&&alert("rangeNSADateValidator.onValidate: "+t.message);retVal=!1}finally{return retVal}};rangeNSADatePopup=function(){if(arguments[0]&&(this.validator=arguments[0]),arguments[1]!=null)this.limit=arguments[1],this.partenza=arguments[2],this.ritorno=arguments[3];else return alert("missing range validation parameter"),!1;this.errorMessageKey="minor90ValidationError"};rangeNSADatePopup.prototype=new Validator;rangeNSADatePopup.prototype.onValidate=function(n){try{if(retVal=!0,GetDurata(this.partenza,this.ritorno,"00:00")>this.limit){this.defaultErrorMessage="field: "+n.name+" has to be "+this.precision+" "+this.limit+" characters!!";this.showErrorMessage();this.showPopup("Avviso",this.messageBoard.getMessage(this.errorMessageKey+"Popup").toString());try{n.focus();n.select();n.onchange()}catch(t){}retVal=!0}}catch(t){Validator.debugActivated&&alert("rangeNSADateValidator.onValidate: "+t.message);retVal=!1}finally{return retVal}};travelersValidator=function(){if(arguments[0]!=null)this.totale=arguments[0],this.a1=arguments[1].options[arguments[1].selectedIndex],this.a2=arguments[2].options[arguments[2].selectedIndex],this.a3=arguments[3].options[arguments[3].selectedIndex],this.a4=arguments[4].options[arguments[4].selectedIndex];else return alert("something went wrong"),!1;this.errorMessageKey="major1SeniorTravellerValidationError"};travelersValidator.prototype=new Validator;travelersValidator.prototype.onValidate=function(n){try{if(retVal=!0,notEqualToZero(n,this)&&!notMajorThan9(n,this))parseFloat(this.a1.text)>0&&parseFloat(this.a2.text)==0&&parseFloat(this.a3.text)==0&&parseFloat(this.a4.text)==0?(this.defaultErrorMessage="il campo: "+this.formElement.name+" è obbligatorio!",this.errorMessageKey="major1SeniorTravellerValidationError",this.showErrorMessage(),retVal=!1):(this.errorMessageKey="minor9TravellersValidationMsg",this.showErrorMessage(),retVal=!1);else if(!notEqualToZero(n,this)&&notMajorThan9(n,this))this.errorMessageKey="major1TravellerValidationError",this.showErrorMessage(),retVal=!1;else if(parseFloat(this.a1.text)>0&&parseFloat(this.a2.text)==0&&parseFloat(this.a3.text)==0&&parseFloat(this.a4.text)==0){if(this.errorMessageKey="major1SeniorTravellerValidationError",this.showErrorMessage(),n.disabled==!1)try{n.focus();n.select();jQuery(this.a2).parent().addClass("validate");jQuery(this.a3).parent().addClass("validate");jQuery(this.a4).parent().addClass("validate");jQuery("#"+n.id).addClass("validate")}catch(t){}else jQuery("#"+n.id).addClass("validate");retVal=!1}}catch(t){Validator.debugActivated&&alert(""+t.message);retVal=!1}finally{return retVal}};validateAll=function(n){var t=document.getElementById(n.id);for(retVal=!0,i=0;i<t.length;i++)if(t[i].validationObject&&(validationObject=t[i].validationObject,retVal=validationObject.validate(),retVal==!1))return retVal;return retVal};createCalendarImageButton=function(n,t,i,r,u,f,e){var a,o,v,s,h;try{var y=i.getFullYear(),p=i.getMonth()+1,w=i.getDate(),b=w+"/"+p+"/"+y,c=document.createElement("input");c.setAttribute("type","hidden");c.setAttribute("id",t+"_startPoxDate");c.setAttribute("value",b);document.getElementById(n).appendChild(c);u!=""&&(a=u,o=document.createElement("input"),o.setAttribute("type","hidden"),o.setAttribute("id",t+"_startPoxDateEl"),o.setAttribute("value",a),document.getElementById(n).appendChild(o));var k=r.getFullYear(),d=r.getMonth()+1,g=r.getDate(),nt=g+"/"+d+"/"+k,l=document.createElement("input");l.setAttribute("type","hidden");l.setAttribute("id",t+"_endPoxDate");l.setAttribute("value",nt);document.getElementById(n).appendChild(l);f!=""&&(v=f,s=document.createElement("input"),s.setAttribute("type","hidden"),s.setAttribute("id",t+"_endPoxDateEl"),s.setAttribute("value",v),document.getElementById(n).appendChild(s));typeof e!="undefined"&&(h=document.createElement("input"),h.setAttribute("type","hidden"),h.setAttribute("id",t+"_toClear"),h.setAttribute("value",e),document.getElementById(n).appendChild(h))}catch(tt){alert(tt.message+" createCalendarImageButton")}};jQuery.fn.serializeObject=function(){var n={},t=this.serializeArray();return jQuery.each(t,function(){n[this.name]!==undefined?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(jQuery.param(params)),n[this.name].push(this.Text||"")):n[this.name]=this.value||""}),n};addYear=function(n,t){return date1=new RGIDate,date1.SetFromString(n),date1.AddYears(t),date1.GetAsString()};addDate=function(n,t){return date1=new RGIDate,date1.SetFromString(n),date1.AddDays(t),date1.GetAsString()};addOneYear=function(n){var t;return t=addYear(n.value,1),addDate(t,parseInt(-1,10))};DataToStringa=function(n){var u=n.getDate(),f=n.getMonth(),r=n.getYear(),t="",i="";return t=""+u,t.length<2&&(t="0"+t),i=t+"/",t=""+(f+1),t.length<2&&(t="0"+t),i=i+t+"/",i+(r<1900?1900+r:r)};addHidden=function(n,t,i){if(i.trim()!=""&&document.getElementById(t)==null){var r=document.createElement("input");return r.type="hidden",r.name=t,r.id=t,r.value=i,document.getElementById(n).appendChild(r)}return null};CommerceForm=function(){this.formID=arguments[0]!=null?arguments[0]:jQuery('input#ID[type="hidden"]')["0"].parentElement.id.replace("Container","");arguments[1]!=null&&(this.flusso=arguments[1]);arguments[2]!=null&&(this.trkCode=arguments[2]);this.logic=this;this.Portale=getPortaleCustomerHost();this.flusso_s="Standalone";this.flusso_b="Bundle";this.flussoID="form_flusso";this.trkCodeID="form_trkCode";jQuery("#"+this.trkCodeID).length>0&&(this.trkCode=jQuery("#form_trkCode").text().trim());this.destConfig="/_layouts/15/ea/config/ea_destinazioni.xml";this.messageLoading="Stiamo elaborando il preventivo..";this.messageBoardID=""+formID+" #messageBoard";this.FormItems=function(){var n={};n.items={};n.length=0;this.add=function(t,i,r,u,f,e,o){var s=new FormItemProperties;s.add(t,i,r,u,f,e,o);n.items[""+t+""]=s.properties;n.length+=1};this.formItems=n};this.FormItemProperties=function(){this.add=function(n,t,i,r,u,f){myScope.addElement(document.getElementById(t),n);var e;if(f!=""&&typeof f!="undefined"&&f!=null||i!=""&&typeof i!="undefined"&&i!=null)switch(f){case"positiveduration":e=new requiredValidator(new positiveNumericValidator,myScope.get("departureDate"),myScope.get("returnDate"));break;default:e=new requiredValidator(i)}else e=new requiredValidator;e.errorMessageKey=r;myMessageBoard.addMessage(r,u);attachValidation(e,myScope.get(n),myMessageBoard)};this.properties={}};this.messageBoard=function(){this.elementBoard=document.getElementById("messageBoard");elementBoard==null&&(elementBoard=document.getElementById(formID+"messageBoard"));myMessageBoard.addBoardElement(elementBoard)};this.validate=function(){var n=new FormItems;n.add("location","D_6105_R_7551",null,"positiveValidationError","Selezionare una destinazione");n.add("departureDate","departureDate",new futureOneYearValidator(new dateValidator),"departureDateValidationError","Per proseguire &eacute; necessario inserire la data di inizio.");n.add("returnDate","returnDate",new futureValidator(new dateValidator),"returnDateValidationError","Per proseguire &eacute; necessario inserire la data di fine.");n.add("durationDays","D_6107_R_7544",null,"futureValidationError","La data deve essere compresa tra domani e 12 mesi dalla data odierna!","positiveduration","departureDate|returnDate");n.add("EtaAssicuratiF1","D_6101");n.add("EtaAssicuratiF2","D_6102");n.add("EtaAssicuratiF3","D_6103");n.add("EtaAssicuratiF4","D_6104");n.add("peopleTravelling","D_6100_R_7540");n.add("peopleTravelling","D_6100_R_7540",new travelersValidator(myScope.get("peopleTravelling"),myScope.get("EtaAssicuratiF1"),myScope.get("EtaAssicuratiF2"),myScope.get("EtaAssicuratiF3"),myScope.get("EtaAssicuratiF4")),"positiveValidationError2","Selezionare almeno un viaggiatore")};this.submit=function(){this.submit.flow=function(){logic.flusso==null&&(logic.flusso=document.getElementById(flussoID)!=null&&EA.Common.stripHtml(document.getElementById(flussoID)).toString().trim()==flusso_b?"bundletariffa":"tariffa");logic.trkCode==null?addHidden(formID,"trkCode",EA.Common.stripHtml(document.getElementById(trkCodeID)).toString().trim()):addHidden(formID,"trkCode",logic.trkCode.toString().trim())};this.submit.commerceDialog=function(){logic.submit.commerceDialog.popup=function(n){return"<h2 style='text-align:center;width:300px'><br >"+n+"<br><br><img src='/_layouts/15/ea/web/images/ajax-loader-site.gif'><br ><\/h2>"};itemID="msgPrev";jQuery("#"+formID+"Container").after("<div id='"+itemID+"' style='display:none'><\/div>");jQuery("#"+itemID+"").html(logic.submit.commerceDialog.popup(messageLoading));EADialog.open("",itemID,"auto","auto")};logic.submit.flow();typeof EA.Web.Runtime!="undefined"&&EA.Web.Runtime.SupportClass();jQuery("#"+formID+"btn").click(function(){jQuery("#bloccoTravellersDiv").delay(100).fadeOut();logic.validate();var n=validateAll(document.forms[formID]);if(jQuery("#D_6100_R_7540").hasClass("validate")?jQuery(jQuery("#D_6100_R_7540").prev()).addClass("validator"):jQuery(jQuery("#D_6100_R_7540").prev()).removeClass("validator"),n==!0){jQuery.support.cors=!0;jQuery.ajax({cache:!1,type:"GET",data:jQuery("#"+formID+"").serializeObject(),async:!1,jsonpCallback:"jsonCallback"+formID+"",beforeSend:function(n,t){logic.submit.commerceDialog(formID);t.contentType=="application/json"&&typeof t.data!="string"&&(t.data=JSON.stringify(t.data))},url:Portale+"/"+logic.flusso+"/JsonpQuestionarioQuick?",dataType:"jsonp",success:function(n){n.isQuotazioneOK=="False"?(jQuery("#"+elementBoard.id).html(n.QuotazioneErrorMessage),EADialog.hide()):top.location=n.returnURL},error:function(n,t,i){console.log("EACommerceForm ErrorText: "+t);console.log("EACommerceForm thrownError: "+i+" - "+t);EADialog.hide()},complete:function(){}});function t(n){console.log("jsonCallback"+formID+"; "+n)}}return!1})};this.travelers=function(){var n=0;jQuery("#"+formID+" #D_6101, #"+formID+" #D_6102, #"+formID+" #D_6103,#"+formID+" #D_6104").change(function(){n=0;jQuery("#D_6101, #D_6102, #D_6103, #D_6104").each(function(){jQuery("select#"+jQuery(this).attr("id")+" option:selected").val();n+=parseInt(jQuery("select#"+jQuery(this).attr("id")+" option:selected").text())});jQuery("#D_6100_R_7540").val(n)});jQuery("#"+formID+" input, #"+formID+" select").each(function(){jQuery(this).attr("id")!=null&&(jQuery(this).attr("id").indexOf("D_")>=0||jQuery(this).attr("id").indexOf("ID")>=0)&&jQuery(this).attr("name",jQuery(this).attr("id"))});jQuery("#"+formID+" input, #"+formID+" .ui-datepicker-trigger, #"+formID+" select, #"+formID+" .validate").click(function(){jQuery("#"+formID+" input").each(function(){jQuery(this).removeClass("validate")});myMessageBoard.clean()})};this.wrapForm=function(){jQuery("#"+formID+"Container").attr("class","AppCommerce");jQuery("#"+formID+"Container").wrap("<form id='"+formID+"' name='"+formID+"' method='get' enctype='multipart/form-data'><\/form>");this.travelers();this.click();document.formScope=new FormDictionary;document.bodyOnLoadDelegate=new Delegate;myScope=document.formScope;this.messageBoard()};this.aim=function(){this.aim.autocomplete=function(){logic.aim.autocomplete.selectedItem=function(n){var t=!1;return n!=null?(jQuery("#D_6105_R_7551").val(n.label||n.value),jQuery("#D_6106 option, #D_6110_R_7552 option").each(function(){jQuery(this).removeAttr("selected")}),jQuery('#D_6110_R_7552 option[id="'+n.id+'"]').attr("selected","selected"),jQuery('#D_6106 option[id="'+n.id+'"]').attr("selected","selected"),jQuery("#D_6110_R_7552").val(jQuery('#D_6110_R_7552 option[id="'+n.id+'"]').val()),jQuery("#D_6106").val(jQuery('#D_6106 option[id="'+n.id+'"]').val()),t=!0):(jQuery("#"+formID+" #D_6105_R_7551").val().toLowerCase()!=""?jQuery.map(logic.datadest,function(n){if(n.value.toLowerCase().indexOf(jQuery("#"+formID+" #D_6105_R_7551").val().toLowerCase())==0)return t=!0,logic.aim.autocomplete.selectedItem(n),t}):jQuery("#D_6105_R_7551").val(""),t)};jQuery("#"+formID+" #D_6105_R_7551").autocomplete({source:function(n,t){var i=jQuery.map(datadest,function(t){if(t.value.startsWith(n.term.toUpperCase()))return t});t(i)},select:function(n,t){var i=logic.aim.autocomplete.selectedItem(t.item);i==!1&&jQuery("#"+formID+" #D_6105_R_7551").val("")},change:function(n,t){var i=logic.aim.autocomplete.selectedItem(t.item);i==!1&&jQuery("#"+formID+" #D_6105_R_7551").val("")},matchCase:0,appendTo:"#resultautocomplete",open:function(){},fillin:!0}).keypress(function(n){n.which==13&&jQuery("#"+formID+" ul.ui-autocomplete").is(":visible")&&jQuery("#"+formID+" .ui-autocomplete:first")[0].firstChild.click()})};this.aim.hiddenExt=function(){var n,t;jQuery.each(datadest,function(i,r){n+="<option id='"+r.id+"'>"+r.id+"<\/option>";t+="<option id='"+r.id+"'>"+r.ext+"<\/option>"});jQuery("#"+formID+" #D_6106").append(t);jQuery("#"+formID+" #D_6110_R_7552").append(n);logic.aim.autocomplete()};jQuery.ajax({url:this.destConfig,dataType:"xml",success:function(n){var t=jQuery("destinazione",n).map(function(){return{id:jQuery.trim($("id",this).text()),value:jQuery.trim($("value",this).text()),ext:jQuery.trim($("extension",this).text())}}).get();jQuery("#"+formID+" #D_6105_R_7551").after("<select id='D_6110_R_7552' name='D_6110_R_7552' style='display:none'><\/select>");jQuery("#"+formID+" #D_6105_R_7551").after("<select id='D_6106' name='D_6106' style='display:none'><\/select>");logic.datadest=t;logic.aim.hiddenExt()}})};this.click=function(){jQuery("#landing_page").length==0&&typeof EA.Web.Slider!="undefined"&&(EA.Web.Slider.$tab_clicked=!0);typeof EA.Web.Slider!="undefined"&&jQuery(".preventivo_box.form").length==0?jQuery("#"+formID+"Container .info").click(function(){var n=jQuery("#evidence-container");return showHelp_right(jQuery(this).children(".InfoTEXT").html(),jQuery(this).offset().top,jQuery(this).offset().left+(n.length!=0?n.offset().left-n.offset().left+15:15)),!1}):jQuery("#"+formID+"Container .info").click(function(){return showHelp(jQuery(this).children(".InfoTEXT").html(),jQuery(this).offset().top,jQuery(this).offset().left),!1});jQuery("#"+formID+" input, #"+formID+"btn").click(function(){jQuery("#"+formID+" input, #"+formID+" select").each(function(){jQuery(this).removeClass("validate")})});jQuery("#s4-workspace").click(function(n){jQuery(n.target).hasClass("info")||jQuery("#EAHelp").hide()})};this.calendar=function(){this.calendar.check=function(){jQuery("#"+formID+" #D_6107_R_7544").val(GetDurata(document.getElementById("departureDate"),document.getElementById("returnDate"),"00:00"))};this.calendar.picker=function(){jQuery("#"+formID+" #departureDate, #"+formID+" #returnDate").attr("readonly","readonly").addClass("disabled");jQuery("#"+formID+" #departureDate").datepicker({beforeShow:customRange,onClose:function(){jQuery("#D_6108_R_7545").val(this.value);logic.calendar.check();logic.calendar()},appendTo:"#resultCalendar"});jQuery(".ui-datepicker-trigger").on("click",function(){jQuery("#bloccoTravellersDiv").css("display")=="block"&&jQuery("#bloccoTravellersDiv").delay(100).fadeOut()});jQuery("#"+formID+" #returnDate").datepicker({beforeShow:customRange,onClose:function(){jQuery("#D_6109_R_7546").val(this.value);logic.calendar.check();var n=new FormItems;n.add("durationDays","D_6107_R_7544",new rangeNSADatePopup(myScope.get("durationDays"),90,document.getElementById("departureDate"),document.getElementById("returnDate")));setTimeout(function(){validateAll(document.forms[formID])},100)},appendTo:"#resultCalendar"});jQuery(".ui-datepicker-trigger").on("click",function(){jQuery("#bloccoTravellersDiv").css("display")=="block"&&jQuery("#bloccoTravellersDiv").delay(100).fadeOut()})};this.calendar.set=function(n){createCalendarImageButton("imgCalendarDeparture","departureDate",addQuestionarioDays(new Date,1),new Date(2990,1,1),"","departureDate");createCalendarImageButton("imgCalendarReturn","returnDate",addQuestionarioDays(new Date(getDateFromString(document.getElementById("departureDate"))),0),n._date,0,"","returnDate");logic.calendar.picker()};jQuery("#"+formID+" #imgCalendarDeparture, #"+formID+" #imgCalendarReturn").html("");var t=new DateDifferenceElement(document.getElementById("departureDate"),document.getElementById("returnDate"),document.getElementById("#D_6109_R_7546"),myMessageBoard),n=new RGIDate;n.SetFromString(t.addOneYear1notPrint());n.SubDaysFromDate(n._date,1);this.calendar.set(n)};this.travelersShowHide=function(){jQuery("#s4-workspace").click(function(n){if(jQuery(n.target).parents(".quanti").length>0)if(jQuery("#bloccoTravellersDiv").css("display")=="block"){var t=typeof n.target.classList!="undefined"?n.target.classList["0"]:n.target.className;switch(t){case"top-label-viaggiatori":jQuery("#bloccoTravellersDiv").css("display")=="block"&&jQuery("#bloccoTravellersDiv").delay(100).fadeOut();break;case"n-viaggiatori":jQuery("#bloccoTravellersDiv").css("display")=="block"&&n.target.id=="D_6100_R_7540"?jQuery("#bloccoTravellersDiv").delay(100).fadeOut():jQuery("#bloccoTravellersDiv").css({opacity:1}).show()}}else jQuery("#bloccoTravellersDiv").css({opacity:1}).show();else jQuery("#bloccoTravellersDiv").delay(100).fadeOut()})};this.form=function(){try{this.wrapForm();this.travelersShowHide();this.calendar();this.aim();this.submit()}catch(n){console.log("this.form "+n)}};this.init=function(){this.form()};init()};