/**
 * Copyright 2017 Webtrends Inc. All Rights Reserved.
 * WEBTRENDS PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 *
 * For information on libraries used by the Webtrends Infinity Tag, please see
 * the following link: https://producthelp.webtrends.com/data-collection/third-party-libraries/
 */
function z1539(){this.zfff3=false;this.z9ea2=false;this.ze3c2=false;this.z2b20=[];this.zf310=[];this.z23eb={};this.zc901=false;this.z907d=null;this.z93cb=null;this.z4e9a=null;this.zefb8=false;this.g_done=false;this.z28c4={};var z1a23=this;var zf8af=WT.optimizeModule?WT.optimizeModule:null;var zc208='optimize';if(typeof WT.optimizeModule!=='undefined'&&typeof WT.optimizeModule.ProductName!=='undefined'){zc208=WT.optimizeModule.ProductName;}var z2fa2={};if(typeof WT.optimizeModule!=='undefined'&&typeof WT.optimizeModule.prototype.wtConfigObj!=='undefined'){z2fa2=WT.optimizeModule.prototype.wtConfigObj;}this.z95e8=function(){this.z23eb["s_keyToken"]="0000";this.z23eb["s_domainKey"]="0000";this.z23eb["s_capiMajorVersion"]="4";this.z23eb["s_capiMinorVersion"]="2";this.z23eb["s_capiIncVersion"]="3";this.z23eb["s_capiDebug"]=("${debug:false}"==="true");this.z23eb["s_allowCapiConfig"]=(typeof(zb410)==="undefined"?false:zb410);this.z23eb["s_capiConfigFile"]="wtopt.config.js";this.z23eb["s_capiConfigSearchPath"]=[""];this.z23eb["s_pageProtocol"]=(typeof(z27a3)==="undefined"||!z27a3?(document.location.protocol==="https:"?"https":"http"):"https");this.z23eb["s_otsServer"]="ots.optimize.webtrends.com";this.z23eb["s_otsCDNServer"]="";this.z23eb["s_wasServer"]="was.webtrends.com";this.z23eb["s_otsWebApp"]="/ots";this.z23eb["s_otsWebAppServlet"]="/api";this.z23eb["s_pageMode"]="head";this.z23eb["s_pageDisplayMode"]="visibility";this.z23eb["s_scriptServer"]=(this.z23eb["s_otsCDNServer"]===""?this.z23eb["s_otsServer"]+this.z23eb["s_otsWebApp"]+"/lib/":this.z23eb["s_otsCDNServer"]);this.z23eb["s_pageTimeout"]=4000;this.z23eb["s_conversionTimeout"]=2000;this.z23eb["s_version"]="Protocol: "+this.z23eb["s_capiMajorVersion"]+"."+this.z23eb["s_capiMinorVersion"]+"."+this.z23eb["s_capiIncVersion"];this.z23eb["s_otsLibUrl"]=this.z23eb["s_pageProtocol"]+"://"+this.z23eb["s_scriptServer"]+this.z23eb["s_capiMajorVersion"]+"."+this.z23eb["s_capiMinorVersion"]+"/"+"wt_lib"+(this.z23eb["s_capiDebug"]?"_debug":"")+".js";this.z23eb["s_loaderHide"]=false;var onload=function(){if(z1a23.zefb8){return;}z1a23.zefb8=true;WT.fireEvent(new WT.Event(WT.Event.DOM_ONLOAD,WT.Event.STATUS_SUCCESS));};if(window.addEventListener){window.addEventListener('load',function(){window.removeEventListener("load",arguments.callee,false);WT.Debug.trace("capi: onload fired");onload();},false);}else if(window.attachEvent){window.attachEvent('onload',function(){window.detachEvent("onload",arguments.callee,false);WT.Debug.trace("capi: onload fired");onload();});}WT.addEventHandler(WT.Event.ABORT,this.z8cdc,this.z8cdc);WT.addEventHandler(WT.Event.z4519,this.z99db,this.z99db);if(this.z23eb["s_allowCapiConfig"]){zc7ef();}else{this.zc901=true;}};var zc7ef=function(){try{var zbf8e=function(event){var config=event.target;if(config){for(var z2186 in config){if(config.hasOwnProperty(z2186)){z1a23.z23eb[z2186]=config[z2186];};};}WT.fireEvent(new WT.Event(WT.Event.z0cf5,WT.Event.STATUS_SUCCESS),true);z1a23.zc901=true;};WT.addEventHandler(WT.Event.CAPI_CONFIG,zbf8e);for(z2ca0=0;z2ca0<z1a23.z23eb["s_capiConfigSearchPath"].length;z2ca0++){z32da._createScriptEl(z1a23.z23eb["s_capiConfigSearchPath"][z2ca0]+z1a23.z23eb["s_capiConfigFile"],"load s_capiConfigFile");}}catch(z392c){WT.Debug.error("Problem loading wtop.config.",100,z392c);}};var zbb92=function(){if(navigator.cookieEnabled){return true;}document.cookie="_wt.areCookiesEnabled=true;";var z5273=document.cookie.indexOf("_wt.areCookiesEnabled=true")>=0;document.cookie="_wt.areCookiesEnabled=true; expires="+new Date().toGMTString();return z5273;};this.paramsMerge=function(z70ef,ze730,z183b){var z9180=z70ef["r_cWrapEl"];z70ef["r_cWrapEl"]=null;var params=WT.paramsMerge(z70ef,ze730,z183b);z70ef["r_cWrapEl"]=z9180;params["r_cWrapEl"]=z9180;return params;};this.zcceb=function(zf64e){var params={};var z677c=z1a23.runMgr.lookup(zf64e["testAlias"]);if(zf8af&&zf8af.prototype.wtConfigObj){params=WT.paramsMerge(this.z23eb,zf8af.prototype.wtConfigObj);}else{params=this.z23eb;}if(WT.hasVal(z677c)&&WT.hasVal(z677c["params"])&&!(z677c["params"]["s_requestType"]==="conversion"&&!z677c["params"]["s_isInternalCV"])){params=WT.paramsMerge(params,z677c["params"]);}if(WT.hasVal(zf64e)){params=z1a23.paramsMerge(params,zf64e);}WT.Debug.info("start: WT Optimize CAPI Version: "+params["s_version"]);if(!zbb92()){throw "Cookies are not enabled, WT Optimize is disabled.";}var z41a0=params["contentWrapper"];var z9180=null;if(z41a0){z9180=document.getElementById(z41a0);WT.Debug.debug("capiParams: using wrapper ["+z41a0+"] for test alias ["+params["testAlias"]+"]");}else if(params["testAlias"]){WT.Debug.debug("capiParams: using moniker ["+params["testAlias"]+"]");z9180=document.getElementById(params["testAlias"]);}if(document.cookie.indexOf("_wt.debugwindow=")>=0){var zaa91=document.cookie.indexOf("_wt.debugwindow=");var zcd83=document.cookie.split(';');for(var z205e=0;z205e<zcd83.length;z205e++){var z8403=zcd83[z205e];while(z8403.charAt(0)===' ')z8403=z8403.substring(1,z8403.length);if(z8403.indexOf(zaa91)===0){params["debug"].length=z8403.substring(zaa91.length,z8403.length);params["debug"]=true;break;};};}if(!z9180){WT.Debug.debug("capiParams: using body to prepare run.");z9180=document.body;}if(typeof params["r_cWrapEl"]==="undefined"){params["r_cWrapEl"]=z9180;}if(params["s_requestType"]==="conversion"){if(params["r_redirectLink"]){var z9de9=params["r_redirectLink"];setTimeout(function(){WT.redirectElement(z9de9);},params["s_conversionTimeout"]);};}else{if(!this.z907d){this.z907d=setTimeout(function(){WT.fireEvent(new WT.Event(WT.Event.z4519,WT.Event.STATUS_FAULT,params));},params["s_pageTimeout"]);this.z93cb=new Date();WT.Debug.info("timer: started ["+this.z93cb+"].");}else{WT.Debug.info("timer: already started, using current timer.");}if(params["s_loaderHide"]===false){WT.hideAndShow(z9180,params["s_pageDisplayMode"],false,params["overlayColor"]);WT.Debug.debug("s_loaderHide === "+params["s_loaderHide"]+", so hiding cWrapEl");}else{WT.Debug.debug("s_loaderHide === "+params["s_loaderHide"]+", so not hiding cWrapEl");};}WT.fireEvent(new WT.Event(WT.Event.PREPARE,WT.Event.STATUS_SUCCESS,params));return params;};this.z3e29=function(zf64e){try{WT.optimize.z8fc82=WT.common.JSONPrettify;WT.optimize.Library._createScriptEl=WT.common._createScriptEl;WT.optimize.Library._createElement=WT.common._createElement;WT.optimize.Library._execScript=WT.common._execScript;var params=this.zcceb(zf64e);this.zf310.push(params);if(WT.hasVal(params["r_redirectLink"])&&WT.hasVal(params["testAlias"])){var z677c=z1a23.runMgr.lookup(params["testAlias"]);if(WT.hasVal(z677c)){z677c.params["r_redirectLink"]=params["r_redirectLink"];};}WT.Debug.debug("initialize: Preparing to Optimize");WT.fireEvent(new WT.Event(WT.Event.INITIALIZE,WT.Event.STATUS_SUCCESS,params));WT.optimize.Library.z311d(params["testAlias"],params);}catch(z392c){WT.Debug.error("initialize: error during framework setup.",147,z392c);WT.fireEvent(new WT.Event(WT.Event.INITIALIZE,WT.Event.STATUS_FAULT));WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT));}};this.z99db=function(event){WT.optimize.z4e9a=new Date();if(WT.optimize.z907d){clearTimeout(WT.optimize.z907d);WT.optimize.z907d=null;}WT.Debug.error(event.name+" expired. s_pageTimeout value exceeded. ["+WT.optimize.z4e9a+"]",101);WT.optimize.z8cdc(event);};this.z8cdc=function(event){if(WT.optimize.z907d){WT.optimize.z4e9a=new Date();clearTimeout(WT.optimize.z907d);z1a23.g_done=true;WT.Debug.info(event.name+": clearing active timer ["+WT.optimize.z4e9a+"]");}if(WT.optimize.ze3c2===false){WT.optimize.ze3c2=true;}else{return;}if(WT.getExecuteState(zc208)!==WT.Event.LOADER_MODULE_ABORT){WT.fireEvent(new WT.Event(zc208+"_"+WT.Event.LOADER_MODULE_ABORT,WT.Event.STATUS_SUCCESS));WT.setExecuteState(zc208,"aborted");}if((event.target&&event.target["r_cWrapEl"])&&!event.target["defaultUrl"]){var z9180=event.target["r_cWrapEl"];WT.hideAndShow(z9180,event.target["s_pageDisplayMode"],true,event.target["overlayColor"]);}else if(event.target&&event.target["defaultUrl"]){WT.fireEvent(new WT.Event(WT.Event.DONE,event["state"]));WT.Debug.info(event.name+": redirecting to error url ["+event.target["defaultUrl"]+"]");document.location.href=event.target["defaultUrl"];return;}for(var z205e=0;z205e<WT.optimize.z2b20.length;z205e++){var z2945=WT.optimize.z2b20[z205e];var ze017=z2945.params["r_cWrapEl"];if(z2945&&ze017&&!z2945.params["defaultUrl"]){try{WT.hideAndShow(ze017,z2945.params["s_pageDisplayMode"],true,z2945.params["overlayColor"]);WT.Debug.error(event.name+": render page due to error. [alias: "+z2945.params["testAlias"]+", dom id: "+ze017.id+"]",102);}catch(z392c){WT.Debug.error(event.name+": unhide failed. [alias: "+z2945.params["testAlias"]+", dom id: "+ze017.id+"]",103,z392c);};}else if(z2945&&z2945.params["defaultUrl"]){WT.fireEvent(new WT.Event(WT.Event.DONE,event["state"]));WT.Debug.info(event.name+": redirecting to error url ["+z2945.params["defaultUrl"]+"] for alias ["+z2945.params["testAlias"]+"]");document.location.href=z2945.params["defaultUrl"];return;};}if(!WT.optimize.zc901){WT.hideAndShow(document.body,this.z23eb["s_pageDisplayMode"],true,this.z23eb["overlayColor"]);}WT.fireEvent(new WT.Event(WT.Event.DONE,event["state"]));WT.optimize.runMgr.setAllRunsDone();};var z008e8=function(){var z01143=this;var zf82aa=false;var ze020e;var z19b2c=0;z01143.getOptData=function(z2859f,filter){var z9da9=z01143.lookup(z2859f);var za17e={};var z00698=function(z3ec0){return WT.hasVal(z3ec0)?z3ec0:"";};if(!z9da9||(WT.hasVal(filter)&&!filter(z9da9))){return za17e;}if(WT.hasVal(z9da9["params"]["r_experimentID"])&&z9da9["params"]["r_experimentID"]!==""){za17e["opt.experiment_id"]=z9da9["params"]["r_experimentID"];}if(WT.hasVal(z9da9["params"]["r_personalizedID"])&&z9da9["params"]["r_personalizedID"]!==""){za17e["opt.experiment_id"]=z9da9["params"]["r_personalizedID"];}var type=z00698(z9da9["params"]["r_type"]).toLowerCase();if(!z9da9["params"]["r_personalizedID"]&&!z9da9["params"]["r_experimentID"]&&type==="baseline"){za17e["opt.experiment_id"]="";}if(WT.hasVal(z9da9["params"]["externalUID"])){za17e["opt.external_uid"]=z9da9["params"]["externalUID"];}if(!WT.hasVal(za17e["opt.experiment_id"])){return za17e;}za17e["opt.account_id"]=z00698(z9da9["params"]["s_domainKey"]);za17e["opt.guid"]=z00698(z9da9["params"]["guid"]);za17e["opt.project_type_id"]=z00698(z9da9["params"]["r_type"]);za17e["opt.project_id"]=z00698(z9da9["params"]["r_testID"]);za17e["opt.test_id"]=z00698(z9da9["params"]["r_runID"]);za17e["opt.mode"]=z00698(z9da9["params"]["r_runState"]);return za17e;};z01143.getAllRunData=function(){var ze86c5=["opt.guid","opt.project_type_id","opt.project_id","opt.test_id","opt.experiment_id","opt.mode","opt.account_id","opt.external_uid"];var zdb566=WT.common.extendArray;var filter=function(z9da9){try{return WT.hasVal(z9da9.z7715["pageview"])?true:false;}catch(z392c){WT.Debug.error("Error looking for Run conversionPoint",149,z392c,"OPT");return false;}};var z5632c=[];zdb566(z1a23.z2b20).forEach(function(zae74){var zdda45=zae74["params"]["testAlias"];var z39217=z01143.getOptData(zdda45,filter);if(WT.common.extendObject(z39217).length()!==0){z5632c.push(z39217);}});var payload={};zdb566(ze86c5).forEach(function(z980e){var z1443d=[];zdb566(z5632c).forEach(function(z813cb){if(WT.hasVal(z813cb[z980e])){z1443d.push(z813cb[z980e]);}});if(z1443d.length>0){payload[z980e]=z1443d.join(",");}});return payload;};z01143.lookup=function(z2859f,z32931){for(var z205e=0;z205e<z1a23.z2b20.length;z205e++){var zae74=z1a23.z2b20[z205e];if(zae74.params["testAlias"]===z2859f&&(!z32931||z32931===zae74.params["s_requestType"])){return zae74;};}return null;};z01143.setRunPageState=function(z655d1,z40b87){for(var z205e=0;z205e<z1a23.z2b20.length;z205e++){var zae74=z1a23.z2b20[z205e];if(zae74.params["testAlias"]===z655d1){zae74.setPageState(z40b87);if(z40b87==="invalid"||z40b87==="done"){zae74.zb87cb();};};}z01143.z4e801();};z01143.z4e801=function(){if(WT.optimize.runMgr.allRunsComplete()===true&&zf82aa===false){zf82aa=true;WT.fireEvent(new WT.Event(WT.Event.OPT_COMPLETE,WT.Event.STATUS_SUCCESS,null),false,true);}};z01143.zc20bc=function(){return z1a23.z2b20.length>0?z1a23.z2b20[0]:undefined;};z01143.clearRuns=function(){z1a23.z2b20=[];};z01143.setAllRunsDone=function(){WT.common.extendArray(z1a23.z2b20).forEach(function(zae74){var z5fe87=zae74.params["testAlias"];z01143.setRunPageState(z5fe87,"done");});};z01143.allRunsComplete=function(){var z73e03=0;var z0b51e=0;if(z1a23.z2b20.length>0){z73e03=z01143.zc7048();z0b51e=z01143.zcdc78();if(z0b51e!==z73e03){return false;};}var z99713=0;for(var zd4f0=0;zd4f0<z1a23.z2b20.length;zd4f0++){var zae74=z1a23.z2b20[zd4f0];if(zae74&&zae74.z7af9d()){z99713++;};}return(z99713===z1a23.z2b20.length);};z01143.zc4821=function(){var z73e03=z01143.zc7048();var z0b51e=z01143.zcdc78();if(z0b51e!==z73e03){WT.Debug.trace("runPostRender:  not last response do not run postRenderConversionEvent()","OPT");return;}WT.common.extendArray(z1a23.z2b20).forEach(function(zae74){WT.Debug.trace("runPostRender:  running postRenderConversionEvent for '"+zae74["params"]["testAlias"]+"'","OPT");zae74.z4f49();});};z01143.z13c21=function(z77d61){ze020e=z77d61;};z01143.zc7048=function(){return ze020e;};z01143.z2ddf6=function(z2a80a){if(!WT.hasVal(ze020e)){WT.Debug.trace("expectedResponses is undefined, not incrementing processedResps","OPT");return false;}if(!WT.hasVal(z2a80a)){z2a80a=1;}if(z19b2c+z2a80a>ze020e){WT.Debug.trace("not incrementing because ("+z2a80a+"+processedResps)>expectedResponses, processedResps: "+z19b2c+", expectedResponses: "+ze020e,"OPT");return false;}z19b2c+=z2a80a;WT.Debug.trace("incrementing by "+z2a80a+", processedResps: "+z19b2c+", expectedResponses: "+ze020e,"OPT");return true;};z01143.z57696=function(z999cf){z19b2c=z999cf;};z01143.zcdc78=function(){return z19b2c;};};this.runMgr=new z008e8();this.reset=function(){try{WT.optimize["ClickMgr"].z80b7a();WT.optimize["ClickMgr"].zc02b2();WT.removeEventHandler(WT.Event.z9c02);WT.removeEventHandler(WT.Event.CONTROL_RESPONSE);WT.removeEventHandler(WT.Event.CONTROL_PART);WT.removeEventHandler(WT.Event.zb899);WT.removeEventHandler(WT.Event.z0aef);WT.removeEventHandler(WT.Event.z5749);WT.removeEventHandler(WT.Event.z257b);WT.removeEventHandler(WT.Event.z85a2);WT.removeEventHandler(WT.Event.z6938);WT.removeEventHandler(WT.Event.zb2de);WT.removeEventHandler(WT.Event.PRECONVERSIONEVENT);WT.removeEventHandler(WT.Event.CONVERSIONEVENT);WT.removeEventHandler(WT.Event.DONE);WT.optimize.zfff3=false;WT.optimize.ze3c2=false;WT.optimize.z2b20=[];WT.optimize.zf310=[];WT.optimize.z907d=null;WT.optimize.z93cb=null;WT.optimize.z4e9a=null;WT.optimize.g_done=false;WT.optimize.Preview={};WT.optimize.z95e8();var z468be=new WT.optimize.zd67f(WT.optimize);WT.common.extendObject(WT.optimize.Library).forEach(function(z3ec0,attrName,z0fee){if(!z468be[attrName]){z468be[attrName]=z0fee[attrName];}});WT.optimize.Library=z468be;WT.optimize.runMgr=new z008e8();WT.optimize.runMgr.z13c21(0);WT.setExecuteState(zc208,"complete");}catch(z392c){WT.Debug.error("Fatal Error during reset: ",104,z392c);var event=new WT.Event((z392c.zbee9?z392c.zbee9:WT.Event.ABORT),WT.Event.STATUS_FAULT,this);event.params["error"]=z392c;WT.fireEvent(event);}};this.execute=function(z13896){WT.optimize.reset();if(WT.hasVal(z13896)){var zd2e3d=WT.common.z6f6de(z2fa2,z13896);WT.optimize.setup(zd2e3d);}else{WT.optimize.setup(z2fa2);}};this.click=function(za69d){var z8508={};if(WT.hasVal(za69d)){z8508=WT.paramsMerge(JSON.parse(JSON.stringify(z2fa2)),za69d);z8508=za69d["config"]?WT.paramsMerge(z8508,za69d["config"]):z8508;}else{z8508=WT.paramsMerge(JSON.parse(JSON.stringify(z2fa2)));}if(!z8508["testAlias"]&&!(z8508["config"]&&z8508["config"]["testAlias"])){return;}z8508["s_isInternalCV"]=false;WT.optimize.conversion(z8508);};this.getParams=function(){var zbe129={};var z5866e=WT.common.extendObject(z1a23.z23eb);z5866e.forEach(function(z3ec0,attrName){zbe129[attrName]=z3ec0;});zbe129.version={major:+zbe129['s_capiMajorVersion'],minor:+zbe129['s_capiMinorVersion'],inc:+zbe129['s_capiIncVersion']};zbe129.versionStr=[zbe129.version.major,zbe129.version.minor,zbe129.version.inc].join('.');return zbe129;};WT.Event.CAPI_CONFIG="capi_config";WT.Event.z0cf5="capi_config_processed";WT.Event.z4519="timer";WT.Event.INITIALIZE="initialize";WT.Event.PREPARE="prepare";WT.Event.CONFIGURE="configure";WT.Event.PREPROCESS="preprocess";WT.Event.PROCESS="process";WT.Event.z6bd0="optimize_library_load";WT.Event.INVALID="invalid";WT.Event.ABORT="abort";WT.Event.PRERENDER="prerender";WT.Event.RENDER="render";WT.Event.DONE="done";WT.Event.PAGEVIEW="pageview";WT.Event.CONVERSION="conversion";WT.Event.STATUS_SUCCESS="success";WT.Event.STATUS_FAULT="fault";WT.Event.STATUS_UNKNOWN="unknown";this.z95e8();};if(typeof(WT.optimize)==="undefined"){WT.optimize=new z1539();}if(typeof(WT.optimizeUtil)==="undefined"){WT.optimizeUtil={};}WT.optimizeUtil.PayloadBuilder=function(){var zf64e={};zf64e[this["MODE"]]="1";this.zb096f=this["setGuid"]=function(zf331){zf64e[this["GUID"]]=zf331;return this;};this.z3965a=this["setProjectTypeId"]=function(z27cd4){zf64e[this["PROJECT_TYPE_ID"]]=z27cd4;return this;};this.z3d54a=this["setProjectId"]=function(z9a464){zf64e[this["PROJECT_ID"]]=z9a464;return this;};this.zd871a=this["setTestId"]=function(zbaed2){zf64e[this["TEST_ID"]]=zbaed2;return this;};this.zb63c5=this["setMode"]=function(mode){zf64e[this["MODE"]]=mode;return this;};this.z6cdf8=this["setAccountId"]=function(z30ffa){zf64e[this["ACCOUNT_ID"]]=z30ffa;return this;};this.z9d870=this["setExperimentId"]=function(exp){if(!WT.hasVal(exp)||exp==="NOTRACKID"){return this;}zf64e[this["EXPERIMENT_ID"]]=exp;return this;};this.set=this["set"]=function(z8836,z2455){zf64e[z8836]=z2455;return this;};this.z35926=this["build"]=function(){WT.common.extendArray(this.zd2e53).forEach(function(ze8862){if(!WT.hasVal(zf64e[ze8862])){throw new Error("Required Param: "+ze8862+" not in "+WT.common.JSONPrettify(zf64e));}});return zf64e;};this.z35cbc=this["copyFrom"]=function(zf64e){this.zb096f(zf64e["opt.guid"]).z3965a(zf64e["opt.project_type_id"]).z3d54a(zf64e["opt.project_id"]).zd871a(zf64e["opt.test_id"]).zb63c5(zf64e["opt.mode"]).z9d870(zf64e["opt.experiment_id"]).z6cdf8(zf64e["opt.account_id"]);return this;};};WT.optimizeUtil.PayloadBuilder.prototype={"ACCOUNT_ID":"opt.account_id","GUID":"opt.guid","PROJECT_TYPE_ID":"opt.project_type_id","PROJECT_ID":"opt.project_id","TEST_ID":"opt.test_id","MODE":"opt.mode","EXPERIMENT_ID":"opt.experiment_id",zd2e53:["opt.guid","opt.project_type_id","opt.project_id","opt.test_id","opt.mode"]};WT.optimize.zd67f=function(z1a23){var z32da=this;var z0eb2=false;var z67fd=[];var z706a=[];var z1aff=null;var zfe37=0;var z3065=0;var z106e1="OPT";var zf8af=WT.optimizeModule?WT.optimizeModule:null;var zc208='optimize';if(typeof WT.optimizeModule!=='undefined'&&typeof WT.optimizeModule.ProductName!=='undefined'){zc208=WT.optimizeModule.ProductName;}var z2fa2={};if(typeof WT.optimizeModule!=='undefined'&&typeof WT.optimizeModule.prototype.wtConfigObj!=='undefined'){z2fa2=WT.optimizeModule.prototype.wtConfigObj;}WT.Event.CONTROL_RESPONSE="control_response";WT.Event.CONTROL_PART="control_part";WT.Event.zb899="control_abort";WT.Event.z0aef="control_invalid";WT.Event.z5749="control_preprocess";WT.Event.z257b="control_process";WT.Event.z85a2="control_pageview";WT.Event.z6938="control_conversion";WT.Event.zb2de="control_conversionevent";WT.Event.PRECONVERSIONEVENT="preconversionevent";WT.Event.zcc70="prerender_conversionevent";WT.Event.CONVERSIONEVENT="conversionevent";WT.Event.z9c02="failed";WT.Event.EXECUTE="execute";WT.Event.POSTEXECUTE="postexecute";WT.Event.z13ecb="control_response_metadata";this.z95e8=function(){WT.addEventHandler(WT.Event.z9c02,zcbc2,zcbc2);WT.addEventHandler(WT.Event.DONE,za01b,za01b);WT.addEventHandler(WT.Event.OPT_COMPLETE,this.z80dbf,this.z80dbf);WT.addEventHandler(WT.Event.zb899,this.z1028,this.z1028);WT.addEventHandler(WT.Event.z0aef,this.ze5d9,this.z1028);WT.addEventHandler(WT.Event.z85a2,this.z4708,this.z3c7c);WT.addEventHandler(WT.Event.z6938,this.z5b2c,this.z3c7c);WT.addEventHandler(WT.Event.z5749,this.zede2);WT.addEventHandler(WT.Event.z257b,this.z348e);WT.addEventHandler(WT.Event.zb2de,this.zd78e);WT.addEventHandler(WT.Event.DEBUGGER_CLEAR_COOKIES,this._clearOptimizeCookies);WT.addEventHandler(WT.Event.DEBUGGER_CHECK_MODE,this.zc1b5);WT.addEventHandler(WT.Event.z13ecb,this.z7e5af);var zddda2=function(event){WT.optimize.reset(event.params);};var z831c9=function(event){WT.optimize.execute(event.params);};WT.addEventHandler(WT.Event.LOADER_RESET,zddda2);WT.addEventHandler(WT.Event.LOADER_EXECUTE,z831c9);WT.Debug.info("Optimize library initialized");};this.z80dbf=function(){var z5866e=WT.common.extendObject;var z22f8=WT.common.TrackingPipeline;var zcdc4=z1a23.runMgr.getAllRunData();var z9e31b=function(z740b){if(z740b&&z740b.params&&z740b.params["mutation"]&&z740b.params["mutation"]["pageview"]===true){var zacafe="annotating "+z740b.params["desc"]+" w/ optimize page view";WT.Debug.debug(zacafe,z106e1);WT.Debug.trace("annotating payload w/ "+WT.optimize.z8fc82(zcdc4),z106e1);z5866e(zcdc4).forEach(function(z3ec0,attrName){z740b.setParam(attrName,z3ec0);});}};z22f8.registerMutation("optimizePVMutant",z9e31b,1);z22f8.productIsReady("optimize");};var za01b=function(event){WT.Debug.info("done: WT Optimize is done processing the page. ("+(z1a23.z4e9a-z1a23.z93cb)+" ms)");z1a23.g_done=true;WT.clearTimer("optimize");};var zcbc2=function(event){var zae74=event.target;WT.Debug.error("["+zae74.params["testAlias"]+"] failed to execute on "+zae74.getPageState()+" step.",105);zae74.setPageState(zf9ac.z3064);if(zae74.params["s_requestType"]==="control"){if(zae74.getPageState()===zf9ac.z38a4){z1a23.z2b20.push(zae74);WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT));}else if(zae74.getPageState()===zf9ac.za651||zae74.getPageState()===zf9ac.z971e){z32da.z2d27();}else{z1a23.z2b20.push(zae74);WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT));};}};this.zb41f=function(z5792,zd6f7){return new zf9ac(z5792,zd6f7);};var zf9ac=function(z5792,z6b4f){var z677c=this;var z019b=null;var z7af9d=false;var z5ea06=false;this.params=z5792;this.z6848=null;this.z0386=z6b4f;zf9ac.z38a4="init";zf9ac.z7365="prepare";zf9ac.z94bc="preprocess";zf9ac.z7df9="process";zf9ac.z566c="abort";zf9ac.z57b0="invalid";zf9ac.za651="prerender";zf9ac.z971e="render";zf9ac.z7bd2="done";zf9ac.z3064="fail";zf9ac.z3a29="conversionevent";zf9ac.zb7d1="pageview";zf9ac.zb00a="conversion";zf9ac.z10ca="AB";zf9ac.z7ffc="FULLFACTORIAL";zf9ac.zcf44="MULTIVAR";zf9ac.z6f4e="SPLIT";zf9ac.zbf4a="TARGET";zf9ac.zd4c4="BASELINE";this.z1382={};this.z7715={};this.z95e8=function(){z019b=zf9ac.z38a4;};this.ze63a=function(source){this.z1382=JSON.parse(JSON.stringify(source.z1382));this.z7715=JSON.parse(JSON.stringify(source.z7715));};this.getParams=function(){return this.params;};this.zd12e=function(){return this.z1382;};this.z452a=function(z937d){return this.z7715[z937d];};this.z2de3d=function(){return this.params["testAlias"];};z677c.getPageState=function(){return z019b;};z677c.setPageState=function(z40b87){z019b=z40b87;};z677c.z7af9d=function(){return z7af9d;};z677c.zb87cb=function(){z7af9d=true;};this.setup=function(){if(!(this.params["s_requestType"]==="conversion"&&this.params["beacon"])){WT.addEventHandler(WT.Event.CONTROL_RESPONSE,this.zac2c,this.zdbe8);}this.z696d();this.zf563();};this.track=function(type){this.z696d(type);this.zf563();};this.zf710=function(z9ea9){var zf1e1;var z3111={};if(this.params["lightWeightMode"]===false||this.params["lightWeightMode"]==="false"){return z3111;}if(WT.hasVal(this.params["lwtModeWhiteList"])){zf1e1=this.params["lwtModeWhiteList"];}else{zf1e1=this.z16ad("control","metaFieldKeys",z9ea9);}if(zf1e1===undefined||zf1e1.length===0){return z3111;}var zcac3=zf1e1.split(',');var z8b95="";for(var index in zcac3){if(zcac3.hasOwnProperty(index)){z8b95=zcac3[index].replace(/^\s\s*/,'').replace(/\s\s*$/,'');z3111[z8b95]=true;};}return z3111;};this.z1da9=function(z7e3d){var z8206=this.params["testAlias"].split(',');for(var z88f9 in z8206){if(z8206.hasOwnProperty(z88f9)){z8206[z88f9]=z8206[z88f9].replace(/^\s\s*/,'').replace(/\s\s*$/,'');var zbf57=new RegExp("-"+z8206[z88f9]+"$");if(z7e3d.match(zbf57)){return true;};};}return false;};this.z696d=function(type){this.z1382["keyToken"]=this.params["s_keyToken"];this.z1382["params"]={};if(!type){this.z1382["params"]["requestType"]=this.params["s_requestType"];}else{this.z1382["params"]["requestType"]=type;}var zfb9b={};var z7941=false;if(this.params["lightWeightMode"]===true||this.params["lightWeightMode"]==="true"){if(this.z1382["params"]["requestType"]===zf9ac.zb7d1||this.z1382["params"]["requestType"]===zf9ac.zb00a){zfb9b=this.zf710(this.params["testAlias"]);if(zfb9b===undefined||zfb9b===null||zfb9b.length===0){WT.Debug.debug("Lightweight Mode On but No WhiteList found(assume nothing whitelisted) for alias: "+this.params["testAlias"]+" for "+this.z1382["params"]["requestType"]);zfb9b={};}else{WT.Debug.debug("LightWeight Mode On and WhiteList found for alias: "+this.params["testAlias"]+" for "+this.z1382["params"]["requestType"]);}z7941=true;}this.z1382["params"]["lightWeightMode"]=true;}else{this.z1382["params"]["lightWeightMode"]=false;}var z92d5=["testAlias","controlCookieTimeout","splitMatchRegex","conversionPoint","federatedDomainID","federatedKey","testGroup","cookieConversionCheck","s_modeUD","enableCORS","preRenderConversionEvents"];for(var z5f96=0;z5f96<z92d5.length;z5f96++){if(WT.hasVal(this.params[z92d5[z5f96]])){this.z1382["params"][z92d5[z5f96]]=this.params[z92d5[z5f96]];};}var z1623=["s_mode","debug","cookiePrefix","cookieInspection","use3rdPartyCookies","use1stPartyCookies","beacon","s_setupID","crossAPI"];for(var zbcf7=0;zbcf7<z1623.length;zbcf7++){this.z1382["params"][z1623[zbcf7]]=this.params[z1623[zbcf7]];}this.z1382["body"]={};this.z1382["body"]["data"]={};var zbdc7=this.params["data"];if(zbdc7!==undefined&&z7941===true&&zfb9b!==undefined){for(var el in zbdc7){if(zbdc7.hasOwnProperty(el)&&zfb9b[el]===true){this.z1382["body"]["data"][el]=this.params["data"][el];};};}else if(this.params["data"]!==undefined&&z7941===false){this.z1382["body"]["data"]=this.params["data"];}if(this.params["cache"]!==undefined){this.z1382["body"]["cache"]=this.params["cache"];}if(document.referrer!==""){this.z1382["body"]["data"]["_wm_referer"]=document.referrer;}if(this.params['externalUID']){this.z1382["body"]["data"]['_wm_externalUID']=this.params['externalUID'];}this.z1382["body"]["data"]['_wm_TimeOffset']=z32da.z31a9()*1000*60*60;if(document.title!==""){if(z7941===true&&zfb9b["documentTitle"]||z7941===false){this.z1382["body"]["data"]["documentTitle"]=document.title;};}var z199d=WT.parseQueryString();if(z199d){for(var z2186 in z199d){if(z199d.hasOwnProperty(z2186)&&((z7941===true&&zfb9b[z2186]===true)||z7941===false)){this.z1382["body"]["data"][z2186]=z199d[z2186];};};}var z33e6=document.getElementsByTagName("meta");for(var z205e=0;z205e<z33e6.length;z205e++){if(z33e6[z205e]["name"]!==""){if((z7941===true&&zfb9b[z33e6[z205e]["name"]]===true)||z7941===false){this.z1382["body"]["data"][z33e6[z205e]["name"]]=z33e6[z205e]["content"];};};}if(this.params["s_overrideKeys"]){this.z1382["params"]["s_overrideKeys"]=this.params["s_overrideKeys"];}this.z1382["body"]["cookies"]={};var z0a48=document.cookie.split(";");for(var z5471=0;z5471<z0a48.length;z5471++){var z8403=[];z8403[0]=z0a48[z5471].substring(0,z0a48[z5471].indexOf("="));z8403[1]=z0a48[z5471].substring(z0a48[z5471].indexOf("=")+1);while(z8403[0].charAt(0)===' '){z8403[0]=z8403[0].substring(1,z8403[0].length);}if(z8403[0].indexOf(this.params["cookiePrefix"])===0&&z7941===true&&z8403[0].match(/control/)&&this.z1da9(z8403[0])){var z3497=JSON.parse(z1a23.Library.z7f69(z8403[1],this.params["s_keyToken"]));if(z3497["metaFieldKeys"]){delete z3497["metaFieldKeys"];z8403[1]=z1a23.Library.z71df(JSON.stringify(z3497),this.params["s_keyToken"]);}this.z1382["body"]["cookies"][z8403[0]]=z8403[1];}else if(z8403[0].indexOf(this.params["cookiePrefix"])===0&&(z7941===false||(z7941===true&&!z8403[0].match(/control/)))){this.z1382["body"]["cookies"][z8403[0]]=z8403[1];}else if(this.params["cookieInspection"]===true&&((z7941===true&&zfb9b!==undefined&&zfb9b[z8403[0]]===true)||z7941===false)){this.z1382["body"]["cookies"][z8403[0]]=z8403[1];};}WT.fireEvent(new WT.Event(WT.Event.CONFIGURE,WT.Event.STATUS_SUCCESS,this));};this.zf563=function(z6a1f){var zfcdf=this.params["s_requestType"]==="conversion"&&this.params["beacon"];if(z6a1f){this.z1382["params"]["preprocessed"]=z6a1f;}var z4529=JSON.stringify(this.z1382);if(zfcdf){var zdb52=new Date().getTime()+"-"+Math.floor(Math.random()*1000+1);z4529=z4529+"?_wt.time="+zdb52;}WT.Debug.trace("service: JSON Control Request:\n",z106e1);WT.Debug.trace(WT.optimize.z8fc82(this.z1382),z106e1);z4529=z1a23.Library.z71df(z4529,this.z1382["keyToken"]);var url=this.params["s_otsUrl"]+"/";if(zfcdf){url=this.params["s_otsBeaconUrl"]+"/";}var z8159=url.length+z4529.length;if(((this.params["s_urlParts"]&&z8159>this.params["s_maxUrl"])||z8159>this.params["s_urlLimit"])&&!this.params["enableCORS"]){var z6836=new Date().getTime()+"-"+Math.floor(Math.random()*1000+1);var za643=this.params["s_maxUrl"]-url.length;if((this.params["s_urlParts"]&&this.params["s_maxUrl"]>this.params["s_urlLimit"])||!this.params["s_urlParts"]){za643=this.params["s_urlLimit"]-url.length;}var z4548=Math.ceil(z4529.length/za643);var start=0;var zf12e={};zf12e["seq"]=0;zf12e["s"]=z4529;zf12e["start"]=start;zf12e["limit"]=za643;zf12e["total"]=z4548;WT.optimize.z28c4[z6836]=zf12e;WT.Debug.trace("service() - generating & registering new controlID="+z6836);var z3da6=function(event,zc156){if(typeof event!=="undefined"&&event!==null){if(event.target===null){return;}var z2ca0=z1a23.Library.z7f69(event.target["control"],z677c.z1382["keyToken"]);var zd1ef=JSON.parse(z2ca0);var z695d=zd1ef["controlID"];if(!WT.hasVal(WT.optimize.z28c4[z695d])){WT.Debug.trace("service() - controlID("+z695d+") not in registry, skipping");return;}zc156=z695d;}var z59d6=WT.optimize.z28c4[zc156];var zf5f9=z59d6["s"].substr(z59d6["start"],z59d6["limit"]);z32da._comm(url,zf5f9+"/"+zc156+"/"+z59d6["seq"]+"/"+z4548,"service parts request",false,z32da._execScript);z59d6["start"]+=zf5f9.length;z59d6["seq"]++;WT.optimize.z28c4[zc156]=z59d6;};if(zfcdf){for(var zfe58=0;zfe58<z4548;zfe58++){var zf5f9=z4529.substr(start,za643);z0e1d=new Image();z0e1d.src=url+zf5f9+"/"+z6836+"/"+zfe58+"/"+z4548;start+=zf5f9.length;WT.Debug.trace("control_part: Beacon Part\n"+zf5f9);};}else{WT.removeEventHandler(WT.Event.CONTROL_PART,z3da6);WT.addEventHandler(WT.Event.CONTROL_PART,z3da6);z3da6(null,z6836);}}else{if(zfcdf){z0e1d=new Image();z0e1d.src=url+z4529;WT.Debug.debug("service: Beacon Request\n"+z4529);}else{z32da._comm(url,z4529,"service standard request",this.params["enableCORS"],z32da._execScript);};}};this.zc52f=function(){z677c.setPageState(zf9ac.z94bc);this.z4cc8(zf9ac.z94bc);var z52fa=this.z7715[zf9ac.z94bc]["body"]["codeFragments"];for(var name in z52fa){if(z52fa.hasOwnProperty(name)){try{WT.Debug.trace("preprocess: [name:"+name+", code:"+z52fa[name]+"]");this.params["data"][name]=z32da._execScript(z52fa[name],true);}catch(z392c){WT.Debug.error("problem executing preprocess script [name: "+name+"]:",106,z392c);};};}};this.z596e=function(z67b2){z677c.setPageState(z67b2);this.z4cc8(z67b2);var z945c=this.z7715[z67b2]["body"]["cookies"];if(z945c){for(var z7e3d in z945c){if(z945c.hasOwnProperty(z7e3d)){var z764b=z945c[z7e3d];this.z0f8a(z7e3d,z764b["value"],z764b["timeout"],z764b["type"]);};};}};this.z6b20=function(){var zfce9;if(this.z7715[zf9ac.z3a29]&&this.z7715[zf9ac.z3a29]["body"]['conversionEvents']){zfce9=this.z7715[zf9ac.z3a29]["body"]['conversionEvents'];}else{WT.Debug.debug("getConversionEvents() found no conversionEvents ");return[];}var ze926=this.z7715[zf9ac.z3a29]["params"];for(var zf331 in zfce9){if(zfce9.hasOwnProperty(zf331)){zfce9[zf331]['params']=ze926;};}return zfce9;};this.z500e=function(){z677c.setPageState(zf9ac.z3a29);WT.Debug.debug("preRender ConversionEvent handling");var zfce9=this.z6b20();for(var zf331 in zfce9){if(zfce9.hasOwnProperty(zf331)){var z634a=zfce9[zf331];WT.Debug.trace("preRenderConversionEvent processing eventType:"+z634a['eventType'],z106e1);switch(z634a['eventType']){case 1:this.z6262a(z634a);break;case 0:case 2:case 3:WT.Debug.trace("preRender ConversionEvent: eventType="+z634a['eventType']+" for "+z634a["conversionPointName"]+" ignoring");break;case 5:this.z8c56(z634a,WT.optimize.ClickMgr.zbcfd);break;default:WT.Debug.error("unknown conversion event type: "+z634a['eventType'],107);break;};};}};this.z4f49=function(){if(z5ea06===true){WT.Debug.trace("postRenderCEDone: "+z5ea06+" not attaching postRenderConversionEvents",z106e1);return;}z677c.setPageState(zf9ac.z3a29);WT.Debug.debug("postRender ConversionEvent handling");var zfce9=this.z6b20();for(var zf331 in zfce9){if(zfce9.hasOwnProperty(zf331)){var z634a=zfce9[zf331];WT.Debug.trace("preRenderConversionEvent processing eventType:"+z634a['eventType'],z106e1);switch(z634a['eventType']){case 0:this.z07f3(z634a,WT.optimize.ClickMgr.zbcfd);break;case 1:WT.Debug.debug("postRender ConversionEvent received a pageLoad conversion");break;case 2:this.z0fa8(z634a);break;case 3:this.z25ba(z634a);break;case 5:break;default:WT.Debug.error("unknown conversion event type: "+z634a['eventType'],107);break;};};}z5ea06=true;};this.z07f3=function(z634a,z795b){try{var z4f97=z634a['domElementID'];for(var z7a92 in z4f97){if(z4f97.hasOwnProperty(z7a92)){var el=z677c.z0f52(z7a92);var z9e4a=z4f97[z7a92];z795b(z634a,el,z7a92,z9e4a,true,z677c);WT.optimize.clickTupleStorage.set(z7a92,{"ce":z634a,"el":el,"elId":z7a92,"eventName":z9e4a,"_run":z677c});};}}catch(z8a24){WT.Debug.error("unable to attach onClick conversion event.",109,z8a24);}};this.z6262a=function(z392c){try{var zf64e=z32da.z1467e(z392c["testAlias"]);zf64e=WT.paramsMerge(zf64e,z392c['params']);zf64e['conversionPoint']=z392c['conversionPointName'];if(z392c['federatedKey']){zf64e['federatedKey']=z392c['federatedKey'];zf64e['federatedDomainID']=z392c['federatedDomainID'];}if(z677c.params["lightWeightMode"]){zf64e["lightWeightMode"]=z677c.params["lightWeightMode"];}zf64e["s_isInternalCV"]=true;zf64e["testAlias"]=z392c["testAlias"];zf64e["eventType"]=z392c["eventType"];z32da.z8ed67(z677c.params);z1a23.conversion(zf64e);WT.optimize.runMgr.z2ddf6();WT.optimize.runMgr.z4e801();WT.Debug.trace("conversionEvent: setting PageLoad event for [timer:"+z392c['timeOnPage']+" seconds , name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]");}catch(z8a24){WT.Debug.error("unable to attach PageLoad conversion event for [timer:"+z392c['timeOnPage']+" seconds , name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]",110,z8a24);}};this.z0fa8=function(z392c){try{setTimeout(function(event){var zf64e={};zf64e=WT.paramsMerge(zf64e,z392c['params']);zf64e['conversionPoint']=z392c['conversionPointName'];if(z392c['federatedKey']){zf64e['federatedKey']=z392c['federatedKey'];zf64e['federatedDomainID']=z392c['federatedDomainID'];}if(z677c.params["lightWeightMode"]){zf64e["lightWeightMode"]=z677c.params["lightWeightMode"];}zf64e["s_isInternalCV"]=true;zf64e["testAlias"]=z392c["testAlias"];z1a23.conversion(zf64e);},(z392c['timeOnPage']*1000));WT.Debug.trace("conversionEvent: setting time on page event for [timer:"+z392c['timeOnPage']+" seconds , name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]");}catch(z8a24){WT.Debug.error("unable to attach timeOnPage conversion event for [timer:"+z392c['timeOnPage']+" seconds , name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]",110,z8a24);}};this.z25ba=function(z392c){try{var z4f97=z392c['domElementID'];if(z4f97===''||z4f97===null||z4f97===undefined){z32da._execScript(z392c['script']);}else{var z0184=z32da._execScript('var _tempfnvalue = function (event) {'+z392c['script']+'};');if(z0184===null||z0184===undefined){z0184=_tempfnvalue;}for(var z6747 in z4f97){if(z4f97.hasOwnProperty(z6747)){var el=this.z0f52(z6747);var zfce9=z4f97[z6747].split(",");for(var zd6a9=0;zd6a9<zfce9.length;zd6a9++){var z2431=zfce9[zd6a9];try{WT.addDOMEvent(el,z2431,z0184);WT.Debug.trace("conversionEvent: setting custom conversion event for [id: "+z6747+" , event: "+z2431+", name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]");}catch(z7830){WT.Debug.error("unable to attach custom conversion event for [id: "+z6747+", event: "+z2431+", name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]",111,z7830);};};};};}}catch(z8a24){WT.Debug.error("unable to attach custom conversion event(s).",112,z8a24);}};this.z8c56=function(z634a,z795b){var z51ba=function(el){var tagName=z9de9["tagName"]?z9de9["tagName"]+" ":"";var id=z9de9["id"]?z9de9["id"]+" ":"";var className=z9de9["className"]?z9de9["className"]:"";return tagName+id+className;};try{for(var selector in z634a["domElementID"]){if(z634a["domElementID"].hasOwnProperty(selector)){var z9e4a=z634a["domElementID"][selector];var z05be=WT.getSelector()(selector);if(!z05be||z05be.length===0){WT.Debug.debug("ActionClick selector("+selector+") result is empty");return-1;}var z2186=z634a["testAlias"]+"_"+z634a["conversionPointName"]+"_"+selector;var z17a8=WT.optimize["ClickMgr"]["CEDomElCache"].getAdditions(z2186,z05be);var z0094=WT.optimize["ClickMgr"]["CEDomElCache"].getRemovals(z2186,z05be);var z9de9=null;var z7a92=null;for(var z205e=0;z205e<z17a8.length;z205e++){z9de9=z17a8[z205e];z7a92=z51ba(z9de9);z795b(z634a,z9de9,z7a92,z9e4a,true,z677c);WT.Debug.debug("conversionEvent:  Attached "+z9e4a+" on selector("+selector+") for elm: "+z7a92);}for(z205e=0;z205e<z0094.length;z205e++){z9de9=z0094[z205e];z7a92=z51ba(z9de9);z795b(z634a,z9de9,z7a92,z9e4a,false,z677c);WT.Debug.debug("conversionEvent:  Removed "+z9e4a+" on selector("+selector+") for elm: "+z7a92);}for(z205e=0;z205e<z05be.length;z205e++){z9de9=z05be[z205e];z7a92=z51ba(z9de9);WT.optimize.clickTupleStorage.set(z7a92,{"ce":z634a,"el":z9de9,"elId":z7a92,"eventName":z9e4a,"_run":z677c});}WT.optimize["ClickMgr"]["CEDomElCache"].zbb56(z2186,z05be);};}return 0;}catch(z2a4e){WT.Debug.error("unable to attach ActionClick conversion event: ",113,z2a4e);return-1;}};this.zca4b=function(z677c,name,value,z65d6,type){var z297e=null;if(type!=="session"){z297e=new Date();z297e.setTime(z297e.getTime()+z65d6);}var z4384="";var zb13a=z677c.params['cookieDomain'];if(typeof zb13a!=="undefined"&&zb13a!==null&&zb13a!==""){z4384=" domain="+zb13a+";";}var z71fe="";if(z677c.params['cookiePath']!==null&&z677c.params['cookiePath']!==""){z71fe=" path="+z677c.params['cookiePath']+";";}var z753f=name+"="+escape(value)+";"+z4384+z71fe+(z297e!==null?" expires="+z297e.toGMTString()+";":"");WT.Debug.trace("DEBUGGER: setting cookie data: ["+z753f+"]");document.cookie=z753f;};this.z0f8a=function(name,value,z65d6,type){var z297e=null;if(type!=="session"){z297e=new Date();z297e.setTime(z297e.getTime()+z65d6);}var z4384="";var zb13a=z677c.params['cookieDomain'];if(WT.hasVal(zb13a)&&zb13a!==""){z4384=" domain="+zb13a+";";}var z71fe="";if(z677c.params['cookiePath']!==null&&z677c.params['cookiePath']!==""){z71fe=" path="+z677c.params['cookiePath']+";";}WT.common.z0ba5d(name,value,";"+z4384+z71fe+(z297e!==null?" expires="+z297e.toGMTString()+";":""));WT.common.mobile.nativeAppCkSend({name:name,value:value,domain:zb13a,z297e:z297e,path:z677c.params['cookiePath'],timeout:z65d6,type:type});};this.z27c8=WT.common.zf1dc3;this.z0932=function(){var z4cf9=this.z7715[zf9ac.z7df9]["body"]["factors"];if(typeof(z4cf9)==='string'){try{z4cf9=JSON.parse(z4cf9);}catch(z392c){var z740b="_prerenderFactors - Unable to parse factors '"+z4cf9+"'";z1a23.Debug.error(z740b,114,z392c);throw z740b;};}var z0fee=null;for(var zc92c=0;zc92c<z4cf9.length;zc92c++){var zd081=z4cf9[zc92c];var z8186=zd081["operation"];try{if(z8186===0){z0fee=this.z0f52(zd081["name"]);if(!z0fee){if(!z677c.params["ignoreMissingFactors"]){WT.Debug.error("library/process: unable to load element for id ["+zd081["name"]+"] in page DOM.",114);throw "DOM element was null.";}else{WT.Debug.debug("library/process: unable to load element for id ["+zd081["name"]+"] in page DOM. Ignoring missing factors.");continue;};};}}catch(z392c){if(z677c.params["ignoreMissingFactors"]){WT.Debug.debug("library/process: unable to locate id ["+zd081["name"]+"] in page DOM, if using nested factors "+"make sure the id has been added to the page in the outer content. Ignoring missing factors.");continue;}WT.Debug.error("library/process: unable to locate id ["+zd081["name"]+"] in page DOM, if using nested factors "+"make sure the id has been added to the page in the outer content.",116,z392c);throw "Invalid factor alias.";}try{if(z8186===4){WT.Debug.error("library/process: redirect content operation type is not supported in CAPI. Element id ["+zd081["name"]+"].",117);throw "Redirect content operation type is not supported.";}}catch(z392c){z32da.z2d27();WT.fireEvent(new WT.Event(WT.Event.RENDER,WT.Event.STATUS_FAULT,zae74));throw "Redirect content operation type is not supported.";}try{if(z8186===0){z0fee.innerHTML=zd081["value"];var x=z0fee.getElementsByTagName("script");for(var z205e=0;z205e<x.length;z205e++){if(typeof x[z205e].src!=="undefined"&&x[z205e].src!==null&&x[z205e].src!==""){z32da._createScriptEl(x[z205e].src,"regular opType");z0fee.removeChild(x[z205e]);}else{z32da._execScript(x[z205e].text);};};}else if(z8186===2||z8186===3){z32da._execScript(zd081["value"]);}if(z8186===5){try{if(WT.hasVal(zd081["value"])&&zd081["value"].length!==0){var zd490=JSON.parse(zd081["value"]);var za17e=1;for(var index in zd490){if(zd490.hasOwnProperty(index)){za17e=z1a23.Library._selectAndUpdate(zd490[index]["selector"],zd490[index]["op"],zd490[index]["payload"]);if(za17e<=0){throw("_selectAndUpdate:  problem processing tuple");};};};}else{throw("library/process:  unable to parse action tuples for +"+zd081['name']);}}catch(zc008){throw("library/process: unable to process actionTuples for "+zd081['name'],0,zc008);};}WT.Debug.info("library/process: updating factor ["+zd081['name']+", opCode: "+z8186+"] with level content.");}catch(z676d){if(z8186===5){WT.Debug.error("library/process: unable to update Action factor.",118,z676d);}else{WT.Debug.error("library/process: unable to update factor ["+zd081['name']+"].",119,z676d);}throw "Error during update of the factors level content.";};}};this.z0f52=function(id){if(z677c.params["selectorEnabled"]){try{var selector=z677c.params["selectorFunction"];if(!WT.hasVal(selector)||selector===""){return z1a23.Library.z454c.z0c82(id);}var z4d76=eval(selector);return z4d76(id);}catch(z392c){WT.Debug.error("custom selector failed, defaulting to standard dynamic selector",120,z392c);return z1a23.Library.z454c.z0c82(id);};}else{return z1a23.Library.z454c.z0c82(id);}};this.z6d0e=function(){z677c.z4cc8();if(z677c.params["r_redirectLink"]&&!z677c.params["r_safeTrack"]){WT.redirectElement(z677c.params["r_redirectLink"],"error_track: redirecting to last known url ["+z677c.params["r_redirectLink"]+"]");}};this.z8fe4=function(){z677c.setPageState(zf9ac.za651);var z0dbd=this.z7715[zf9ac.z7df9];if(z0dbd!==null&&typeof z0dbd!=="undefined"){var zbd8c=z0dbd["body"]["preScript"];if(zbd8c!==null&&typeof zbd8c!=="undefined"){try{z32da._execScript(zbd8c);WT.Debug.debug("prerender: prescript executed: "+zbd8c);}catch(z392c){WT.Debug.error("prerender script failed to execute correctly",121,z392c);};};}switch(this.params["r_type"]){case zf9ac.zbf4a:case zf9ac.z10ca:case zf9ac.z7ffc:case zf9ac.zcf44:this.z0932();break;case zf9ac.z6f4e:case zf9ac.zd4c4:break;default:throw "prerender: Unknown test type, please verify the run type is supported with this version of the CAPI file.";};};this.z8300=function(za1b5){var z987b=(z677c.getPageState()===zf9ac.z57b0);z677c.setPageState(zf9ac.z971e);var z9180=this.params["r_cWrapEl"];var z0386=this.z0386;if((this.params["r_type"]===zf9ac.z6f4e&&!this.params["r_redirectUrl"])||this.params["r_type"]!==zf9ac.z6f4e){if(z9180!==null){if(!WT.hasVal(this.params["defaultUrl"])||za1b5){WT.Debug.debug("ready to render: test alias ["+this.params["testAlias"]+"]");}else if(WT.hasVal(this.params["defaultUrl"])){WT.Debug.debug("render: test alias ["+this.params["testAlias"]+"] has default url ["+this.params["defaultUrl"]+"]");};}else{throw "Unable to locate contentWrapper, skipping render";};}else{WT.Debug.debug("render: test alias ["+this.params["testAlias"]+"] has redirect url.");}if(!z1a23.ze3c2){var z0dbd=this.z7715[zf9ac.z7df9];if(z0dbd!==null&&typeof z0dbd!=="undefined"&&!z987b){var zdfc2=z0dbd["body"]["postScript"];if(zdfc2!==null&&typeof zdfc2!=="undefined"){try{z32da._execScript(zdfc2);WT.Debug.debug("render: postrenderScript executed: "+zdfc2);}catch(z392c){WT.Debug.error("render - postrenderScript failed to execute",122,z392c);};};}try{WT.optimize.runMgr.zc4821();WT.fireEvent(new WT.Event(WT.Event.CONVERSIONEVENT,WT.Event.STATUS_SUCCESS,z677c));}catch(z392c){WT.Debug.error("Failed to attach conversion events",130,z392c);WT.fireEvent(new WT.Event(WT.Event.CONVERSIONEVENT,WT.Event.STATUS_FAULT,z677c));};}};this.z4cc8=function(z937d){if(this.z7715[z937d]!==null&&typeof this.z7715[z937d]!=="undefined"){var z6ac8=this.z7715[z937d]["params"];for(var zf64e in z6ac8){if(z6ac8.hasOwnProperty(zf64e)){this.params[zf64e]=this.z7715[z937d]["params"][zf64e];};};}};this.z16ad=function(z8365,z980e,z9ea9){var z1e14=z32da.zdf8b5(z8365,z9ea9);if(z1e14===undefined){return undefined;}return z1e14[z980e];};this.za7ed=function(){var zffce=this.z7715[zf9ac.zb7d1]["body"]["cookies"];if(zffce){for(var z7e3d in zffce){if(zffce.hasOwnProperty(z7e3d)){var z764b=this.z7715[zf9ac.zb7d1]["body"]["cookies"][z7e3d];this.z0f8a(z7e3d,z764b["value"],z764b["timeout"],z764b["type"]);};};}if(this.params["r_redirectUrl"]){WT.Debug.info("pageview: redirecting to url ["+this.params["r_redirectUrl"]+"]");var z12c5=this.params["r_redirectUrl"];setTimeout(function(){window.location.href=z12c5;},0);}};this.conversion=function(){var z1dcd=this.z7715[zf9ac.zb00a]["body"]["cookies"];if(z1dcd){for(var z7e3d in z1dcd){if(z1dcd.hasOwnProperty(z7e3d)){var z764b=this.z7715[zf9ac.zb00a]["body"]["cookies"][z7e3d];this.z0f8a(z7e3d,z764b["value"],z764b["timeout"],z764b["type"]);};};}if(this.params["r_redirectLink"]){WT.redirectElement(z677c.params["r_redirectLink"],"conversion redirect");}};this.zac2c=function(event){try{if(WT.getExecuteState("optimize")===WT.Event.LOADER_MODULE_ABORT){WT.Debug.error("_control_response:  not processing event because execute state is '"+WT.getExecuteState("optimize")+"'",123);return;}if(event["params"]["eventID"]in z67fd){return;}var zac9c=false;var z48c3=true;var z0fee=event["target"];var z9502=z1a23.runMgr.lookup(z0fee["alias"]);if(!z9502){if(z1aff!==null){z9502=z1aff;}else{zac9c=true;z9502=new zf9ac(z677c.params,z1a23);};}else{z48c3=false;}var zb7f7=z9502.params["s_keyToken"];var z4529=z1a23.Library.z7f69(z0fee["control"],zb7f7);var z0dbd=JSON.parse(z4529);if(zac9c&&z0dbd["opcode"]!==zf9ac.zb00a){throw "invalid run for control response alias";}if(z0dbd["params"]["s_setupID"]&&z677c.params["s_setupID"]&&z0dbd["params"]["s_setupID"]!==z677c.params["s_setupID"]){return;}z67fd.push(event["params"]["eventID"]);WT.Debug.trace("control_response: JSON Control Response:\n",z106e1);WT.Debug.trace(WT.optimize.z8fc82(z0dbd),z106e1);if(z48c3&&zfe37===0&&z0dbd["totaltests"]){zfe37=z0dbd["totaltests"];}if(z0dbd["totaltests"]){z9502.params["totaltests"]=z0dbd["totaltests"];}if(z48c3&&z1aff!==null&&z9502.params["s_requestType"]==="control"&&(z0dbd["opcode"]===zf9ac.z7df9||z0dbd["opcode"]===zf9ac.z57b0)||z0dbd["opcode"]===zf9ac.z3a29){z9502=new zf9ac({},z1a23);z9502.params=WT.paramsMerge(z9502.params,z1aff.params,z1aff["intOverrideMap"]);z9502.ze63a(z1aff);z9502.params["testAlias"]=z0fee["alias"];if(z1aff["intOverrideMap"]){z9502["intOverrideMap"]=z1aff["intOverrideMap"];}z1a23.z2b20.push(z9502);}if((z9502.params["crossAPI"]===true||z9502.params["crossAPI"]==="true")&&z0dbd["opcode"]===zf9ac.z3a29){var z0bb7=z1a23.runMgr.lookup(z0fee["alias"]);if(typeof(z0bb7)==="undefined"||z883b===null){var z5313=new zf9ac({},z1a23);z5313.params=WT.paramsMerge(z5313.params,z0dbd["params"]);z5313.ze63a(z1aff);z5313.params["testAlias"]=z0fee["alias"];z5313.params["data"]=z677c.params["data"];z1a23.z2b20.push(z5313);};}z9502.z7715[z0dbd["opcode"]]=z0dbd;var log=z0dbd["body"]["log"];if(log){WT.Debug.debug("control_response: JSON Control Response Log:\n"+log);}var zf64e={};zf64e["opcode"]=z0dbd["opcode"];zf64e["errorcode"]=z0dbd["errorcode"];var zbd8b=z0fee["alias"]+z0dbd["opcode"]+z0dbd["opstatus"];var z4eb9=false;for(var z205e in z706a){if(z706a.hasOwnProperty(z205e)&&zbd8b===z706a[z205e]){z4eb9=true;break;};}if(!z4eb9){if(z0dbd["opcode"]===zf9ac.z7df9){z706a.push(zbd8b);}WT.fireEvent(new WT.Event("control_"+z0dbd["opcode"],z0dbd["opstatus"],z9502,zf64e));}}catch(z392c){WT.Debug.error("control_response: Unable to evaluate control response.",124,z392c);WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT));}};this.zdbe8=function(event){try{if(event["params"]["eventID"]in z67fd){return;}var z48c3=true;var z0fee=event["target"];var z9502=z1a23.runMgr.lookup(z0fee["alias"]);if(!z9502){if(z1aff!==null){z9502=z1aff;}else{throw "invalid run for control response alias";};}else{z48c3=false;}var zb7f7=z9502.params["s_keyToken"];var z4529=z1a23.Library.z7f69(z0fee["control"],zb7f7);var z0dbd=JSON.parse(z4529);if(z0dbd["params"]["s_setupID"]&&z677c.params["s_setupID"]&&z0dbd["params"]["s_setupID"]!==z677c.params["s_setupID"]){return;}z67fd.push(event["params"]["eventID"]);WT.Debug.trace("control_fault: JSON Fault Control Response\n"+z4529);z9502.z7715[z0dbd["opcode"]]=z0dbd;if(z48c3&&z1aff!==null&&z9502.params["s_requestType"]==="control"&&(z0dbd["opcode"]===zf9ac.z566c||z0dbd["opcode"]===zf9ac.z57b0)){z1a23.z2b20.push(z1aff);}var z392c={};z392c["message"]=z0dbd["body"]["message"];z392c["stack"]=z0dbd["body"]["exception"];var log=z0dbd["body"]["log"];if(log){WT.Debug.debug("control_fault: JSON Control Response Log:\n"+log);}WT.Debug.error("control_fault: JSON Control Response Error",125,z392c);WT.Debug.debug("control_fault: "+z392c["stack"]);var zf64e={};zf64e["opcode"]=z0dbd["opcode"];zf64e["errorcode"]=z0dbd["errorcode"];var zbd8b=z0fee["alias"]+z0dbd["opcode"]+z0dbd["opstatus"];var z4eb9=false;for(var z205e in z706a){if(z706a.hasOwnProperty(z205e)&&zbd8b===z706a[z205e]){z4eb9=true;break;};}if(!z4eb9){if(z0dbd["opcode"]===zf9ac.z7df9){z706a.push(zbd8b);}WT.fireEvent(new WT.Event("control_"+z0dbd["opcode"],WT.Event.STATUS_FAULT,z9502,zf64e));}}catch(z676d){WT.Debug.error("_control_fault - Unable to evaluate control response.",126,z676d);WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT));}};this.z95e8();};this.z311d=function(z8262,params){function zb463(z0735,z0a96,z7922){if(typeof params[z0735]==="undefined"){if(WT.hasVal(z7922)&&z7922[z0735]!==undefined){params[z0735]=z7922[z0735];}else{params[z0735]=z0a96;};}};function z27eb(zd6bd){var zc40d={};for(var zac90 in zd6bd){if(typeof zd6bd[zac90]!=="undefined"&&zd6bd[zac90]!==null&&zd6bd.hasOwnProperty(zac90)){if(zac90!=="s_requestType"){zc40d[zac90]=zd6bd[zac90];};};}return zc40d;};function zff13(map){var za17e=[];for(var z61f3 in map){if(map.hasOwnProperty(z61f3)){za17e.push(z61f3);};}return za17e;};var z2edc="undefined";if(params["s_requestType"]==="conversion"){if(params["s_isInternalCV"]===true){z2edc="internal";}else{z2edc="external";};}var z6184;if(z2edc!=="external"){z6184=z1a23.runMgr.lookup(z8262);}var z7922;if(typeof(z6184)!=="undefined"&&z6184!==null){z7922=z6184.params;}var z4317;var za567;if(WT.hasVal(z6184)&&typeof(z6184.z4317)!=="undefined"){z4317=z6184.z4317;}else{z4317=z27eb(params);}if(z2edc==="external"){za567=z27eb(params);}zb463("s_wasServerProto","https");zb463("s_wasServer","was.optimize.webtrends.com");zb463("s_wasPreviewDir","/server/ui/scripts/preview/");zb463("s_wasPreviewJS","previewerLoader.js");zb463("s_mode","normal");zb463("s_otsUrl",params["s_pageProtocol"]+"://"+params["s_otsServer"]+params["s_otsWebApp"]+params["s_otsWebAppServlet"]+"/js-"+params["s_capiMajorVersion"]+"."+params["s_capiMinorVersion"]+"/"+params["s_domainKey"]);zb463("s_otsBeaconUrl",params["s_pageProtocol"]+"://"+params["s_otsServer"]+params["s_otsWebApp"]+params["s_otsWebAppServlet"]+"/beacon-"+params["s_capiMajorVersion"]+"."+params["s_capiMinorVersion"]+"/"+params["s_domainKey"]);zb463("s_wasPreviewPath",params["s_wasServerProto"]+"://"+params["s_wasServer"]+params["s_wasPreviewDir"]);zb463("s_wasPreviewUrl",params["s_wasPreviewPath"]+params["s_wasPreviewJS"]);zb463("s_urlLimit","3450");zb463("s_maxUrl","2040");zb463("s_urlParts",(/MSIE (\d+\.\d+);/.test(navigator.userAgent)));if(typeof z8262!=="undefined"){zb463("testAlias",z8262);}zb463("suppressSetup","false",z7922);zb463("cookiePath","/",z7922);zb463("cookieInspection",true,z7922);zb463("cookieConversionCheck",true,z7922);zb463("use3rdPartyCookies",false,z7922);zb463("use1stPartyCookies",true,z7922);zb463("testGroup","default",z7922);zb463("beacon",false,z7922);zb463("data",{},z7922);zb463("cookiePrefix","_wt",z7922);zb463("debug","");zb463("defaultUrl",null,z7922);zb463("ignoreMissingFactors",false,z7922);zb463("lightWeightMode",false,z7922);zb463("crossAPI",false,z7922);zb463("enableCORS",false,z7922);zb463("preRenderConversionEvents",true,z7922);if(params['s_keyToken']===null){WT.Debug.error("'s_keyToken' was not provided.  Optimize is disabled without authentication.",127);WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT,params));return undefined;}var debugLevel="";for(var z205e=0;z205e<WT.Debug.getDebugLevel();z205e++){debugLevel+="v";}params["debug"]=debugLevel;var z99bf=WT.parseQueryString();if(z99bf!==null){var z3ec0=z99bf["_wt.mode"];if((typeof z3ec0!=="undefined")&&z3ec0!==null){params["s_mode"]=z3ec0;if(z3ec0==="normal"||z3ec0==="staging"){params["s_modeUD"]=z3ec0;};}if(z99bf["_wt.enableCORS"]&&z99bf["_wt.enableCORS"]==="true"){params["enableCORS"]=true;}if(WT.hasVal(z99bf["_wt.otsServer"])){params["s_otsServer"]=z99bf["_wt.otsServer"];params["s_otsUrl"]=params["s_pageProtocol"]+"://"+params["s_otsServer"]+params["s_otsWebApp"]+params["s_otsWebAppServlet"]+"/js-"+params["s_capiMajorVersion"]+"."+params["s_capiMinorVersion"]+"/"+params["s_domainKey"];}if(WT.hasVal(z99bf["_wt.suppressSetup"])&&z99bf("_wt.suppressSetup")==="true"){params["suppressSetup"]=true;};}if(params["suppressSetup"]==="true"||params["suppressSetup"]===true){WT.Debug.info("suppressSetup==="+params["suppressSetup"]+" so aborting");WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_SUCCESS,params));return undefined;}if(params["s_mode"]==="preview"||window.name==="WTbrowserIFrame"){WT.optimize.Preview["g_PreviewOptions"]=params;z32da._createScriptEl(params["s_wasPreviewUrl"],"preview");WT.Debug.info("initialize: using preview mode, aborting testing process.");WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_SUCCESS,params));return undefined;}z32da.z60c27(params["cookiePrefix"],params["s_keyToken"],params["s_domainKey"]);z32da.z8ed67(params);z32da.z9318a(params["s_domainKey"]);z32da.z0271a(params["s_domainKey"]);if(!z6184){z6184=new zf9ac(params,z1a23);if(z2edc==="external"){z6184["extOverrideMap"]=za567;z6184.params["s_overrideKeys"]=zff13(za567);}else{z6184["intOverrideMap"]=z4317;z6184.params["s_overrideKeys"]=zff13(z4317);}if(params["s_requestType"]==="control"){if(typeof z8262!=="undefined"&&z8262!==null){z1a23.z2b20.push(z6184);z3065++;}else{z1aff=z6184;}z6184.params["s_setupID"]=new Date().getTime()+Math.floor(Math.random()*1000+1);}else{if(z2edc==="external"){z6184.params=z1a23.paramsMerge(z6184.params,params,za567);}else{z6184.params=z1a23.paramsMerge(z6184.params,params,z4317);};};}else{if(z2edc==="external"){z6184["extOverrideMap"]=za567;z6184.params["s_overrideKeys"]=zff13(za567);z6184.params=z1a23.paramsMerge(z6184.params,params,za567);}else{z6184.params["s_overrideKeys"]=zff13(z4317);z6184.params=z1a23.paramsMerge(z6184.params,params,z4317);};}var z9804=/adobeair\//i;if(params["s_mode"]==="none"||z9804.test(navigator.userAgent)){WT.Debug.info("initialize: using mode none/air, aborting testing process.");WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_SUCCESS,z6184));return undefined;}var z8547b=function(){z6184.setup();};WT.common.mobile.delay(z8547b,"OPT",WT.optimizeModule.prototype.wtConfigObj);};this.z8ed67=function(params){var z22f8=WT.common.TrackingPipeline;var z8738b=params["defaultCollectionServer"];var z2591e=params["accountGuid"];var protocol=params["s_pageProtocol"];var timeout=params["s_pageTimeout"];var z3239c=function(z740b){try{if(z740b&&z740b["endpoints"]&&z740b["endpoints"].length===0&&z8738b&&z2591e&&protocol){var endpoint=protocol+"://"+z8738b+"/v2/"+z2591e;var z57e65=protocol+"://"+z8738b+"/v1/"+z2591e+"/events.svc";WT.Debug.debug("adding default CommonCollectionService "+endpoint+" with fallback "+z57e65,z106e1);z740b["endpoints"].push({endpoint:endpoint,timeout:timeout,protocolType:WT.common.protocols.collectionV2Post.name,z57e65:z57e65});}}catch(z392c){WT.Debug.error("OPT Error: Common Collection Mutation failed",149,z392c["message"]);}};z22f8.registerMutation("optimizeCollectionServerMutation",z3239c,2);};this.z35bf1=function(z740b){return z740b&&z740b["payload"];};this.zdd548=function(z740b){var za17e={};if(z740b["userDefinedParams"]){za17e=z740b["userDefinedParams"];}if(z740b["userDefinedParams"]["config"]){za17e=WT.paramsMerge(za17e,z740b["userDefinedParams"]["config"]);}return za17e;};this.z9318a=function(domain){var z22f8=WT.common.TrackingPipeline;var z5866e=WT.common.extendObject;var z9aaf4=function(z740b){try{if(z740b["params"]&&z740b["params"]["mutation"]&&z740b["params"]["mutation"]["click"]&&z740b["params"]["testAlias"]&&z740b["params"]["conversionPoint"]){var z02b4=(function(){var payload=WT.optimize.runMgr.getOptData(z740b["params"]["testAlias"]);if(z5866e(payload).length()===0){WT.Debug.debug(z740b["params"]["testAlias"]+" wasn't found, trying cookie");payload=z32da.z1467e(z740b["params"]["testAlias"]);WT.Debug.debug("Found values in cookie "+WT.optimize.z8fc82(payload));}var size=z5866e(payload).length();if(size>0){payload["opt.conversion_point"]=z740b["params"]["conversionPoint"];}else if(size===0){payload["opt.account_id"]=domain;payload["opt.test_alias"]=z740b["params"]["testAlias"];payload["opt.conversion_point"]=z740b["params"]["conversionPoint"];}var z86cae=(WT.hasVal(z740b["params"])&&WT.hasVal(z740b["params"]["userDefinedParams"]))?z740b["params"]["userDefinedParams"]:null;if(WT.hasVal(z86cae)){if(WT.hasVal(z86cae["externalUID"])){payload["opt.external_uid"]=z86cae["externalUID"];}else if(WT.hasVal(z86cae["data"])&&WT.hasVal(z86cae["data"]["externalUID"])){payload["opt.external_uid"]=z86cae["data"]["externalUID"];};}return payload;})();z5866e(z02b4).forEach(function(z3ec0,attrName){if(!z740b.getParam(attrName)){z740b.setParam(attrName,z3ec0);}});var z8508={};var z86cae=(WT.hasVal(z740b["params"])&&WT.hasVal(z740b["params"]["userDefinedParams"]))?z740b["params"]["userDefinedParams"]:null;if(WT.hasVal(z86cae)){z8508=WT.paramsMerge(JSON.parse(JSON.stringify(z02b4)),z86cae);z8508=WT.hasVal(z86cae)?WT.paramsMerge(z8508,z86cae["config"]):z8508;if(WT.hasVal(z86cae["data"])&&WT.hasVal(z86cae["data"]["externalUID"])){z8508["externalUID"]=z86cae["data"]["externalUID"];};}else{z8508=WT.paramsMerge(JSON.parse(JSON.stringify(z02b4)));}var zaa20f=WT.paramsMerge(z8508);WT.optimize.conversion(zaa20f,true);}}catch(z392c){WT.Debug.error("OPT Error:  Applying External CV mutation",148,z392c["message"]);}};z22f8.registerMutation("optimizeCVMutant",z9aaf4,1);};this.z0271a=function(domain){var z22f8=WT.common.TrackingPipeline;var zacb05=(function(){if(!WT.hasVal(z32da.zdf8b5("user",domain))&&!WT.hasVal(WT.common.getCookieAsObj("WT_FPC"))){return true;}return false;})();var z70f4a=(function(z4ac79){var z451e4;function z54c9c(){var zb7933=z32da.zdf8b5("user",domain);return zb7933?zb7933["uid"]:null;};return function(z740b){try{if(!z32da.z35bf1(z740b)){return;}if(!WT.hasVal(z740b.getParam("WT.co_f"))){if(!WT.hasVal(z451e4)){z451e4=z54c9c();}if(WT.hasVal(z451e4)){WT.Debug.trace("Injecting WT.co_f="+z451e4);z740b.setParam("WT.co_f",z451e4);};}if(!WT.hasVal(z740b["payload"]["WT.vt_f"])&&z4ac79){WT.Debug.trace("Injecting WT.vt_f=1");z740b["payload"]["WT.vt_f"]=1;z740b["payload"]["WT.vt_f_a"]=1;z740b["payload"]["WT.vt_f_d"]=1;z740b["payload"]["WT.vt_f_s"]=1;z4ac79=false;}else if(WT.hasVal(z740b["payload"]["WT.vt_f"])){z4ac79=false;}}catch(z392c){WT.Debug.error("OPT ERROR: Issue detecting optimize visitor",148,z392c["message"]);}};})(zacb05);z22f8.registerMutation("optimizeVisitorMutant",z70f4a,2);};function z1bf6f(zaf467){switch(zaf467){case "0":return zf9ac.z10ca;case "1":return zf9ac.zcf44;case "2":return zf9ac.z6f4e;case "3":return zf9ac.zd4c4;case "4":return zf9ac.z7ffc;case "5":return zf9ac.zbf4a;default:WT.Debug.debug("Unable to map test type for "+zaf467);return "";};};this.z60c27=function(z98420,z25cd8,domain){z32da.zdf8b5=function(z8365,z9ea9){var z0a48=document.cookie.split(";");var z1e14;for(var z205e=0;z205e<z0a48.length;z205e++){var z8403=[];z8403[0]=z0a48[z205e].substring(0,z0a48[z205e].indexOf("="));z8403[1]=z0a48[z205e].substring(z0a48[z205e].indexOf("=")+1);while(z8403[0].charAt(0)===' '){z8403[0]=z8403[0].substring(1,z8403[0].length);}if(z8403[0].indexOf(z98420)===0&&z8403[0].search(z9ea9)!==-1&&z8403[0].search(z8365)!==-1){z1e14=z8403[1];break;};}if(z1e14===undefined){return undefined;}z1e14=z1a23.Library.z7f69(z1e14,z25cd8);return JSON.parse(z1e14);};z32da.z1467e=function(z9ea9){var z8403=this.zdf8b5("control",z9ea9);if(z8403===undefined){return{};}var z9a464=z8403["testid"];var zbaed2=z8403["runid"];var z2083e=z8403["trackid"];var z0c404=z8403["personalizedid"];if(!(WT.hasVal(zbaed2)&&WT.hasVal(z9a464))){return{};}if(WT.hasVal(z0c404)){z2083e=z0c404;}var payload=new WT.optimizeUtil.PayloadBuilder();var zb826f=z1bf6f(z8403["typeid"]);var zbbca2=domain;var z55864=(z8403["trackid"]==="NOTRACKID")?"-1":z8403["trackid"];payload.zb096f(zbbca2+"-"+z9ea9+"-"+zbaed2+"-"+z55864).z3965a(zb826f).z3d54a(z9a464).zd871a(zbaed2).z9d870(z2083e).z6cdf8(zbbca2);var data=WT.common.zf1dc3(z98420+".mode-"+domain);var mode=(data?z1a23.Library.z7f69(data,z25cd8):"none");if(mode==="staging"){payload.zb63c5("2");}return payload.z35926();};};this.z1028=function(event){var zae74=event.target;var zf64e=event["params"];try{if(zf64e["opcode"]===WT.Event.ABORT||zf64e["opcode"]===WT.Event.z9c02){WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT,zae74));}else{WT.fireEvent(new WT.Event(zf64e["opcode"],WT.Event.STATUS_FAULT,zae74));}}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT,zae74));throw z392c;}};this.ze5d9=function(event){try{WT.optimize.runMgr.z2ddf6();var zae74=event.target;var zf64e=event["params"];WT.Debug.debug(event.name+": JSON Invalid Response Page Processing");zae74.z596e(zf64e["opcode"]);zae74.setPageState(zf9ac.z57b0);z1a23.runMgr.setRunPageState(zae74.params["testAlias"],zf9ac.z57b0);WT.fireEvent(new WT.Event(WT.Event.INVALID,WT.Event.STATUS_SUCCESS));z32da.z1dd6(zae74,false);WT.fireEvent(new WT.Event(WT.Event.DONE,WT.Event.STATUS_SUCCESS));}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT));throw z392c;}};this.z3c7c=function(event){var zae74=event.target;var zf64e=event["params"];try{WT.optimize.runMgr.z2ddf6();zae74.z4cc8(zf64e["opcode"]);var z64f6=zae74.z452a(zf64e["opcode"]);var z392c={};z392c["message"]=z64f6["body"]["message"];z392c["stack"]=z64f6["body"]["exception"];if(z392c["message"]){WT.Debug.error("error_track: Track Response Error",128,z392c["message"]);}WT.Debug.debug("error_track: "+z392c["stack"]);WT.fireEvent(new WT.Event(z64f6["opcode"],WT.Event.STATUS_FAULT,zae74));zae74.z6d0e();}
catch(z676d){WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT,zae74));WT.debug.error(z676d.toString());throw z676d;}};this.z4708=function(event){var zae74=event.target;var zf64e=event["params"];try{zae74.z4cc8(zf64e["opcode"]);WT.Debug.info(event.name+": Page View Track ["+zae74.params["testAlias"]+"]");WT.fireEvent(new WT.Event(WT.Event.PAGEVIEW,WT.Event.STATUS_SUCCESS,zae74));zae74.za7ed();WT.optimize.runMgr.setRunPageState(zae74.z2de3d(),zf9ac.z7bd2);}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.PAGEVIEW,WT.Event.STATUS_FAULT,zae74));WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT,zae74));throw z392c;}};this.z5b2c=function(event){var zae74=event.target;var zf64e=event["params"];try{zae74.z4cc8(zf64e["opcode"]);WT.Debug.info(event.name+": Conversion Track ["+zae74.params["testAlias"]+"]");WT.fireEvent(new WT.Event(WT.Event.CONVERSION,WT.Event.STATUS_SUCCESS,zae74));zae74.conversion();}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.CONVERSION,WT.Event.STATUS_FAULT,zae74));WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT,zae74));throw z392c;}};this.zede2=function(event){var zae74=event.target;try{WT.Debug.debug(event.name+": JSON Control Response Page Evaluation");zae74.zc52f();WT.fireEvent(new WT.Event(WT.Event.PREPROCESS,WT.Event.STATUS_SUCCESS,zae74));}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.PREPROCESS,WT.Event.STATUS_FAULT,zae74));WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT,z392c));throw z392c;}zae74.zf563(true);};var z8e2d=function(z2186,value){if(z2186==="r_cWrapEl"||z2186==="__proto__"){return undefined;}return value;};var z1a52=function(ze1c0,z0f5a,zf61d,zffbc){return function(){WT.removeEventHandler(WT.Event.DOM_READY,arguments.callee);WT.removeEventHandler(WT.Event.DOM_ONLOAD,arguments.callee);var zc0c1=ze1c0.params["r_cWrapEl"];ze1c0.params=JSON.parse(z0f5a);ze1c0.z7715=JSON.parse(zf61d);ze1c0.z1382=JSON.parse(zffbc);ze1c0.params["r_cWrapEl"]=zc0c1;z32da.z76bb(ze1c0);};};this.z348e=function(event){if(WT.getExecuteState("optimize")===WT.Event.LOADER_MODULE_ABORT){WT.Debug.error("_process did not execute because module state is '"+WT.getExecuteState("optimize")+"'",129);return;}var zae74=event.target;try{WT.optimize.runMgr.z2ddf6();WT.Debug.debug(event.name+": JSON Control Response Page Processing");zae74.z596e(zf9ac.z7df9);WT.fireEvent(new WT.Event(WT.Event.PROCESS,WT.Event.STATUS_SUCCESS,zae74));}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.PROCESS,WT.Event.STATUS_FAULT,zae74));WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT,z392c));throw z392c;}if(zae74.params["s_pageMode"]==="dom"&&!WT.isReady()){WT.Debug.debug(event.name+": delayed execution waiting for dom_ready");var z0f5a=JSON.stringify(zae74.params,z8e2d);var zf61d=JSON.stringify(zae74.z7715,z8e2d);var zffbc=JSON.stringify(zae74.z1382,z8e2d);WT.addEventHandler(WT.Event.DOM_READY,z1a52(zae74,z0f5a,zf61d,zffbc));}else if(zae74.params["s_pageMode"]==="onload"&&!WT.isLoaded()){WT.Debug.debug(event.name+": delayed execution waiting for dom_onload");var ze025=JSON.stringify(zae74.params,z8e2d);var za867=JSON.stringify(zae74.z7715,z8e2d);var zd140=JSON.stringify(zae74.z1382,z8e2d);WT.addEventHandler(WT.Event.DOM_ONLOAD,z1a52(zae74,ze025,za867,zd140));}else{z32da.z76bb(zae74);}};this.zd78e=function(event){var zae74=event.target;try{WT.optimize.runMgr.z2ddf6();WT.optimize.runMgr.setRunPageState(zae74.z2de3d(),zf9ac.z7bd2);WT.Debug.debug(event.name+": JSON Control Response Conversion Event Processing");WT.fireEvent(new WT.Event(WT.Event.PRECONVERSIONEVENT,WT.Event.STATUS_SUCCESS,zae74));}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.PRECONVERSIONEVENT,WT.Event.STATUS_FAULT,zae74));}var z224f=function(z9e4a,z0b55){var z3eb2=JSON.stringify(z0b55.z7715[zf9ac.z3a29]);return function(){z0b55.z7715[zf9ac.z3a29]=JSON.parse(z3eb2);WT.removeEventHandler(z9e4a,arguments.callee);z32da.ze2b3(z0b55);};};if(zae74.params["s_pageMode"]==="dom"&&!WT.isReady()){WT.Debug.debug(event.name+": delayed execution waiting for dom_ready");WT.addEventHandler(WT.Event.DOM_READY,z224f(WT.Event.DOM_READY,zae74));}else if(zae74.params["s_pageMode"]==="onload"&&!WT.isLoaded()){WT.Debug.debug(event.name+": delayed execution waiting for dom_onload");WT.addEventHandler(WT.Event.DOM_ONLOAD,z224f(WT.Event.DOM_ONLOAD,zae74));}else{z32da.ze2b3(zae74);}};this.ze2b3=function(zae74){try{zae74.z500e();WT.fireEvent(new WT.Event(WT.Event.zcc70,WT.Event.STATUS_SUCCESS,zae74));}catch(z392c){WT.Debug.error("Failed to attach conversion events",130,z392c);WT.fireEvent(new WT.Event(WT.Event.zcc70,WT.Event.STATUS_FAULT,zae74));}};this.z76bb=function(zae74){try{if(!z1a23.ze3c2){zae74.z8fe4();}WT.fireEvent(new WT.Event(WT.Event.PRERENDER,WT.Event.STATUS_SUCCESS,zae74));}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.PRERENDER,WT.Event.STATUS_FAULT,zae74));WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT,zae74));return;}z32da.z1dd6(zae74,true);};this.z1dd6=function(zae74,zb803){try{zae74.z8300(zb803);WT.fireEvent(new WT.Event(WT.Event.RENDER,WT.Event.STATUS_SUCCESS,zae74));}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.RENDER,WT.Event.STATUS_FAULT,zae74));WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_FAULT,zae74));return;}z32da.z2d27();if(zb803){try{zae74.track("pageview");}catch(z676d){WT.Debug.error("render/track: unable to track pageview for test",131,z676d);};}else if(zae74.params["defaultUrl"]&&zae74.params["defaultUrl"]!==null){WT.fireEvent(new WT.Event(WT.Event.z9c02,WT.Event.STATUS_SUCCESS,zae74));}};this.z2d27=function(){try{var zfbf0=true;var ze107=0;if(z1aff!==null&&(z1a23.z2b20.length<z3065+zfe37)){zfbf0=false;}else{for(var z205e=0;z205e<z1a23.z2b20.length;z205e++){var z9da9=z1a23.z2b20[z205e];if(z9da9.getPageState()!==zf9ac.z3a29&&z9da9.getPageState()!==zf9ac.z971e&&z9da9.z6848!==zf9ac.z3064){zfbf0=false;break;}else if(z9da9.z6848===zf9ac.z3064){ze107++;};};}if(zfbf0){WT.optimize.z4e9a=new Date();if(WT.optimize.z907d){clearTimeout(WT.optimize.z907d);WT.Debug.info("done: clearing active timer, all runs are complete ["+WT.optimize.z4e9a+"]");}else{WT.Debug.info("done: no active timer found, all runs are complete ["+WT.optimize.z4e9a+"]");}if(ze107===z1a23.z2b20.length&&ze107===0){WT.hideAndShow(document.body,z677c.params["s_pageDisplayMode"],true,z677c.params["overlayColor"]);WT.fireEvent(new WT.Event(WT.Event.DONE,WT.Event.STATUS_SUCCESS));}else if(ze107===z1a23.z2b20.length){WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT));}else{var zd9f2=0;for(var ze893=0;ze893<z1a23.z2b20.length;ze893++){var z2945=z1a23.z2b20[ze893];var z9180=z2945.params["r_cWrapEl"];if(z2945.params["totaltests"]){zd9f2=zd9f2>z2945.params["totaltests"]?zd9f2:z2945.params["totaltests"];}if(z2945){try{if(!z2945.params["r_redirectUrl"]){WT.hideAndShow(z9180,z2945.params["s_pageDisplayMode"],true,z2945.params["overlayColor"]);WT.Debug.debug("render: test alias ["+z2945.params["testAlias"]+"]");}else{WT.Debug.debug("render: test alias ["+z2945.params["testAlias"]+"] splitPage will render redirectUrl");}}catch(z392c){WT.Debug.debug("render: error occurred on a render of test alias ["+z2945.params["testAlias"]+"]");};};}if(zd9f2===z1a23.z2b20.length&&z1a23.g_done!==true){if(ze107>0){WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT));}else{WT.fireEvent(new WT.Event(WT.Event.DONE,WT.Event.STATUS_SUCCESS));};};};}}catch(z392c){WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT,z392c));}};this._clearOptimizeCookies=function(){var z0a48=document.cookie.split(";");if(WT.hasVal(z0a48)){for(var x=0;x<WT.optimize.z2b20.length;x++){var z2945=WT.optimize.z2b20[x];for(var z205e=0;z205e<z0a48.length;z205e++){var z8403=z0a48[z205e].split("=");while(z8403[0].charAt(0)===' '){z8403[0]=z8403[0].substring(1,z8403[0].length);}if(z8403[0].indexOf(z2945.params["cookiePrefix"])===0){WT.Debug.debug("Clearing cookie: "+z8403[0]);WT.common.z0f8a(z8403[0],"",-100,null,z2945.params['cookieDomain'],z2945.params['cookiePath']);};};};}};this.zc1b5=function(reset){if(WT.optimize.z2b20.length>0){var z677c=WT.optimize.z2b20[WT.optimize.z2b20.length-1];if(reset.target["resetFlag"]===true){z677c.zca4b(z677c,z677c.params['cookiePrefix']+".mode-"+z677c.params['s_domainKey'],"",-1000);}z677c.zca4b(z677c,"_wt.debugwindow",WT.Debug.getDebugLevel(),"session");var data=z677c.z27c8(z677c.params['cookiePrefix']+".mode-"+z677c.params['s_domainKey']);var mode=(data?z1a23.Library.z7f69(data,z677c.params['s_keyToken']):"none");switch(mode){case "normal":mode="Active";break;case "staging":mode="Staging";break;default:mode="None";};WT.Debug.info("Mode is "+mode);}};this.z7e5af=function(event){if(event["target"]&&event["target"]["totalResponses"]){WT.Debug.trace("setExpectedRespNum("+event["target"]["totalResponses"]+")");WT.optimize.runMgr.z13c21(event["target"]["totalResponses"]);}};this.z95e8();};WT.optimize.Preview={};if(typeof(WT.optimize.Library)==="undefined"){WT.optimize.Library=new WT.optimize.zd67f(WT.optimize);}WT.fireEvent(new WT.Event(WT.Event.z6bd0,WT.Event.STATUS_SUCCESS),true);WT.optimize.Library.z454c=(function(){var z4fb7=function(zbcb4,zd3b2){for(var z205e=0,length=zd3b2.length;z205e<length;z205e++){if(zd3b2[z205e]===zbcb4){return z205e;};}return-1;};var z0ff6=function(zbcb4){var children=[];var z6fb5=zbcb4.firstChild;while(z6fb5){if(z6fb5.nodeType===1&&z6fb5!==zbcb4){children.push(z6fb5);}z6fb5=z6fb5.nextSibling;}return children;};var z8661=function(zbcb4){return z4fb7(zbcb4,z0ff6(zbcb4.parentNode));};var z41d4=function(id){return document.getElementById(id);};var za4ce=function(name){return document.getElementsByTagName(name)[0];};var z31fc=function(el){if(el.id){return "#"+el.id;}else{return el.tagName.toLowerCase()+"["+z8661(el)+"]";}};var z1e66=function(zbcb4){if(typeof zbcb4==='string'){return zbcb4.match(/\[|#|\//)?WT.optimize.Library.z454c.z0c82(zbcb4):z41d4(zbcb4);}else{return zbcb4;}};return{z3e34:function(zbcb4){var zc60b=[];var za720=zbcb4;while(za720){zc60b.push(z31fc(za720));if(za720.id){break;}za720=za720.parentNode;}zc60b.reverse();return zc60b.join("/");},z0c82:function(zeacd){var zc42b=null;if(zeacd.match(/[#\[\]$]/)){var z2605=zeacd.split("/");for(var z205e=0;z205e<z2605.length;z205e++){var id=z2605[z205e].match(/(?:#)(.+?)(?=\[|$)/);var index=z2605[z205e].match(/(?:\[)(.+)(?=\])/);var tagName=z2605[z205e].match(/^.+?(?=#|\[)/);if(id){zc42b=z41d4(id[1]);if(!zc42b){return null;};}if(zc42b&&index){zc42b=z0ff6(zc42b)[index[1]];if(!zc42b||zc42b.nodeName.toLowerCase()!==tagName[0]){return null;};}if(!zc42b){if(tagName){zc42b=za4ce(tagName[0]);}else{return null;};};};}else{zc42b=z41d4(zeacd);}return zc42b;}};}());WT.optimize.Library.z6c8b=function(z1334,zeb4a){var parent=z1334.parentNode;var za17e=parent.insertBefore(zeb4a,z1334);if(!za17e){throw("failed to insert");}};WT.optimize.Library.ze02d=function(z1334,zeb4a){var nextSibling=z1334.nextSibling;var za17e;if(nextSibling){za17e=z1334.parentNode.insertBefore(zeb4a,nextSibling);}else{za17e=z1334.parentNode.appendChild(zeb4a);}if(!za17e){throw("failed to append");}};WT.optimize.Library.zd713=function(zfd16,z3e47){WT.optimize.Library.z6c8b(zfd16.firstChild,z3e47);};WT.optimize.Library.z850d=function(zfd16,z3e47){zfd16.appendChild(z3e47);};WT.optimize.Library.z8849=function(z105e,z3014){if(!z105e||!z3014){throw "invalid elementType or properties";}var zccf6;if(z105e==='javascript'){zccf6=document.createElement("script");if(!z3014["type"]){zccf6["type"]="text/javascript";};}else{zccf6=document.createElement(z105e);}for(var zac90 in z3014){if(z3014.hasOwnProperty(zac90)){if(z105e==='style'&&zac90==='styleText'){zccf6.type='text/css';if(typeof(zccf6.styleSheet)!=='undefined'&&typeof(zccf6.styleSheet.cssText)!=='undefined'){zccf6.styleSheet.cssText=z3014[zac90];}else{var z9329=document.createTextNode(z3014[zac90]);zccf6.appendChild(z9329);}}else if(z105e==='javascript'&&zac90==="content"){zccf6["text"]=z3014[zac90];}else if(zac90==="content"){zccf6["innerHTML"]=z3014[zac90];}else{zccf6[zac90]=z3014[zac90];};};}return zccf6;};WT.optimize.Library.z53ce={"before":WT.optimize.Library.z6c8b,"after":WT.optimize.Library.ze02d,"prepend":WT.optimize.Library.zd713,"append":WT.optimize.Library.z850d};WT.optimize.Library._selectAndUpdate=function(zd6c2,zf14e,payload){var zd255={};zd255.zeddd="edit_content";zd255.z1956="edit_css";zd255.zff32="edit_attr";zd255.MOVE="move";zd255.RESIZE="resize";zd255.z4cf5="insert";zd255.z1f7b="remove";zd255.z0d3f="rearrange";var zbb49=function(id,z61e6,target,success){var payload=JSON.stringify(z61e6);if(success===false){WT.Debug.error("_selectAndUpdate: failed to update '"+id+"' with '"+JSON.stringify(payload)+"' on '"+target+"'",132);}else{WT.Debug.trace("_selectAndUpdate: updated '"+id+"' with '"+JSON.stringify(payload)+"' on '"+target+"'");}};var z9b65=function(za221){var za17e=selector(za221);if(!za17e){throw "No res for"+za221;}if(za17e.length!==1){throw "res length !== 1 for selector: "+za221;}return za17e[0];};try{if(!zd6c2||!zf14e){throw "invalid params selectorStr: "+zd6c2+"' with op: '"+zf14e+"' and payload: '"+JSON.stringify(payload)+"'";}if((typeof(payload)==="undefined"||payload===null)&&zf14e!==zd255.z1f7b){throw "payload is 'undefined' or 'null'";}WT.Debug.debug("_selectAndUpdate: '"+zd6c2+"' with op: '"+zf14e+"' and payload: '"+JSON.stringify(payload)+"'");var selector=WT.getSelector();var z2cd5=selector(zd6c2);if(!z2cd5||z2cd5.length===0){WT.Debug.debug("_selectAndUpdate: selectorStr("+zd6c2+") result is empty");return 0;}for(var index=0;index<z2cd5.length;index++){switch(zf14e){case zd255.zeddd:z2cd5[index].innerHTML=payload;break;case zd255.z1956:case zd255.MOVE:case zd255.RESIZE:for(var z7acc in payload){if(payload.hasOwnProperty(z7acc)){try{z2cd5[index]["style"][z7acc]=payload[z7acc];zbb49(z7acc,payload[z7acc],z2cd5[index],true);}catch(z392c){zbb49(z7acc,payload[z7acc],z2cd5[index],false);};};}break;case zd255.zff32:for(var z2ba4 in payload){if(payload.hasOwnProperty(z2ba4)){try{z2cd5[index][z2ba4]=payload[z2ba4];z2cd5[index].setAttribute(z2ba4,payload[z2ba4]);zbb49(z2ba4,payload[z2ba4],z2cd5[index],true);}catch(z392c){zbb49(z2ba4,payload[z2ba4],z2cd5[index],false);};};}break;case zd255.z4cf5:if(!payload["action"]){throw "No action in payload="+JSON.stringify(payload);}if(!payload["properties"]){throw "No 'properties' in payload="+JSON.stringify(payload);}if(!payload["elementType"]){throw "No 'elementType' in payload="+JSON.stringify(payload);}var zf8c9=payload["action"];var z161e=z9b65(zd6c2);var zfe69=WT.optimize.Library.z8849(payload["elementType"],payload["properties"]);WT.optimize.Library.z53ce[zf8c9](z161e,zfe69);break;case zd255.z0d3f:if(!payload["action"]){throw "No action in payload="+JSON.stringify(payload);}if(!payload["refElSelector"]){throw "No refElSelector in payload="+JSON.stringify(payload);}var zcc74=payload["action"];var z4dcd=z9b65(zd6c2);var ze36c=z9b65(payload["refElSelector"]);WT.optimize.Library.z53ce[zcc74](z4dcd,ze36c);break;case zd255.z1f7b:z2cd5[index].parentNode.removeChild(z2cd5[index]);break;default:throw("Invalid Op");};}return z2cd5.length;}catch(z392c){WT.Debug.error("problem handling selectorStr: "+zd6c2+" with op: "+zf14e+" and payload: "+JSON.stringify(payload),133,z392c);return-1;}};WT.optimize.Library._comm=function(url,payload,desc,z692b,z2ee3,errorHandler){var z98b3=function(z3d59){WT.Debug.trace("_comm: handling response='"+z5cfb["responseText"]+"'");if(z2ee3){z2ee3(z3d59);}else{WT.optimize.Library._execScript(z3d59);}};var ze8df=function(z062c,zc9fe,url,payload){if(errorHandler){return errorHandler;}else if(url&&payload){return function(){WT.Debug.debug("Failed xhr/xdr ... retry w/ basic protocol");WT.optimize.Library._createScriptEl(url+payload,"_comm");};}else{return function(){WT.Debug.error(z062c,135);var target={};target["name"]="commError";WT.fireEvent(new WT.Event(WT.Event.ABORT,WT.Event.STATUS_FAULT,target));};}};var z3628=function(){try{if(z5cfb.status===200){switch(z5cfb.readyState){case 0:case 1:case 2:case 3:WT.Debug.superfine("_comm:  in progress, state: "+z5cfb.readyState);break;case 4:WT.Debug.debug("_comm:  response received");z98b3(z5cfb["responseText"],"_comm xhrRespHandler response");break;default:WT.Debug.debug("_comm: unusual readyState="+z5cfb.readyState);break;};}else if(z5cfb.readyState===4&&z5cfb.status!==200){var zac48="_comm xhrResponseHandler:  communication error, http(cor) status: "+z5cfb.status+", ots resp: '"+z5cfb["responseText"]+"'";throw zac48;}}catch(z392c){ze8df(z392c)();}};var z8ffd=function(){WT.Debug.trace("xdrRespHandler response='"+z5cfb["responseText"]+"'");z98b3(z5cfb["responseText"],"xdrRespHandler response");};try{var z5cfb;var data={};if('withCredentials' in new XMLHttpRequest()&&z692b){WT.Debug.debug("CORS supported, attempting XHR");data["payload"]=payload?payload:"";z5cfb=new XMLHttpRequest();z5cfb["open"]('POST',url,true);z5cfb["withCredentials"]="true";z5cfb["onreadystatechange"]=z3628;z5cfb["send"](JSON.stringify(data));}else if(typeof XDomainRequest!=="undefined"&&z692b){WT.Debug.debug("CORS supported, attempting XDR");data["referer"]=window.location.href?window.location.href:"";data["payload"]=payload?payload:"";z5cfb=new XDomainRequest();z5cfb["open"]('POST',url);z5cfb["onload"]=z8ffd;z5cfb["ontimeout"]=ze8df("_comm timeout",true,url,payload);z5cfb["onerror"]=ze8df("_comm error",true,url,payload);z5cfb["send"](JSON.stringify(data));}else{WT.Debug.debug("No CORS Support or Disabled, using basic protocol");WT.optimize.Library._createScriptEl(url+payload,"_comm",z2ee3,errorHandler);}WT.Debug.debug("_comm request:  "+desc);WT.Debug.trace("_comm url:  "+url);WT.Debug.superfine("_comm payload:  "+payload);}catch(z392c){ze8df(z392c,true,url,payload)();}};WT.optimize.Library.z7617=function(){var ze90d={};this.set=function(z2186,z3ec0){ze90d[z2186]=z3ec0;};this.get=function(z2186){if(!ze90d[z2186]){return null;}else{return ze90d[z2186];}};this.zbb56=function(z2186,zc616){if(zc616.constructor!==Array){throw "setElements was passed a non-array";}ze90d[z2186]=zc616;};this.z7c1a=function(z2186){if(!ze90d[z2186]){return[];}else{return ze90d[z2186];}};this.z2509=function(){return ze90d;};this.z1ae7=function(za823,z4c24){if((za823.constructor!==Array)||(z4c24.constructor!==Array)){throw "inCurrNotInComp was passed a non-array";}var za17e=[];for(var z205e=0;z205e<z4c24.length;z205e++){var z1f6a=false;for(var zd4f0=0;zd4f0<za823.length;zd4f0++){if(z4c24[z205e]===za823[zd4f0]){z1f6a=true;};}if(!z1f6a){za17e.push(z4c24[z205e]);};}return za17e;};this.getAdditions=function(z2186,za9ce){return this.z1ae7(this.z7c1a(z2186),za9ce);};this.getRemovals=function(z2186,za9ce){return this.z1ae7(za9ce,this.z7c1a(z2186));};this.zc02b2=function(){ze90d={};};};WT.optimize["CEDomElCache"]=new WT.optimize.Library.z7617();WT.optimize["CEFnCache"]=new WT.optimize.Library.z7617();WT.optimize.Library.ze205=function(){var z5244=[];this.add=function(el){var index=this.ze75b(el);if(index!==-1){return index;}else{z5244.push(el);return z5244.length-1;}};this.remove=function(el){for(var z205e=0;z205e<z5244.length;z205e++){if(z5244[z205e]===el){z5244.splice(z205e,1);};}};this.ze75b=function(el){for(var z205e=0;z205e<z5244.length;z205e++){if(z5244[z205e]===el){return z205e;};}return-1;};};WT.optimize["CEDomReg"]=new WT.optimize.Library.ze205();WT.optimize.clickTupleStorage=(function(z7617){var self=new z7617();var z7c3a9=function(za18f,za786){return za18f===za786?true:false;};self.setComparator=function(z35c2){z7c3a9=z35c2;};self.z1ae7=function(za823,z4c24){if((za823.constructor!==Array)||(z4c24.constructor!==Array)){throw "inCurrNotInComp was passed a non-array";}var za17e=[];for(var z205e=0;z205e<z4c24.length;z205e++){var z1f6a=false;for(var zd4f0=0;zd4f0<za823.length;zd4f0++){if(z7c3a9(z4c24[z205e],za823[zd4f0])){z1f6a=true;};}if(!z1f6a){za17e.push(z4c24[z205e]);};}return za17e;};return self;})(WT.optimize.Library.z7617);WT.optimize.Library.z79c68=function(){var self=this;self["CEDomElCache"]={};self["CEFnCache"]={};self["CEDomReg"]={};var zcefc1=function(){self["CEDomElCache"]=new WT.optimize.Library.z7617();self["CEFnCache"]=new WT.optimize.Library.z7617();self["CEDomReg"]=new WT.optimize.Library.ze205();};zcefc1();self.z80b7a=function(){var z91239=WT.common.extendObject(WT.optimize.clickTupleStorage.z2509());z91239.forEach(function(z3ec0){self.zbcfd(z3ec0["ce"],z3ec0["el"],z3ec0["elId"],z3ec0["eventName"],false,z3ec0["_run"]);});};self.zc02b2=function(){zcefc1()};self.z9dda=function(z9de9,name){var z6b68=name.substr(0,2);if(z9de9.addEventListener){if(z6b68==='on'){return name.substring(2);};}else if(z9de9.attachEvent){if(z6b68!=='on'){return 'on'+name;};}return name;};self.zbcfd=function(zee58,z3d00,z7a92,z9e4a,z0356,z677c){var z4c75=true;if(typeof zee58["redirect_flag"]!=="undefined"){z4c75=zee58["redirect_flag"];}var zaa4a=function(event){if(event){var z9de9=(event.currentTarget)?event.currentTarget:event.srcElement;if(z9de9&&z9de9.tagName==="A"&&z9de9.href){if(!z9de9.wt_href){z9de9.wt_href=z9de9.href;z9de9.wt_target=z9de9.target;}z9de9.href="javascript:void(0);";z9de9.target="";};}};var zd001=function(event){if(event){var z9de9=(event.currentTarget)?event.currentTarget:event.srcElement;if(z9de9&&z9de9.tagName==="A"&&z9de9.href&&!(z9de9.wt_pending&&z9de9.wt_pending==="true")){z9de9.href=z9de9.wt_href;z9de9.target=z9de9.wt_target;};}};var z35c2=function(event){var zf64e=zee58['params'];zf64e['conversionPoint']=zee58['conversionPointName'];if(zee58['federatedKey']){zf64e['federatedKey']=zee58['federatedKey'];zf64e['federatedDomainID']=zee58['federatedDomainID'];}var z9de9=(event.currentTarget)?event.currentTarget:event.srcElement;if(event){if((z4c75===true)&&z9de9&&z9de9.tagName==="A"&&z9de9.href){z9de9.wt_pending="true";zf64e['r_redirectLink']=z9de9;setTimeout(function(){WT.redirectElement(z9de9,"click: conversion timed out");},z677c.params["s_conversionTimeout"]);};}if(z677c.params["lightWeightMode"]){zf64e["lightWeightMode"]=z677c.params["lightWeightMode"];}zf64e["s_isInternalCV"]=true;zf64e["testAlias"]=zee58["testAlias"];WT.Debug.trace("Attempting to convert on '"+zf64e['conversionPoint']+"' for '"+zf64e["testAlias"]+"'");if(WT.optimize.conversion(zf64e)&&(z4c75===true)){WT.redirectElement(z9de9,"click: conversion fail, redirecting");}};try{if(z3d00){var ze878=self["CEDomReg"].ze75b(z3d00);ze878=((ze878!==-1)?ze878:self["CEDomReg"].add(z3d00));var zbe84=zee58["testAlias"]+"_"+zee58["conversionPointName"]+"_"+ze878;var zdb86=zbe84+"_"+"fn";if((z4c75===true)&&z3d00.tagName==="A"&&z3d00.href){var zc0ec=self.z9dda(z3d00,"mouseover");var z655a=zbe84+"_"+zc0ec;var z075c=self.z9dda(z3d00,"mouseout");var z7f6e=zbe84+"_"+z075c;if(z0356){WT.addDOMEvent(z3d00,zc0ec,zaa4a);self["CEFnCache"].set(z655a,zaa4a);WT.addDOMEvent(z3d00,z075c,zd001);self["CEFnCache"].set(z7f6e,zd001);}else{var z1a73=self["CEFnCache"].z7c1a(z655a);WT.removeDOMEvent(z3d00,zc0ec,z1a73);self["CEFnCache"].set(z655a,null);var z3a9c=self["CEFnCache"].z7c1a(z7f6e);WT.removeDOMEvent(z3d00,z075c,z3a9c);self["CEFnCache"].set(z655a,null);};}if(z0356){WT.addDOMEvent(z3d00,self.z9dda(z3d00,z9e4a),z35c2);self["CEFnCache"].set(zdb86,z35c2);WT.Debug.trace("conversionEvent: setting on click event for [id:"+z7a92+" , name: "+zee58['conversionPointName']+", alias: "+zee58['testAlias']+"]");}else{var zc31b=self["CEFnCache"].get(zdb86);WT.removeDOMEvent(z3d00,self.z9dda(z3d00,z9e4a),zc31b);WT.Debug.trace("conversionEvent: removing on click event for [id:"+z7a92+" , name: "+zee58['conversionPointName']+", alias: "+zee58['testAlias']+"]");};}else{throw "Unable to find element for "+z7a92;}return 0;}catch(z7830){WT.Debug.error("unable to attach OnClick conversion event for [id: "+z7a92+", name: "+zee58['conversionPointName']+", alias: "+zee58['testAlias']+"]",108,z7830);return 1;}};};WT.optimize["ClickMgr"]=new WT.optimize.Library.z79c68();WT.optimize.Library.z31a9=function(){var z8a22=new Date();return-z8a22.getTimezoneOffset()/60;};WT.optimize.Library.z71df=function(z99ed,zd8e5){if(z99ed.length===0)return('');var z2455=this.zab5b(this.zeab2(z99ed));if(z2455.length<=1)z2455[1]=0;var z8836=this.zab5b(this.zeab2(zd8e5).slice(0,16));var n=z2455.length;var z0002=z2455[n-1],y=z2455[0],z76a7=0x9E3779B9;var z6b04,z392c,z191f=Math.floor(6+52/n),z20b6=0;while(z191f-->0){z20b6+=z76a7;z392c=z20b6>>>2&3;for(var zf64e=0;zf64e<n;zf64e++){y=z2455[(zf64e+1)%n];z6b04=(z0002>>>5^y<<2)+(y>>>3^z0002<<4)^(z20b6^y)+(z8836[zf64e&3^z392c]^z0002);z0002=z2455[zf64e]+=z6b04;};}var z8fbf=this.z42f0(z2455);return "WT3"+this.z76c3(z8fbf);};WT.optimize.Library.z7f69=function(z8fbf,zd8e5){z8fbf=z8fbf.substring(3);if(z8fbf.length===0)return('');var z2455=this.zab5b(this.zbc09(z8fbf));var z8836=this.zab5b(this.zeab2(zd8e5).slice(0,16));var n=z2455.length;var z0002=z2455[n-1],y=z2455[0],z76a7=0x9E3779B9;var z6b04,z392c,z191f=Math.floor(6+52/n),z20b6=z191f*z76a7;while(z20b6!==0){z392c=z20b6>>>2&3;for(var zf64e=n-1;zf64e>=0;zf64e--){z0002=z2455[zf64e>0?zf64e-1:n-1];z6b04=(z0002>>>5^y<<2)+(y>>>3^z0002<<4)^(z20b6^y)+(z8836[zf64e&3^z392c]^z0002);y=z2455[zf64e]-=z6b04;}z20b6-=z76a7;}var z99ed=this.z42f0(z2455);z99ed=z99ed.replace(/\0+$/,'');return this.zbbb3(z99ed);};WT.optimize.Library.zab5b=function(z4529){var zf3ec=new Array(Math.ceil(z4529.length/4));for(var z205e=0;z205e<zf3ec.length;z205e++){zf3ec[z205e]=z4529.charCodeAt(z205e*4)+(z4529.charCodeAt(z205e*4+1)<<8)+(z4529.charCodeAt(z205e*4+2)<<16)+(z4529.charCodeAt(z205e*4+3)<<24);}return zf3ec;};WT.optimize.Library.z42f0=function(zf3ec){var za18f=new Array(zf3ec.length);for(var z205e=0;z205e<zf3ec.length;z205e++){za18f[z205e]=String.fromCharCode(zf3ec[z205e]&0xFF,zf3ec[z205e]>>>8&0xFF,zf3ec[z205e]>>>16&0xFF,zf3ec[z205e]>>>24&0xFF);}return za18f.join('');};WT.optimize.Library.z83d6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_~";WT.optimize.Library.z951d="~";WT.optimize.Library.z76c3=function(z086a,z486f){z486f=(typeof z486f==='undefined')?false:z486f;var z6fa3,zf9f4,zdf93,z4c4a,z72b4,zee84,za166,za073,z392c=[],z2023='',z8403,z9786,za6c8;var zf054=this.z83d6;z9786=z486f?this.zeab2(z086a):z086a;z8403=z9786.length%3;if(z8403>0){while(z8403++<3){z2023+=this.z951d;z9786+='\0';};}for(z8403=0;z8403<z9786.length;z8403+=3){z6fa3=z9786.charCodeAt(z8403);zf9f4=z9786.charCodeAt(z8403+1);zdf93=z9786.charCodeAt(z8403+2);z4c4a=z6fa3<<16|zf9f4<<8|zdf93;z72b4=z4c4a>>18&0x3f;zee84=z4c4a>>12&0x3f;za166=z4c4a>>6&0x3f;za073=z4c4a&0x3f;z392c[z8403/3]=zf054.charAt(z72b4)+zf054.charAt(zee84)+zf054.charAt(za166)+zf054.charAt(za073);}za6c8=z392c.join('');za6c8=za6c8.slice(0,za6c8.length-z2023.length)+z2023;return za6c8;};WT.optimize.Library.zbc09=function(z086a,z0963){z0963=(typeof z0963==='undefined')?false:z0963;var z6fa3,zf9f4,zdf93,z72b4,zee84,za166,za073,z4c4a,z500d=[],z9786,za6c8;var zf054=this.z83d6;za6c8=z0963?this.zbbb3(z086a):z086a;for(var z8403=0;z8403<za6c8.length;z8403+=4){z72b4=zf054.indexOf(za6c8.charAt(z8403));zee84=zf054.indexOf(za6c8.charAt(z8403+1));za166=zf054.indexOf(za6c8.charAt(z8403+2));za073=zf054.indexOf(za6c8.charAt(z8403+3));z4c4a=z72b4<<18|zee84<<12|za166<<6|za073;z6fa3=z4c4a>>>16&0xff;zf9f4=z4c4a>>>8&0xff;zdf93=z4c4a&0xff;z500d[z8403/4]=String.fromCharCode(z6fa3,zf9f4,zdf93);if(za073===0x40)z500d[z8403/4]=String.fromCharCode(z6fa3,zf9f4);if(za166===0x40)z500d[z8403/4]=String.fromCharCode(z6fa3);}z9786=z500d.join('');return z0963?this.zbbb3(z9786):z9786;};WT.optimize.Library.zeab2=function(zd28f){var z5554=zd28f.replace(/[\u0080-\u07ff]/g,function(z8403){var z4493=z8403.charCodeAt(0);return String.fromCharCode(0xc0|z4493>>6,0x80|z4493&0x3f);});z5554=z5554.replace(/[\u0800-\uffff]/g,function(z8403){var z4493=z8403.charCodeAt(0);return String.fromCharCode(0xe0|z4493>>12,0x80|z4493>>6&0x3F,0x80|z4493&0x3f);});return z5554;};WT.optimize.Library.zbbb3=function(z5554){var zd28f=z5554.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(z8403){var z4493=((z8403.charCodeAt(0)&0x0f)<<12)|((z8403.charCodeAt(1)&0x3f)<<6)|(z8403.charCodeAt(2)&0x3f);return String.fromCharCode(z4493);});zd28f=zd28f.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(z8403){var z4493=(z8403.charCodeAt(0)&0x1f)<<6|z8403.charCodeAt(1)&0x3f;return String.fromCharCode(z4493);});return zd28f;};WT.optimize.setup=function(za69d){try{if(WT.optimize.ze3c2||WT.getExecuteState("optimize")===WT.Event.LOADER_MODULE_ABORT){WT.Debug.error("setup: Aborted due to prior error.  See previous error for details.",139);return;}var zd27c2=(typeof(za69d)==="object"&&za69d["id"])?za69d["id"]:null;WT.common.id.zd508f.setupIdMgr(zd27c2,"OPT");if(za69d&&za69d["s_disableSeed"]===true){WT.common.TrackingPipeline.disableSeed();}var params={};var z8262;if(typeof(za69d)==="object"){params=WT.paramsMerge(za69d);z8262=params["testAlias"];}if(typeof(z8262)!=="string"){if(WT.optimize.zfff3){WT.Debug.error("setup: Only one empty setup call allowed.",140);return;}WT.optimize.zfff3=true;}if(typeof(z8262)==="string"){for(var z205e in WT.optimize.zf310){if(WT.optimize.zf310.hasOwnProperty(z205e)&&z8262===WT.optimize.zf310[z205e]["testAlias"]){WT.Debug.error("setup: Duplicate setup calls with the same alias are not supported.",141);return;};};}params["s_requestType"]="control";if(!WT.optimize.zc901){var z0fee=this;WT.addEventHandler(WT.Event.z0cf5,function(){this.z3e29(params);});if(this.z23eb["s_loaderHide"]===false){WT.hideAndShow(document.body,this.z23eb["s_pageDisplayMode"],false,this.z23eb["overlayColor"]);WT.Debug.debug("s_loaderHide === "+this.z23eb["s_loaderHide"]+", so hiding body");}else{WT.Debug.debug("s_loaderHide === "+this.z23eb["s_loaderHide"]+", so not hiding body");};}else{this.z3e29(params);}}catch(z392c){WT.Debug.error("Fatal error during setup",142,z392c);var event=new WT.Event((z392c.zbee9?z392c.zbee9:WT.Event.ABORT),WT.Event.STATUS_FAULT,this);event.params["error"]=z392c;WT.fireEvent(event);}};WT.optimize.conversion=function(za69d,external){var params={};try{if(WT.optimize.ze3c2){WT.Debug.error("conversion: Aborted due to prior error. See previous debug output for details",143);return true;}if(typeof(za69d)==="object"){params=WT.paramsMerge(za69d);}params["s_requestType"]="conversion";var z7da5=function(){var z22f8=WT.common.TrackingPipeline;var message=WT.common.Message;var z02b4=(function(){var zae74=WT.optimize.runMgr.lookup(params["testAlias"]);if(!WT.hasVal(zae74))throw new Error("No run available for testAlias:"+params["testAlias"]);var payload=new WT.optimizeUtil.PayloadBuilder();payload.set("opt.conversion_point",params["conversionPoint"]);if(typeof(za69d['eventType'])!=='undefined'&&za69d['eventType']===1){payload.z35cbc(params);}else{if(zae74["params"]["guid"]){payload.zb096f(zae74["params"]["guid"]).z3965a(zae74["params"]["r_type"]).z3d54a(zae74["params"]["r_testID"]).zd871a(zae74["params"]["r_runID"]).zb63c5(zae74["params"]["r_runState"]).z6cdf8(zae74["params"]["s_domainKey"]);if(WT.hasVal(zae74["params"]["r_experimentID"])&&zae74["params"]["r_experimentID"]!==""){payload.z9d870(zae74["params"]["r_experimentID"]);}if(WT.hasVal(zae74["params"]["r_personalizedID"])&&zae74["params"]["r_personalizedID"]!==""){payload.z9d870(zae74["params"]["r_personalizedID"]);}if(WT.hasVal(za69d["userDefinedParams"]&&WT.hasVal(za69d["userDefinedParams"]["data"])&&WT.hasVal(za69d["userDefinedParams"]["data"]["externalUID"]))){payload.set("opt.external_uid",za69d["userDefinedParams"]["data"]["externalUID"]);};}else{WT.Debug.debug("Falling back to cookie for "+params["testAlias"]);var z5b85c=WT.optimize.Library.z1467e(params["testAlias"]);payload.z35cbc(z5b85c);};}payload.set("WT.dl",WT.hasVal(params["WT.dl"])?params["WT.dl"]:1);try{return payload.z35926();}catch(z392c){WT.Debug.debug("Payload Error:"+z392c["message"]);return{};}})();var size=WT.common.extendObject(z02b4).length();if(size>0){var z7adc1=new message({"endpoints":[],"desc":"optimize conversion","payload":{},"mutation":{"conversion":true}});WT.common.extendObject(z02b4).forEach(function(value,attrName){z7adc1.setParam(attrName,value);});z22f8.enqueue(z7adc1);}else{WT.Debug.debug("Not sending data to common collection for "+WT.common.JSONPrettify(params));}};if(typeof(za69d['eventType'])==='undefined'||(typeof(za69d['eventType'])!=='undefined'&&za69d['eventType']!==1)){WT.removeEventHandler(WT.Event.CONTROL_RESPONSE);if(!WT.optimize.zc901){var z0fee=this;WT.addEventHandler(WT.Event.CAPI_CONFIG,function(){z0fee.z3e29(params);});}else{this.z3e29(params);}}if(!external){z7da5();}return false;}catch(z392c){WT.Debug.error("Fatal error during conversion.",144,z392c);var event=new WT.Event((z392c.zbee9?z392c.zbee9:WT.Event.ABORT),WT.Event.STATUS_FAULT,this);event.params["error"]=z392c;WT.fireEvent(event);return true;}};WT.setExecuteState("optimize","ready");WT.fireEvent(new WT.Event(WT.Event.OPT_LOAD_COMPLETE,WT.Event.STATUS_SUCCESS),true);
