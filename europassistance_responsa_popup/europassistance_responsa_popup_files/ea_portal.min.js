function hashHandler(n,t){try{this.oldHash=n.location.hash;this.Check;var i=this,r=function(n,t){try{i.oldHash!=n.location.hash&&(i.oldHash=n.location.hash,t(n))}catch(r){}};this.Check=setInterval(function(){r(n,t)},10)}catch(u){}}function changeSize(n,t){var r=n.height,i,f,u,h,e,o,s;r=r==""?"150px":r+"px";i="";f="False"==t[4];f&&(i+="height:"+r+" !important");i!=""&&(u=t[5],u!=""&&(h="WebPart"+u,e=document.getElementById(h),null!=e&&(e.style.cssText=i),i="",f&&(i+="height:100% !important"),o=document.getElementById(u),null!=o&&(o.style.cssText=i)),s=document.getElementById(t[1]),null!=s&&(s.style.cssText=i))}function showLoader(){jQuery("body").append('<div id="EALoader"><div id="EALoaderBack"><\/div><div id="EALoaderImg"><img src="/_layouts/15/ea/web/images/ajax-loader-site.gif" /><\/div><\/div>');var n=jQuery("#EALoader");if(n.length>0)try{n.maxZIndex({inc:5})}catch(t){}}function baseShowLoaderMobile(n,t){if(jQuery("link[href='"+n+"']").length||jQuery('<link href="'+n+'" rel="stylesheet">').appendTo("head"),jQuery("#EALoader").length==0){jQuery("body").append('<div id="EALoader"><div id="EALoaderBack"><\/div><div id="EALoaderImg"><img src="'+t+'" /><\/div><\/div>');var i=jQuery("#EALoader");if(i.length>0)try{i.maxZIndex({inc:5})}catch(r){}}}function showLoaderMobile(n,t){var i=t[2]+n.cssPath,r=t[2]+n.imgLoader;baseShowLoaderMobile(i,r)}function hideLoader(){jQuery("#EALoader").fadeOut(300,function(){while(jQuery("#EALoader").length!=0)jQuery("#EALoader").remove()})}function showHelp(n,t,i){var f=n,r,u;jQuery("#EAHelp").length==0&&jQuery("body").append('<div class="ea-form"><div id="EAHelp" class="info-icon"><\/div><\/div>');jQuery("#EAHelp").stop(!0,!0);jQuery("#EAHelp").html();jQuery("#EAHelp").hide();jQuery("#EAHelp").html('<div class="info-balloon-shadow"><\/div><div class="info-balloon"><div class="info-balloon-arrow"><\/div><div class="left text-paragraph pad-top large">'+f+'<\/div><div class="close"><span class="sprite close-blu"><\/span><\/div><\/div>');jQuery("#EAHelp .text-paragraph").css("overflowX","hidden");jQuery("#EAHelp .text-paragraph").css("overflow-x","hidden");jQuery("#EAHelp .text-paragraph").css("overflowY","auto");jQuery("#EAHelp .text-paragraph").css("overflow-y","auto");jQuery("#EAHelp, #EAHelp .text-paragraph").hover(function(){jQuery("#EAHelp").stop(!0).css({opacity:1}).show()},function(){jQuery("#EAHelp").html();jQuery("#EAHelp").delay(3e3).fadeOut()});jQuery("#EAHelp .info-balloon .close").click(function(){return jQuery("#EAHelp").html(),jQuery("#EAHelp").hide(),!1});jQuery("#EAHelp").css({position:"absolute",top:t-15+"px",left:i+"px"});r=jQuery("#EAHelp .info-balloon");u=jQuery("#EAHelp .info-balloon-shadow");r.show();jQuery("#EAHelp").show();jQuery("#EAHelp .info-balloon .info-balloon-arrow").css("display","block");jQuery("#EAHelp .info-balloon .info-balloon-arrow").show();u.width(r.outerWidth());u.height(r.outerHeight());u.show()}function openHelp(n,t){var u=0,f=0,r=jQuery("#"+t[1]);r.length>0&&(u=r.offset().top,f=r.offset().left);var e=n.dialogTop+u,o=n.dialogLeft+f,i=n.dialogContent,s=n.dialogPath;if(s!=""&&i==""){jQuery.support.cors=!0;jQuery.ajax({cache:!1,type:"GET",async:!1,jsonpCallback:"jsonCallback",url:s,dataType:"jsonp",contentType:"application/json",success:function(n){i=n.html;showHelp(i,e,o)},error:function(n,t,i){console.log("getBasePortaleCustomerHtmlPage ErrorText: "+t);console.log("getBasePortaleCustomerHtmlPage thrownError: "+i)}});function h(n){console.log("jsonCallback; "+n)}}else showHelp(i,e,o)}function hideHelp(){return jQuery("#EAHelp").length>0&&(jQuery("#EAHelp").html(),jQuery("#EAHelp").delay(3e3).fadeOut()),!1}function setDialogPosition(n,t){var s=jQuery(window).height(),h=jQuery(window).width(),f="auto",e="auto",r,o,i,u;jQuery("#EADialog").css({visibility:"hidden",display:"block"});jQuery("#EADialogContent").css({position:"absolute",visibility:"hidden",display:"block"});n!="auto"&&(f=n+"px");t!="auto"&&(e=t+"px");jQuery("#EADialogContent").css({height:f,width:e});r=40;o=80;n=="auto"&&(n=dialogGetHeight()+r+o);t=="auto"&&(t=dialogGetWidth());jQuery("#EADialogTitle").css("width",t+"px");i=(s-n)/2;u=(h-t)/2;i<0&&(i=0);jQuery("#EADialogContent").css({position:"absolute",left:u+"px",width:t+"px",top:jQuery(window).scrollTop()+i+r+"px"});jQuery("#EADialogTitle").css({position:"absolute",left:u+"px",top:jQuery(window).scrollTop()+i+"px"});jQuery("#EADialog").css({position:"",visibility:"",display:""});jQuery("#EADialogContent").css({position:"",visibility:"",display:""})}function dialogGetWidth(){var n=0,t=jQuery("#EADialogContent").width();return jQuery("#EADialogContent").children().each(function(){var i=jQuery(this),t=i.width();t>n&&(n=t)}),t>n&&(n=t),n}function dialogGetHeight(){var n=0,t=jQuery("#EADialogContent").height();return jQuery("#EADialogContent").children().each(function(){var i=jQuery(this),t=i.height();t>n&&(n=t)}),t>n&&(n=t),n}function baseOpenDialog(n,t,i,r,u){if(jQuery("#EADialog").length==0){var f="";f+='<div id="EADialog">';f+='<div id="EADialogBack"><\/div>';f+='<div id="EADialogTitle"><span><\/span><img id="EADialogClose" src="/_layouts/15/ea/web/images/popup-close.png"  alt="" /><\/div>';f+='<div id="EADialogContent">';f+='\t<img src="/_layouts/15/ea/web/images/ajax-loader-site.gif" alt="" />';f+="<\/div>";f+="<\/div>";jQuery("body").append(f)}if(showLoader(),n.length>0?(jQuery("#EADialogTitle span").text(n),jQuery("#EADialogClose").attr("onclick","").unbind("click"),jQuery("#EADialogClose").click(function(){hideDialog()})):jQuery("#EADialogTitle").hide(),u!=""&&t==""){jQuery.support.cors=!0;jQuery.ajax({cache:!1,type:"GET",async:!1,jsonpCallback:"jsonCallback",url:u,dataType:"jsonp",contentType:"application/json",success:function(n){return jQuery("#EADialogContent").html(n.html),jQuery("#EADialogContent .button").hide(),setDialogPosition(i,r),hideLoader(),jQuery("#EADialog").trigger("EADialogOpen"),jQuery("#EADialog").show(),jQuery("#EADialogContent .button").show(),!1},error:function(n,t,i){console.log("getPortaleCustomerHtmlPage ErrorText: "+t);console.log("getPortaleCustomerHtmlPage thrownError: "+i)}});function e(n){console.log("jsonCallback; "+n)}}else return jQuery("#EADialogContent").html(t),jQuery("#EADialogContent .button").hide(),setDialogPosition(i,r),hideLoader(),jQuery("#EADialog").trigger("EADialogOpen"),jQuery("#EADialog").show(),jQuery("#EADialogContent .button").show(),!1}function baseHideDialog(){return jQuery("#EADialog").trigger("EADialogClose"),jQuery("#EADialogContent").html(""),jQuery("#EADialog").hide(),!1}function openDialog(n){var t=n.dialogTitle,i=n.dialogContent,r=n.dialogHeight,u=n.dialogWidth,f=n.dialogUrl;baseOpenDialog(t,i,r,u,f)}function hideDialog(){baseHideDialog()}function goToPreviousSPPage(){history.go(-1)}function topRedirect(n){document.location.href=n.url}function moveScrollbarTo(n,t){var i=0,r=jQuery("#"+t[1]);r.length>0&&(i=r.offset().top);jQuery("html, body").animate({scrollTop:n.elementTop+i},1500)}function refreshPage(){location.reload()}function liveChatWidget(n){var t=n.n,i=n.t,r=n.i;liveChatWidget(t,i,r)}function writeLiveChatId(n){var t=n.chatID;document.cookie="LiveChatId="+t+";domain=.europassistance.it;path=/"}function CheckPositionAndQQ(n,t,i){var f=localStorage.getItem(t)==null?!0:!1,r,u;f?(r=jQuery(window).scrollTop(),u=n-r,u<4&&readUserCookie(i)==""&&(localStorage.setItem(t,!0),EAModalDialog.saveQuotation())):jQuery("#loginPopup").parent().parent().find(".close").click(function(){localStorage.removeItem("QuickQuotation")})}function GetPositioningForIframe(n){CheckPositionAndQQ(n.top,"QuickQuotation","UserId")}function ManipulateSPHtml(params){return eval(params.script)}var customSP={PM:{_debug:!1,Receiver:function(n){var u,i,t,o;if(!(n.data.length>1500)&&(u=RegExp(/(<\s*[Mm]essage\s+[Ss]ender[Ii]d\s*=\s*([\dAaBbCcDdEdFf]{8})(\d{1,3})\s*>(.*)<\/\s*[Mm]essage\s*>)/),i=u.exec(n.data),i!=null)&&(t=i[3],!(t>=spAppIFrameSenderInfo.length))){var c=i[2]+t,l=unescape(spAppIFrameSenderInfo[t][1]),a=unescape(spAppIFrameSenderInfo[t][2]),s=i[4],f=jQuery.parseJSON(s);try{var h="customSP.PM.Personal."+f.functionName,e=h.split("."),r=window;for(o in e)r=r[e[o]];r!=undefined?r(f.params,spAppIFrameSenderInfo[t]):customSP.PM.Arch.sendMessage(n.data,spAppIFrameSenderInfo[t],!0)}catch(v){try{console.log("function is undefined")}catch(v){}}}},Personal:{},Arch:{sendMessage:function(n,t,r){var f,u;try{if(r)for(i=0;i<spAppIFrameSenderInfo.length;i++)t[1]!=spAppIFrameSenderInfo[i][1]&&(customSP.PM.Arch.isPostMessageSupported()?(f=document.getElementById(spAppIFrameSenderInfo[i][1]),f.contentWindow.postMessage(n,"*")):HashNS.postMessage(spAppIFrameSenderInfo[i][1],n)),customSP.PM.Arch.isPostMessageSupported()||i==spAppIFrameSenderInfo.length-1&&(u=document.getElementById("proxyAppExternal"),u.height=u.height=="0"?"1":"0");else customSP.PM.Arch.isPostMessageSupported()?(f=document.getElementById(t[1]),f.contentWindow.postMessage(n,"*")):(HashNS.postMessage(t[1],n),u=document.getElementById("proxyAppExternal"),u.height=u.height=="0"?"1":"0")}catch(e){try{console.log("error in sendMessage")}catch(e){}}},sendMessageSP:function(n,t,r){var f,u;try{if(t={},t[1]=evento!=null&&evento.length>0?jQuery(document.elementFromPoint(evento.clientX,evento.clientY-77)).attr("id"):jQuery("#s4-workspace iframe:first").attr("id"),r)for(i=0;i<spAppIFrameSenderInfo.length;i++)t[1]==spAppIFrameSenderInfo[i][1]&&(customSP.PM.Arch.isPostMessageSupported()?(f=document.getElementById(spAppIFrameSenderInfo[i][1]),f.contentWindow.postMessage(n,"*")):HashNS.postMessage(spAppIFrameSenderInfo[i][1],n)),customSP.PM.Arch.isPostMessageSupported()||i==spAppIFrameSenderInfo.length-1&&(u=document.getElementById("proxyAppExternal"),u.height=u.height=="0"?"1":"0");else customSP.PM.Arch.isPostMessageSupported()?(f=document.getElementById(t[1]),f.contentWindow.postMessage(n,"*")):(HashNS.postMessage(t[1],n),u=document.getElementById("proxyAppExternal"),u.height=u.height=="0"?"1":"0")}catch(e){try{console.log("error in sendMessage")}catch(e){}}},getObjectMessageFromString:function(n,t){var i=customSP.PM.Arch.getObjectMessageFromProp(n,t),r=jQuery.toJSON(i);return"<Message senderId=000000000 >"+r+"<\/Message>"},getObjectMessageFromProp:function(n,t){return{functionName:n,params:t}},init:function(){this.eventBind()},eventBind:function(){typeof addEventListener!=typeof undefined?window.addEventListener("message",customSP.PM.Receiver,!1):typeof attachEvent!=typeof undefined&&window.attachEvent("onmessage",customSP.PM.Receiver)},addFunctionToPersonal:function(n){try{var i=RegExp(/\W*function\s+([\w\$]+)\(/),t=i.exec(n.toString())[1];if(typeof customSP.PM.Personal[t]==typeof undefined)customSP.PM.Personal[t]=n;else try{customSP.PM._debug&&console.log("Error in addFunctionToPersonal: "+t+"already exist in namespace.")}catch(r){}}catch(r){try{customSP.PM._debug&&console.log("Error in addFunctionToPersonal")}catch(r){}}},isPostMessageSupported:function(){return!!window.postMessage}}}},EAPortal,HashNS;customSP.PM.Arch.init();EAPortal={Register:customSP.PM.Arch.addFunctionToPersonal,GetMessage:customSP.PM.Arch.getObjectMessageFromString,Fire:customSP.PM.Arch.sendMessage,FireSP:customSP.PM.Arch.sendMessageSP};HashNS={PREFIX:"#hm=",aCallbacks:[],sLastHash:"",postMessage:function(n,t){"string"==typeof n&&(n=document.getElementById(n));var i=window.frames.proxyAppExternal;i.location=spAppIFrameSenderInfo[0][2]+HashNS.PREFIX+encodeURIComponent(t)},handleInterval:function(n){if(n.location!==undefined){var i=n.location.hash,r,u,t;if(i!==HashNS.sLastHash&&(r=decodeURIComponent(i),0===r.indexOf(HashNS.PREFIX)))for(u=r.replace(HashNS.PREFIX,""),HashNS.sLastHash=i,t=HashNS.aCallbacks.length-1;t>=0;t-=1)HashNS.aCallbacks[t]({data:u})}},init:function(){customSP.PM.Arch.isPostMessageSupported()||jQuery(document).ready(function(){var t,n,i;if(typeof spAppIFrameSenderInfo!=typeof undefined)for(t=spAppIFrameSenderInfo[0][2],jQuery("body").append('<iframe id="proxyAppExternal"  name="proxyAppExternal" src="'+t+'" style="visibility: hidden;" width="0" height="0"><\/iframe>'),n=0;n<spAppIFrameSenderInfo.length;n++)i=""+spAppIFrameSenderInfo[n][1],jQuery("#"+i).load(function(){var n=new hashHandler(this.contentWindow.frames.proxyContainer,function(n){HashNS.handleInterval(n)})});HashNS.onMessage(customSP.PM.Receiver)})},onMessage:function(n){HashNS.aCallbacks.push(n)}};HashNS.init();EAPortal.Register(changeSize);jQuery.maxZIndex=jQuery.fn.maxZIndex=function(n){var i={inc:10,group:"*"},t;return(jQuery.extend(i,n),t=0,jQuery(i.group).each(function(){var n=parseInt(jQuery(this).css("z-index"));t=n>t?n:t}),!this.jquery)?t:this.each(function(){t+=i.inc;jQuery(this).css("z-index",t)})};EAPortal.Register(showLoader);EAPortal.Register(showLoaderMobile);EAPortal.Register(hideLoader);EAPortal.Register(openHelp);EAPortal.Register(hideHelp);EAPortal.Register(openDialog);EAPortal.Register(hideDialog);EAPortal.Register(goToPreviousSPPage);EAPortal.Register(topRedirect);EAPortal.Register(moveScrollbarTo);EAPortal.Register(refreshPage);EAPortal.Register(liveChatWidget);EAPortal.Register(writeLiveChatId);EAPortal.Register(GetPositioningForIframe);EAPortal.Register(ManipulateSPHtml);