(window.webpackJsonp=window.webpackJsonp||[]).push([["threadview-utv"],{"+a0K":function(e,t){function n(e,t){return e===t||e!=e&&t!=t}e.exports=n},"/Dz0":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));var r=n("Ut5p"),a=n("wwi/"),i=Object(r.b)(a.g);function o(){return function(e){e(i())}}},"/EZN":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=["video/*","audio/*","application/json","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/msword","application/pdf","application/zip","application/x-zip","application/x-zip-compressed","application/x-7z-compressed","application/gzip","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/postscript","image/gif","image/jpeg","image/jpg","image/png","image/tiff","text/calendar","text/css","text/csv","text/plain","text/xml"]},"/Maw":function(e,t,n){"use strict";var r=n("FGh+"),a=n("QgEn"),i=n("VfuR"),o=n.n(i),s=n("9f1P"),c=n.n(s),u=n("NrIs"),d="default",l="on-dark",p=n("yN1k"),b=n("0wDu"),h=n("iKGd"),f=b.a,m=b.b,g=b.g,j=b.h,O=function(){return h.o},v=function(e){var t=e.theme;switch(e.use){case l:return Object(s.css)(["background-color:",";"],O(t));case d:default:return null}},x=function(e){var t=e.theme;return Object(s.css)(["cursor:not-allowed;background-color:",";"],f(t))},y=function(e){var t=e.theme;return Object(s.css)(["color:",";cursor:not-allowed;&::after{color:",";}"],m(t),m(t))},C=c.a.input.withConfig({displayName:"VizExInput__StyledTextInput",componentId:"t3euf1-0"})(["",";height:100%;width:100%;line-height:22px;font-size:16px;padding-left:10px;padding-right:10px;border:none;border-radius:3px;background:transparent;",";:focus{outline:none;}::placeholder{color:",";}"],p.a,(function(e){return e.disabled&&y(e)}),(function(e){var t=e.theme;return g(t)})),w=c.a.div.withConfig({displayName:"VizExInput__InputContainer",componentId:"t3euf1-1"})(["height:42px;line-height:22px;font-size:16px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border:1px solid;border-color:",";background-color:",";:focus-within{border-color:",";}border-radius:3px;"," ",";"],(function(e){var t=e.theme;return e.focus?j(t):Object(b.f)(t)}),(function(e){var t=e.theme;return Object(b.e)(t)}),(function(e){var t=e.theme;return j(t)}),v,(function(e){return e.disabled&&x(e)})),k=function(e){var t=e.suffix,n=e.prefix,i=e.disabled,o=e.placeholder,s=e.value,c=e.onChange,u=e.containerStyles,d=e.theme,l=e.use,p=e.focus,b=Object(r.a)(e,["suffix","prefix","disabled","placeholder","value","onChange","containerStyles","theme","use","focus"]);return Object(a.jsxs)(w,{disabled:i,style:u,theme:d,use:l,focus:p,"data-testid":"VizExInput-Container",children:[n,Object(a.jsx)(C,Object.assign({"aria-disabled":i,disabled:i,placeholder:o,value:s,onChange:c,theme:d,use:l,"data-testid":"VizExInput-Input"},b)),t]})};k.displayName="VizExInput";k.defaultProps={placeholder:""};k.propTypes={containerStyles:o.a.object,disabled:o.a.bool,focus:o.a.bool,onChange:o.a.func,onInput:o.a.func,placeholder:o.a.string,prefix:o.a.node,suffix:o.a.node,theme:u.a,use:o.a.oneOfType([d,l]),value:o.a.string};t.a=k},"/TWJ":function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},"/rM/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("/OK6"),a=n("Cblj"),i=function(e){return Object(a.isTypingMessage)(e)&&Object(r.isFromVisitor)(e)}},"0IL2":function(e,t,n){"use strict";var r=n("HElP"),a=n("QgEn"),i=n("VfuR"),o=n.n(i),s=n("Ktcs"),c=n("9f1P"),u=n.n(c),d=n("Umjh"),l=n("VdXU"),p=n("sl/w"),b=n("eP/i"),h=n("qCVG"),f=n("gFbD"),m=n("fzij"),g=u.a.div.withConfig({displayName:"ConsentPrompt__Container",componentId:"sc-16phw93-0"})(["border-top:2px solid ",";display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;"],b.f),j=u()(m.a).withConfig({displayName:"ConsentPrompt__SmallNoParagraphPadding",componentId:"sc-16phw93-1"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),O=u()(l.a).withConfig({displayName:"ConsentPrompt__FullWidthButton",componentId:"sc-16phw93-2"})(["flex:0 1 100%;"]),v=u.a.div.withConfig({displayName:"ConsentPrompt__FlexWrapper",componentId:"sc-16phw93-3"})(["display:flex;flex-direction:row;width:100%;margin:12px 0 8px 0;"]),x=function(e){var t=e.message,n=e.onClick,i=e.showButton,o=Object(s.useState)(!1),c=Object(r.a)(o,2),u=c[0],l=c[1],b=function(){n();l(!0)};return Object(a.jsxs)(g,{"data-test-id":"gdpr-consent-prompt",children:[Object(a.jsx)(j,{use:"help","data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(h.a)(t)}}),Object(a.jsx)(v,{children:i&&Object(a.jsx)(d.a,{currentState:u?"submitting":"ready",Button:O,"data-test-id":"gdpr-consent-agree-button",onClick:b,children:Object(a.jsx)(f.a,{children:function(e){return Object(a.jsx)(p.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:e}})}})})})]})};x.propTypes={message:o.a.string.isRequired,onClick:o.a.func.isRequired,showButton:o.a.bool.isRequired};x.displayName="ConsentPrompt";t.a=x},"0wen":function(e,t,n){"use strict";n.r(t);n.d(t,"PRIMARY",(function(){return r}));n.d(t,"SECONDARY",(function(){return a}));n.d(t,"TRANSPARENT_ON_PRIMARY",(function(){return i}));var r="primary",a="secondary",i="transparent-on-primary"},"1HZx":function(e,t,n){"use strict";var r=n("HElP"),a=n("QgEn"),i=n("Ktcs"),o=n.n(i),s=n("OwpT"),c=n.n(s),u=n("A3yT"),d=n("xYYH"),l=n("mKxs"),p=n("nEWr"),b=n("npjq"),h=n("QYOI"),f=n("VfuR"),m=n.n(f),g=n("9f1P"),j=n.n(g),O=n("SYgn"),v=n.n(O),x=n("5Enb"),y=n("edeU"),C=n("+eZO"),w=n("LpN+"),k=n("g05V"),T=j.a.div.withConfig({displayName:"MessageComposer__FullWidth",componentId:"sc-62c3xg-0"})(["width:100%;"]),I=j.a.div.withConfig({displayName:"MessageComposer__InputWrapper",componentId:"sc-62c3xg-1"})(["display:flex;width:100%;align-items:center;justify-content:space-between;flex-wrap:nowrap;"]),S=function(e){Object(k.a)(t,e);function t(){Object(x.a)(this,t);return Object(C.a)(this,Object(w.a)(t).apply(this,arguments))}Object(y.a)(t,[{key:"render",value:function(){var e="input-container m-bottom-2"+(this.props.showingHsBranding?"":" no-branding");return Object(a.jsxs)("div",{className:e,children:[this.props.FileUploads&&Object(a.jsx)(T,{children:this.props.FileUploads}),Object(a.jsxs)(I,{children:[this.props.inputToRender,this.props.children&&Object(a.jsx)("div",{className:"display-flex flex-row m-left-1 no-shrink",children:this.props.children})]})]})}}]);return t}(i.Component);S.propTypes={FileUploads:m.a.node,children:m.a.node,inputToRender:m.a.node.isRequired,showingHsBranding:m.a.bool};S.defaultProps={FileUploads:null,showingHsBranding:!1};S.displayName="MessageComposer";var R=S,A=n("iu1j"),P=Object(i.createContext)(void 0),M=P.Consumer,E=(P.Provider,n("FGh+")),N=function(e){Object(i.useEffect)((function(){var t=function(t){if(e(t)){t.stopPropagation();t.preventDefault()}};document.addEventListener("touchmove",t,{passive:!1});return function(){document.removeEventListener("touchmove",t)}}),[e])},_=function(){},q=function(e){var t=Object(i.forwardRef)((function(t,n){var o=t.onBlur,s=t.onFocus,c=Object(E.a)(t,["onBlur","onFocus"]),u=n||Object(i.useRef)(),d=Object(i.useState)(null),l=Object(r.a)(d,2),p=l[0],b=l[1];N((function(e){if(p&&e.target!==p){u.current&&u.current.blur();b(null);return!1}return Boolean(p)}));var h=function(e){b(null);o(e)},f=function(e){e.target&&b(e.target);s(e)};return Object(a.jsx)(e,Object.assign({},c,{ref:u,onFocus:f,onBlur:h}))}));t.propTypes={onBlur:m.a.func,onFocus:m.a.func};t.defaultProps={onBlur:_,onFocus:_};t.displayName="Component";return t};q.propTypes={onBlur:m.a.func.isRequired,onFocus:m.a.func.isRequired};var F=q,L=n("NrIs"),B=n("fzij"),D=j.a.div.withConfig({displayName:"VizExFormControl__FormControlWrapper",componentId:"sc-5a4igp-0"})(["width:100%;flex-basis:100%;"]),z=function(e){Object(k.a)(t,e);function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];(n=Object(C.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(a)))).getChildProps=function(e){var t=e.ariaLabel,n=e.newError,r=e.newRequired,a=e.validationMessage,i=e.fallbackId,o={"aria-label":t,required:r,"aria-invalid":n,"aria-required":r,ref:e.ref};i&&(o.id=i);n&&(o.error=a);return o};return n}Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e["aria-label"],n=e.error,r=e.validationMessage,i=e.required,o=e.theme,s=e.children,c=Object(E.a)(e,["aria-label","error","validationMessage","required","theme","children"]),u=s(Object.assign({},this.getChildProps({ariaLabel:t,newError:n,newRequired:i,validationMessage:r})));return Object(a.jsxs)(D,Object.assign({},c,{children:[u,r?Object(a.jsx)(B.a,{use:n?"error":"default",theme:o,children:r}):null]}))}}]);return t}(i.Component);z.displayName="VizExFormControl";z.propTypes={"aria-label":m.a.string,children:m.a.func.isRequired,error:m.a.bool,required:m.a.bool.isRequired,theme:L.a,validationMessage:m.a.node};z.defaultProps={error:!1,required:!1};var U=z,V=n("8Q5G"),H=n("0wDu"),Q=H.f,W=H.e,G=H.c,Y=H.a,J=H.b,K=H.g,Z="unstyled",X="default",$=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},ee=window.navigator?navigator.userAgent.toLowerCase():"",te=function(){return ee.includes("trident/")},ne=function(e){return""===e.trim()||"<br />"===e.trim()||"<br>"===e.trim()||"<br/>"===e.trim()},re=function(){return Object(g.css)(["outline:none;"])},ae=function(e){var t=e.use,n=e.theme;switch(t){case Z:return Object(g.css)(["border:none;background-color:transparent;"]);case X:default:return Object(g.css)(["border:2px solid;border-color:",";background-color:",";"],Q(n),W(n))}},ie=function(e){var t=e.theme;return Object(g.css)(["cursor:not-allowed;background-color:",";color:",";&[contenteditable][placeholder]:empty::after{color:",";cursor:not-allowed;}"],Y(t),J(t),J(t))},oe=function(e){var t=e.theme;return Object(g.css)(["border:2px solid;border-color:",";"],G(t))},se=j.a.div.withConfig({displayName:"VizExExpandingInput__StyledInput",componentId:"sc-5j9y6d-0"})(["border-radius:3px;font-size:16px;line-height:22px;min-height:40px;max-height:",";overflow-x:hidden;overflow-y:auto;padding:8px;position:relative;width:100%;flex-basis:100%;word-break:break-word;cursor:text;",";",";@supports (-webkit-touch-callout:none){cursor:pointer;}&[contenteditable][placeholder]:empty{overflow-y:hidden;}&[contenteditable][placeholder]:empty::after{display:block;content:attr(placeholder);position:relative;color:",";background-color:transparent;cursor:text;user-select:none;font-size:16px;line-height:22px;height:22px;}@media all and (-ms-high-contrast:none){&[contenteditable][placeholder]:empty::after{position:absolute;top:50%;transform:translateY(-50%);}}:focus{",";}",";",";"],(function(e){var t=e.maxHeight;return"number"==typeof t?t+"px":t||"150px"}),(function(e){return e.focus&&re()}),ae,(function(e){var t=e.theme;return K(t)}),re,(function(e){return e.disabled&&ie(e)}),(function(e){return e.error&&oe(e)})),ce=Object(i.forwardRef)((function(e,t){var n=t||Object(i.useRef)(),r=e.onInput,o=e.placeholder,s=e.onChange,c=e.value,u=e.maxHeight,d=e.disabled,l=e.shouldAutofocus,p=e.onPaste,b=Object(E.a)(e,["onInput","placeholder","onChange","value","maxHeight","disabled","shouldAutofocus","onPaste"]),h=function(e){e.persist();if(n.current.innerHTML&&ne(n.current.innerHTML)){n.current.innerHTML="";e.target.innerText=""}e.target.value=e.target.innerText;for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];V.a.apply(void 0,[s,e].concat(a));V.a.apply(void 0,[r,e].concat(a))},f=function(e){e.preventDefault();Object(V.a)(p,e);if(!e.clipboardData.files||!e.clipboardData.files[0]){var t;try{t=e.clipboardData.getData("text/plain")}catch(n){t=$(e.clipboardData.getData("text"))}document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t)}};Object(i.useLayoutEffect)((function(){null!=c&&c!==n.current.innerText&&(n.current.innerText=c)}),[n,c]);Object(i.useEffect)((function(){l&&n&&n.current&&n.current.focus()}),[]);var m=te()?{onKeyUp:h}:{onInput:h};return Object(a.jsx)(se,Object.assign({},b,{ref:n,placeholder:o},m,{onPaste:f,contentEditable:!d,maxHeight:u,disabled:d,"aria-disabled":d,"data-testid":"VizExExpandingInput"}))}));ce.displayName="VizExExpandingInput";ce.propTypes={disabled:m.a.bool,error:m.a.bool,maxHeight:m.a.number,onChange:m.a.func,onInput:m.a.func,onPaste:m.a.func,placeholder:m.a.string,shouldAutofocus:m.a.bool,theme:L.a,use:m.a.oneOf([Z,X]),value:m.a.string};var ue=function(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},de=F(ce),le=o.a.forwardRef((function(e,t){var n=e.disabled,r=e.error,i=e.messageText,o=e.onChange,s=e.onInputBlur,c=e.onInputFocus,u=e.onKeyDown,d=e.validationMessage,l=e.showQuickReplyPlaceholder,p=e.onPaste;return Object(a.jsx)(M,{children:function(e){return Object(a.jsx)(U,{"aria-label":b.a.text(l?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:e}),validationMessage:d,error:r,required:!0,children:function(d){return Object(a.jsx)(de,Object.assign({},d,{use:"unstyled",error:r,className:"widget-textarea message-box","data-test-id":"widget-textarea",tabIndex:"0",ref:t,maxHeight:100,placeholder:b.a.text(l?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:e}),disabled:n,onChange:o,onKeyDown:u,value:i,onFocus:c,onBlur:s,onPaste:p,shouldAutofocus:!ue()}))}})}})}));le.propTypes={disabled:m.a.bool.isRequired,error:m.a.bool.isRequired,messageText:m.a.string.isRequired,onChange:m.a.func.isRequired,onInputBlur:m.a.func,onInputFocus:m.a.func,onKeyDown:m.a.func.isRequired,onPaste:m.a.func,showQuickReplyPlaceholder:m.a.bool.isRequired,validationMessage:m.a.string.isRequired};le.displayName="TextInput";var pe=le,be=n("sl/w"),he=n("r1tY"),fe=n.n(he),me=n("A5YI"),ge=["left","right"],je=["top","bottom"],Oe=ge.concat(je).concat(["left top","left bottom","right top","right bottom","top left","top right","bottom left","bottom right","top center","bottom center","left middle","right middle"]);function ve(e){return e.split(" ")[0]}function xe(e){return ge.includes(e)}function ye(e){var t=e.split(" ")[1];return t||(xe(ve(e))?"middle":"center")}var Ce=16,we=8,ke=function(e){switch(ve(e.placement)){case"top":return Object(g.css)(["transform:rotate(45deg);top:-","px;"],Ce+5);case"right":return Object(g.css)(["transform:rotate(135deg);right:-","px;"],Ce+5);case"bottom":return Object(g.css)(["transform:rotate(-135deg);bottom:-","px;"],Ce+5);case"left":return Object(g.css)(["transform:rotate(-45deg);left:-","px;"],Ce+5);default:return""}},Te=function(e){switch(ye(e.placement)){case"top":return Object(g.css)(["top:","px;"],we);case"middle":return Object(g.css)(["top:calc(50% - ","px);"],Ce/2);case"bottom":return Object(g.css)(["bottom:","px;"],we);case"left":return Object(g.css)(["left:","px;"],we);case"center":return Object(g.css)(["left:calc(50% - ","px);"],Ce/2);case"right":return Object(g.css)(["right:","px;"],we);default:return""}},Ie=function(e){var t=e.placement;return Object(g.css)(["",";",";"],ke({placement:t}),Te({placement:t}))},Se=n("iKGd"),Re="#425b76",Ae=function(){return Re},Pe=function(){return Se.o},Me=j.a.div.withConfig({displayName:"VizExTooltipArrow",componentId:"fb67um-0"})(["position:absolute;pointer-events:none;border:none;clip-path:polygon(100% 100%,0 100%,100% 0);border-top-left-radius:100%;border-radius:3px;border-top-color:transparent !important;border-left-color:transparent !important;border-bottom-right-radius:3px;width:16px;height:16px;background-color:",";",""],(function(e){var t=e.theme;return Ae(t)}),Ie),Ee=16,Ne=function(e){switch(ye(e.placement)){case"top":return Object(g.css)(["top:0;"]);case"bottom":return Object(g.css)(["bottom:0;"]);case"left":return Object(g.css)(["left:0;"]);case"right":return Object(g.css)(["right:0;"]);default:return""}},_e=function(e){switch(ve(e.placement)){case"top":return Object(g.css)(["transform:translateY(-100%);top:-","px;"],Ee-5);case"right":return Object(g.css)(["transform:translateX(100%);right:-","px;"],Ee-5);case"bottom":return Object(g.css)(["transform:translateY(100%);bottom:-","px;"],Ee-5);case"left":return Object(g.css)(["transform:translateX(-100%);left:-","px;"],Ee-5);default:return""}},qe=function(e){switch(e.placement){case"top center":case"top middle":return Object(g.css)(["transform:translate(-50%,-100%);left:50%;"]);case"bottom middle":case"bottom center":return Object(g.css)(["transform:translate(-50%,100%);left:50%;"]);case"left center":case"left middle":return Object(g.css)(["transform:translate(-100%,-50%);top:50%;"]);case"right center":case"right middle":return Object(g.css)(["transform:translate(100%,-50%);top:50%;"]);default:return""}},Fe=function(e){var t=e.placement;return Object(g.css)(["",";",";",""],_e({placement:t}),Ne({placement:t}),qe({placement:t}))},Le=j.a.div.withConfig({displayName:"VizExTooltipBody",componentId:"s6vq9q-0"})(["border-radius:3px;font-size:13px;max-width:232px;display:block;position:absolute;visibility:visible;box-shadow:0 3px 8px rgba(0,0,0,0.1);line-height:1.5;padding:10px 16px;text-decoration:none;word-wrap:break-word;",";white-space:nowrap;background-color:",";color:",";pointer-events:",";"],Fe,(function(e){var t=e.theme;return Ae(t)}),(function(e){var t=e.theme;return Pe(t)}),(function(e){return e.open?"all":"none"})),Be=j.a.div.withConfig({displayName:"VizExTooltip__Popover",componentId:"sc-1180gsc-0"})(["transition-property:",";transition-duration:","ms;opacity:",";transform:",";position:absolute;pointer-events:none;width:100%;height:100%;"],(function(e){return e.transitioning?"opacity ease-out, transform ease-out":"none"}),(function(e){return e.duration}),(function(e){return e.open?"1":"0"}),(function(e){var t=e.open,n=e.transitioning;return t&&!n?"none":t?"scale(1)":"scale(.75)"})),De=j.a.div.withConfig({displayName:"VizExTooltip__PopoverWrapper",componentId:"sc-1180gsc-1"})(["display:inline-block;position:relative;"]),ze=function(e){var t=e.content,n=e.backgroundColor,o=e.textColor,s=e.placement,c=e.children,u=e.theme,d=e.onOpenChange,l=e.open,p=Object(E.a)(e,["content","backgroundColor","textColor","placement","children","theme","onOpenChange","open"]),b=Object(i.useState)(!1),h=Object(r.a)(b,2),f=h[0],m=h[1];if(!t)return c;var g="boolean"==typeof l,j=function(){if(!g){Object(V.a)(d,!0);m(!0)}},O=function(){if(!g){Object(V.a)(d,!1);m(!1)}},v=g?l:f;return Object(a.jsxs)(De,Object.assign({},p,{onMouseEnter:j,onMouseLeave:O,children:[Object(a.jsxs)(Be,{open:v,duration:250,transitioning:!0,children:[Object(a.jsx)(Le,{textColor:o,backgroundColor:n,placement:s,open:v,theme:u,"data-test-open":v,children:t}),Object(a.jsx)(Me,{backgroundColor:n,placement:s,theme:u})]}),c]}))};ze.propTypes={backgroundColor:m.a.string,children:m.a.node,content:m.a.node,onOpenChange:m.a.func,open:m.a.bool,placement:m.a.oneOf(Oe),textColor:m.a.string,theme:L.a};ze.displayName="VizExTooltip";ze.defaultProps={placement:"top right"};var Ue=ze,Ve=n("7LhL"),He=n("tOFb"),Qe=j.a.input.withConfig({displayName:"AttachmentPickerButton__HiddenInput",componentId:"sc-1q5rf25-0"})(["display:none;"]),We=function(e){Object(k.a)(t,e);function t(e){var n;Object(x.a)(this,t);(n=Object(C.a)(this,Object(w.a)(t).call(this,e))).inputRefCallback=function(e){n.inputRef=e};n.findInputNode=function(){return n.inputRef?fe.a.findDOMNode(n.inputRef):null};n.clearInputNode=function(){var e=n.findInputNode();e&&(e.value="")};n.handlePickerClick=function(e){var t=n.findInputNode();t&&t.click();n.props.onClick(e)};n.onInputChange=function(e){var t=e.target.files;n.props.onSelectFiles({files:t});n.clearInputNode()};n.renderMaxFileSizeTooltip=function(){if(!n.props.mobile)return Object(a.jsx)(be.a,{message:"conversations-visitor-ui.fileSizeLimit",options:{size:b.a.formatSize(n.props.maxAttachmentFileSize)}})};n.inputRef=null;return n}Object(y.a)(t,[{key:"render",value:function(){var e=this.props.disabled;return Object(a.jsxs)(i.Fragment,{children:[Object(a.jsx)(Ue,{content:this.renderMaxFileSizeTooltip(),placement:"top center",children:Object(a.jsx)(me.a,{disabled:e,onClick:this.handlePickerClick,use:"transparent-on-background","aria-label":b.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.attachment"),shape:"circle","data-testid":"AttachmentPickerButton-VizExIconButton",children:Object(a.jsx)(Ve.a,{icon:Object(a.jsx)(He.a,{})})})}),Object(a.jsx)(Qe,{accept:this.props.accept.join(","),"data-selenium-test":"visitor-attachment-file-input","data-testid":"AttachmentPickerButton-input",disabled:this.props.disabled,ref:this.inputRefCallback,type:"file",multiple:this.props.allowMultiple,onChange:this.onInputChange})]})}}]);return t}(i.PureComponent);We.displayName="AttachmentPickerButton";We.propTypes={accept:m.a.arrayOf(m.a.string).isRequired,allowMultiple:m.a.bool.isRequired,disabled:m.a.bool,maxAttachmentFileSize:m.a.number.isRequired,mobile:m.a.bool,onClick:m.a.func,onSelectFiles:m.a.func.isRequired};We.defaultProps={accept:[],allowMultiple:!1,onClick:function(){}};var Ge=We,Ye=n("Fjoq"),Je=n("/EZN"),Ke=n("Xs/R"),Ze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Xe="(?:"+Object.keys(Ze).join("|")+")",$e=RegExp(Xe),et=RegExp(Xe,"g");function tt(e){e=null==e?"":""+e;return $e.test(e)?e.replace(et,(function(e){return Ze[e]})):e}var nt=13,rt=j.a.div.withConfig({displayName:"MessageEditor__FileUploadWrapper",componentId:"sc-142mntr-0"})(["display:flex;overflow:auto;& > *:not(:last-child){margin-right:8px;}"]),at=!1,it=Object(i.forwardRef)((function(e,t){var n=e.canUploadAttachments,o=e.chatInputChanged,s=e.coloring,l=e.disablePublish,h=e.disabled,f=e.fileTypes,m=e.inputStaging,g=e.maxAttachmentFileSize,j=e.mobile,O=e.networkOffline,x=e.onAttachmentButtonClick,y=e.onRemoveAttachment,C=e.onSelectAttachmentFiles,w=e.publishMessage,k=e.shouldHideAttachmentButton,T=e.shouldSendInputStagingEvent,I=e.showQuickReplyPlaceholder,S=e.showingHsBranding,P=e.stagedAttachments,M=e.stagedMessageEditorText,E=e.supportsAttachments,N=e.toggleOnAndOffInputFocus,_=Object(i.useState)(M||""),q=Object(r.a)(_,2),F=q[0],L=q[1],B=t||Object(i.useRef)(),D=function(){B&&B.current&&B.current.focus()};Object(i.useEffect)((function(){!h&&B&&B.current&&B.current.focus()}),[B,h]);var z=function(){return F},U=function(){return z().length<p.a},V=function(){return P&&P.size},H=function(){return!P||P.every(d.isUploadCompleted)},Q=function(){var e=Boolean(z())&&""!==z().trim();return U()&&H()&&(e||V())},W=function(){return Q()&&!O&&!h&&!l},G=function(e){var t=e.target.value;L(t);T&&!t&&m(t,!0);o(t);if((h||l)&&!at){v.a.captureMessage("VISITOR_CAN_TYPE_WHILE_PUBLISH_DISABLED");at=!0}},Y=function(){if(W()){var e=z(),t="<div>"+c.a.link(tt(e),{stripPrefix:!1})+"</div>";w({text:e,richText:t});L("");m("",!0);D()}},J=function(e){if(e.keyCode===nt&&!1===e.shiftKey){Y();e.preventDefault();e.stopPropagation();return!1}return!0},K=function(){return U()?"":b.a.text("conversations-visitor-ui.chatTextArea.validationMessage")},Z=function(e){var t=e.files;C({files:t});D()},X=function(){h||N(!0)},$=function(){N(!1)},ee=function(e){e&&e.clipboardData&&e.clipboardData.files&&n&&C({files:e.clipboardData.files})},te=Object(a.jsx)(pe,{disabled:h||O||l,error:!U(),messageText:F,onChange:G,onKeyDown:J,showQuickReplyPlaceholder:I,ref:B,showingHsBranding:S,validationMessage:K(),onInputFocus:X,onInputBlur:$,onPaste:ee}),ne=V()?Object(a.jsx)(rt,{className:"m-bottom-2"+(S?" m-top-2":""),children:P.map((function(e){return Object(a.jsx)("div",{"data-testid":"MessageEditor-FileUploadItem",children:Object(a.jsx)(A.a,{attachment:e,onRemove:function(){y({attachment:e})}})},Object(u.getLocalId)(e))}))}):null,re=Object(Ye.c)(s)?null:Object(Ye.a)(s),ae=!W();return Object(a.jsx)(R,{inputToRender:te,FileUploads:ne,showingHsBranding:S,children:Object(a.jsxs)(i.Fragment,{children:[E&&!k?Object(a.jsx)("div",{className:j?"m-right-3":"",children:Object(a.jsx)(Ge,{accept:f,color:re,disabled:!n||h,mobile:j,onClick:x,onSelectFiles:Z,maxAttachmentFileSize:g})}):null,Object(a.jsx)(me.a,{className:"chat-send-button","data-test-id":"chat-send-button","data-testid":"MessageEditor-VizExIconButton",disabled:ae,shape:"circle",onClick:Y,use:"transparent-on-background","aria-label":b.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.send"),children:Object(a.jsx)(Ve.a,{icon:Object(a.jsx)(Ke.a,{})})})]})})}));it.propTypes={canUploadAttachments:m.a.bool.isRequired,chatInputChanged:m.a.func.isRequired,coloring:Object(l.a)("ColoringRecord"),disablePublish:m.a.bool.isRequired,disabled:m.a.bool.isRequired,fileTypes:m.a.arrayOf(m.a.string).isRequired,inputStaging:m.a.func.isRequired,maxAttachmentFileSize:m.a.number.isRequired,mobile:m.a.bool,networkOffline:m.a.bool.isRequired,onAttachmentButtonClick:m.a.func,onRemoveAttachment:m.a.func.isRequired,onSelectAttachmentFiles:m.a.func.isRequired,publishMessage:m.a.func.isRequired,shouldHideAttachmentButton:m.a.bool,shouldSendInputStagingEvent:m.a.bool.isRequired,showQuickReplyPlaceholder:m.a.bool.isRequired,showingHsBranding:m.a.bool,stagedAttachments:m.a.instanceOf(h.List),stagedMessageEditorText:m.a.string,supportsAttachments:m.a.bool.isRequired,toggleOnAndOffInputFocus:m.a.func};it.displayName="MessageEditor";it.defaultProps={isThreadStarted:!0,disablePublish:!1,onRemoveAttachment:function(){},onSelectAttachmentFiles:function(){},createNewThread:function(){},supportsAttachments:!1,fileTypes:Je.a,stagedAttachments:[],toggleOnAndOffInputFocus:function(){}};t.a=it},"2+Io":function(e,t,n){var r=n("pDio")(n("8i16"),"Map");e.exports=r},"2rNL":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="data-cv-message-history-id"},"31tl":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="WEB"},"3Egs":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return a}));n.d(t,"d",(function(){return i}));n.d(t,"c",(function(){return o}));var r="FIRST",a="FIRST_IN_GROUP",i="LAST_IN_GROUP",o="LAST"},"3FHW":function(e,t,n){var r=n("8X3F"),a=n("kmmH"),i="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";function u(e){if(!a(e))return!1;var t=r(e);return t==o||t==s||t==i||t==c}e.exports=u},"3OTY":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n.d(t,"c",(function(){return l}));n.d(t,"b",(function(){return p}));n.d(t,"d",(function(){return b}));var r=n("Ut5p"),a=n("wwi/"),i=n("tlSg"),o=n("k3iI"),s=n("E6wg"),c=n("NpZo"),u=n("081M"),d=Object(r.b)(a.a),l=Object(r.b)(a.c),p=Object(r.b)(a.b,(function(e){return{error:e}}));function b(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?function(e,t){var n=Object(s.getSessionId)(t()),r=Object(c.getSelectedThreadId)(t()),a=Object(u.getHubspotUtk)();e(d());var b=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sessionId;e(Object(o.updateSessionId)(t));e(l())},h=function(t){e(p(t))};Object(i.sendConsentToCommunicate)({sessionId:n,hubspotUtk:a,threadId:r}).then(b,h).done()}:null}},"3gKe":function(e,t,n){"use strict";var r=n("MBJP"),a=n("JGJA"),i=Object(a.a)("gdpr"),o=Object(r.a)([i],Object(a.a)("consentToProcessStatus")),s=n("3z2x");n.d(t,"a",(function(){return c}));var c=Object(r.a)([o],(function(e){switch(e){case s.a:return!1;case s.b:return!0;case s.c:default:try{return localStorage.getItem("userHasGivenConsentToProcess")}catch(e){return!1}}}))},"3oj9":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("KXN9"),a=n("MBJP"),i=n("ZSXR"),o=n("eEyY"),s=n("Ryja"),c=n("Xcjc"),u=Object(a.a)([o.getCurrentThreadId,i.a,s.getStagedThreadHistory],(function(e,t,n){return e===c.a?n:Object(r.a)(t)||null}))},"4nf7":function(e,t,n){"use strict";var r=n("021p"),a=n("bOW6"),i=n("BnUr"),o=n("QYOI"),s=n("MBJP"),c=n("qjq5"),u=n("3Yas");u.a.implement(Array,(function(e,t){return o.Iterable.isIterable(e)?t.concat(e.toJS()):t.concat(e)}));u.a.implementInherited(o.Seq.Indexed,(function(e,t){return t.concat(e)}));u.a.implementInherited(o.Collection.Indexed,(function(e,t){return t.concat(e)}));u.a.implement(String,(function(e,t){return t.concat(e)}));var d,l=u.a,p=Object(c.a)(l),b=n("SGjM"),h=n("DdHT"),f=n("6aYC"),m=n("k09d"),g=n("Z6IV"),j=n("3oj9"),O=n("5oUx");n.d(t,"a",(function(){return v}));var v=Object(s.a)([m.a,j.a,f.a,O.a],(function(e,t,n,s){var c=Object(i.getChannelName)(e),u=Object(i.getThreadId)(e),l=Object(r.b)(t)||Object(o.List)(),f=Object(h.a)(p(l),p(n),Object(b.a)(Object(a.wrapFailedMessage)({threadId:u,channel:c})),p(s))(Object(o.List)()),m=f.size?f.filter(g.isSupportedMessageType):Object(o.List)();Object(o.is)(d,m)||(d=m);return d}))},"5N3d":function(e,t,n){"use strict";n.r(t);n.d(t,"validateAttachmentFile",(function(){return o}));var r=n("Zn4N"),a=n("eg+O"),i=n("b+5w"),o=function(e){var t=Object(i.a)();Object(a.fileExceedsSizeLimit)(e)?t.reject(r.b):t.resolve();return t.promise}},"5SRO":function(e,t,n){"use strict";var r,a=n("fQRB"),i=n("5Enb"),o=n("edeU"),s=n("+eZO"),c=n("LpN+"),u=n("g05V"),d=n("QgEn"),l=n("6DYd"),p=n("mKxs"),b=n("VfuR"),h=n.n(b),f=n("9f1P"),m=n.n(f),g=n("eP/i"),j="default",O="blank",v="on-shade",x="on-dark",y=(r={},Object(a.a)(r,j,{primary:g.j,secondary:g.l}),Object(a.a)(r,v,{primary:g.l,secondary:g.j}),Object(a.a)(r,x,{primary:g.k,secondary:g.r}),r),C="\n  background: "+g.q+";\n",w=function(e){var t=e.primary;return"\n  background: "+t+";\n  background: linear-gradient(to right, "+t+", "+e.secondary+" 20%, "+t+" 40%);\n  background-size: 1200px;\n"},k=function(e){return y[e]},T=function(e){var t=e.use;return t===O?C:w(k(t))},I=function(e){return"number"==typeof e},S=function(e){return I(e)?e+"px":e},R="1s",A="linear",P="0s",M="infinite",E="forwards",N=700,_=Object(f.keyframes)(["0%{background-position:-","px 0}100%{background-position:","px 0}"],N,N),q=Object(f.css)(["animation:"," "," "," "," "," ",";"],_,R,A,P,M,E),F=m.a.div.withConfig({displayName:"SkeletonBase",componentId:"sc-7f8oe5-0"})(["margin:",";padding:",";",";",";"],(function(e){var t=e.margin;return t?S(t):void 0}),(function(e){var t=e.padding;return t?S(t):void 0}),(function(e){var t=e.use;return T({use:t})}),(function(e){return e.use!==O&&q}));F.defaultProps={use:j};F.propTypes={margin:h.a.oneOfType([h.a.number,h.a.string]),padding:h.a.oneOfType([h.a.number,h.a.string]),use:h.a.oneOf([j,v,x,O])};var L=F,B=32,D=m()(L).withConfig({displayName:"SkeletonCircle",componentId:"sc-11pjypz-0"})(["border-radius:50%;width:",";height:",";min-width:",";"],(function(e){var t=e.size;return S(t)}),(function(e){var t=e.size;return S(t)}),(function(e){var t=e.size;return S(t)}));D.defaultProps={size:B};D.propTypes={size:h.a.number};var z=D,U=n("Ktcs"),V=n("aFIE"),H=n("0IK8"),Q=n("ksA9"),W=n("GiLH"),G=n.n(W),Y=n("wxG8"),J=function(){},K=function(e){Object(u.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(l.a)(n));return n}Object(o.a)(t,[{key:"handleClick",value:function(){var e=this.props;(0,e.onClick)(e.sender)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.sender,r=e.size;if(t)return Object(d.jsx)(z,{size:32});if(!n)return Object(d.jsx)(V.a,{size:r});switch(Object(H.getSenderTypeForCMF)(n)){case Y.BOT:case Y.SYSTEM:return Object(d.jsx)(V.a,{size:r,src:Object(Q.a)(n)||G.a});default:return Object(d.jsx)("span",{onClick:this.handleClick,children:Object(d.jsx)(V.a,{size:r,src:Object(Q.a)(n)})})}}}]);return t}(U.PureComponent);K.displayName="SenderAvatar";K.propTypes={isLoading:h.a.bool,onClick:h.a.func.isRequired,sender:Object(p.a)("Sender"),size:V.a.propTypes.size};K.defaultProps={onClick:J,size:"sm"};var Z=n("6s0Z"),X=n("i2Vg"),$=n("qXlW"),ee=n("rCfO"),te=n("WdXK"),ne=Object(ee.a)((function(e,t,n){return t?n.get(Object(te.buildSenderLocator)(t,e)):null})),re="STARTED",ae=Object(ee.a)((function(e){return!Object(Q.b)(e)&&Object(Q.h)(e)===re})),ie="#cbd6e2",oe="#00a4bd",se=window.navigator?navigator.userAgent.toLowerCase():"",ce=function(){return se.includes("trident/")},ue=n("JGJA"),de=Object(ue.a)("alignItems"),le=Object(ue.a)("avatarWidth"),pe=Object(ue.a)("backgroundColor"),be=Object(ue.a)("borderColor"),he=Object(ue.a)("borderRadius"),fe=Object(ue.a)("borderWidth"),me=(Object(ue.a)("messageSpacing"),Object(ue.a)("textColor")),ge=Object(ue.a)("fileAttachmentTheme"),je=(Object(ue.a)("quickReplyTheme"),Object(ue.a)("widgetAccent")),Oe=n("iDVC"),ve=Object(U.createContext)(Object(Oe.a)()),xe=Object(f.keyframes)(["25%{background-color:",";}75%{background-color:",";}"],ie,ie),ye=Object(f.keyframes)(["0%,100%{transform:translateY(0);}25%{transform:translateY(.25em);}50%{transform:translateY(0);}75%{transform:translateY(-.25em);}"]);ce()&&(ye=Object(f.keyframes)(["0%,100%{top:0;}25%{top:.25em;}50%{top:0}75%{top:-.25em;}"]));var Ce=m.a.div.withConfig({displayName:"TypingDots__Dot",componentId:"sc-1vs95yn-0"})(["position:relative;background-color:currentColor;color:",";border-radius:50%;height:1em;width:1em;animation:",",",";animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite;&:not(:last-child){margin-right:0.75em;}&:nth-child(2){animation-delay:-0.66s;}&:nth-child(3){animation-delay:-0.33s;}"],(function(e){return e.color?e.color:oe}),ye,xe),we=m.a.div.withConfig({displayName:"TypingDots__TypingDotsWrapper",componentId:"sc-1vs95yn-1"})(["display:flex;align-items:center;justify-content:center;height:24px;font-size:8px;width:4.5em;"]),ke=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=je(this.context);return Object(d.jsxs)(we,{children:[Object(d.jsx)(Ce,{color:e,className:"dot-1"}),Object(d.jsx)(Ce,{color:e,className:"dot-2"}),Object(d.jsx)(Ce,{color:e,className:"dot-3"})]})}}]);return t}(U.Component);ke.contextType=ve;ke.displayName="TypingDots";var Te=ke,Ie=m.a.div.withConfig({displayName:"SpacingWrapper",componentId:"sc-15n2tpp-0"})(["padding-top:4px;padding-bottom:4px;padding-left:10px;padding-right:10px;width:100%;"]),Se=h.a.oneOf([Z.b,Z.a,Z.c]),Re=n("CnAB"),Ae=n("Gc2C"),Pe=function(e){Object(Ae.a)(void 0===e||"object"==typeof e,"Invalid config type given");e&&Object.values(e).forEach((function(e){Object(Ae.a)(e instanceof Oe.a,"All themes in the configuration must be a `Theme` record. Found %s",typeof e)}))},Me=Object(U.memo)((function(e){var t=e.themeConfig,n=e.use,r=e.children;Pe(t);t=Object.assign({},Re.b,t);var a=n?t[n]:t[Z.b]||Object(Oe.a)();return Object(d.jsx)(ve.Provider,{value:a,children:r})}));Me.displayName="ThemeProvider";Me.propTypes={children:h.a.node.isRequired,themeConfig:h.a.objectOf(Object(p.a)("Theme")),use:Se};var Ee=Me,Ne=m.a.div.withConfig({displayName:"PrimaryMessageAvatar__PrimaryMessageAvatarWrapper",componentId:"sc-3ryejm-0"})(["align-items:center;display:flex;flex-shrink:0;justify-items:center;margin-top:35px;"]),_e=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Object(d.jsx)(Ne,{className:n,children:t})}}]);return t}(U.PureComponent);_e.displayName="PrimaryMessageAvatar";_e.propTypes={children:h.a.node.isRequired,className:h.a.string};var qe=m.a.div.withConfig({displayName:"PrimaryMessageContentSection__PaddedArea",componentId:"sc-1shh75m-0"})(["padding:8px 16px;"]),Fe=m.a.div.withConfig({displayName:"PrimaryMessageContentSection__PrimaryMessageContentSectionWrapper",componentId:"sc-1shh75m-1"})(["overflow:hidden;width:100%;button{width:auto;}"]),Le=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"renderContent",value:function(){var e=this.props.children;return Object(d.jsx)(qe,{children:e})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return U.Children.count(t)>0?Object(d.jsx)(Fe,{className:n,children:Object(d.jsx)("div",{className:"width-100 padding-x-4 padding-y-2",children:this.renderContent()})}):null}}]);return t}(U.PureComponent);Le.contextType=ve;Le.displayName="PrimaryMessageContentSection";Le.propTypes={children:h.a.node,className:h.a.string};var Be=m.a.div.withConfig({displayName:"PrimaryMessageContent__PrimaryMessageContentWrapper",componentId:"sc-8jqqdg-0"})(["position:relative;min-height:32px;word-break:break-word;box-sizing:border-box;border-style:solid;border-width:",";border-color:",";background-color:",";color:",";display:inline-flex;align-items:center;flex-direction:column;border-radius:",";","{border-top-style:solid;border-top-width:1px;border-top-color:",";&:first-child{border-top:none;}}max-width:284px;"],(function(e){return e.borderWidth}),(function(e){return e.borderColor}),(function(e){return e.backgroundColor}),(function(e){return e.textColor}),(function(e){return e.borderRadius}),Fe,(function(e){return e.borderColor})),De=function(e){Object(u.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={expanded:!!e.isLastMessage};n.onCollapseButtonClick=n.onCollapseButtonClick.bind(Object(l.a)(n));n.expandMessage=n.expandMessage.bind(Object(l.a)(n));return n}Object(o.a)(t,[{key:"onCollapseButtonClick",value:function(){this.setState({expanded:!1})}},{key:"expandMessage",value:function(){this.state.expanded||this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Object(d.jsx)(Be,{className:n,backgroundColor:pe(this.context),borderColor:be(this.context),borderRadius:he(this.context),borderWidth:fe(this.context),textColor:me(this.context),children:t})}}]);return t}(U.PureComponent);De.contextType=ve;De.displayName="PrimaryMessageContent";De.propTypes={children:h.a.node,className:h.a.string,isLastMessage:h.a.bool};var ze=m.a.div.withConfig({displayName:"PrimaryMessageFooter__PrimaryMessageFooterWrapper",componentId:"sc-12gtatn-0"})(["display:flex;margin-top:4px;max-width:284px;"]),Ue=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Object(d.jsx)(ze,{className:n,children:t})}}]);return t}(U.PureComponent);Ue.displayName="PrimaryMessageFooter";Ue.propTypes={children:h.a.node.isRequired,className:h.a.string};var Ve=m.a.div.withConfig({displayName:"PrimaryMessageHeader__PrimaryMessageHeaderWrapper",componentId:"sc-1a6fbj5-0"})(["display:flex;height:16px;align-items:center;margin-top:4px;margin-bottom:4px;width:100%;"]),He=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Object(d.jsx)(Ve,{className:n,children:t})}}]);return t}(U.PureComponent);He.displayName="PrimaryMessageHeader";He.propTypes={children:h.a.node.isRequired,className:h.a.string};var Qe=m.a.div.withConfig({displayName:"PrimaryMessageHeaderContent__PrimaryMessageHeaderContentWrapper",componentId:"i44zz1-0"})(["margin-left:1px;min-width:0;"]),We=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Object(d.jsx)(Qe,{className:n,children:t})}}]);return t}(U.PureComponent);We.displayName="PrimaryMessageHeaderContent";We.propTypes={children:h.a.node.isRequired,className:h.a.string};var Ge="8px",Ye=m.a.div.withConfig({displayName:"PrimaryMessage__PrimaryMessageWrapper",componentId:"sc-31vbxz-0"})(["display:flex;flex-direction:column;align-items:",";padding-left:",";","{","{width:",";margin-left:-",";margin-right:",";}>:first-child{&","{margin-left:",";}}}","{margin-left:",";}","{margin-left:",";}"],(function(e){return e.alignment||"flex-start"}),Ge,Ve,Ne,(function(e){return e.avatarWidth}),Ge,Ge,Qe,(function(e){return e.avatarWidth}),Be,(function(e){return e.avatarWidth}),ze,(function(e){return e.avatarWidth})),Je=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,a=t.positionDescriptors,i=t.use;return n?Object(d.jsx)(Ee,{themeConfig:this.context,use:i,children:Object(d.jsx)(Ie,{positionDescriptors:a,className:r,children:Object(d.jsx)(ve.Consumer,{children:function(t){return Object(d.jsx)(Ye,{"data-test-id":e.props["data-test-id"],"data-test-use":i,alignment:de(t),avatarWidth:le(t),children:n})}})})}):null}}]);return t}(U.PureComponent);Je.contextType=Re.a;Je.displayName="PrimaryMessage";Je.propTypes={children:h.a.node,className:h.a.string,"data-test-id":h.a.string,positionDescriptors:X.a,use:Se};var Ke=n("FGh+"),Ze=m.a.div.withConfig({displayName:"SkeletonText__SkeletonTextWrapper",componentId:"sc-1ylr51p-0"})(["position:relative;width:",";"],(function(e){var t=e.width;return S(t)})),Xe=m()(L).withConfig({displayName:"SkeletonText__SkeletonTextInner",componentId:"sc-1ylr51p-1"})(["height:0.75em;left:0;position:absolute;top:50%;transform:translateY(-50%);width:100%;"]),$e=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=Object(Ke.a)(e,["width"]);return Object(d.jsxs)(Ze,{width:t,children:["Â ",Object(d.jsx)(Xe,Object.assign({},n))]})}}]);return t}(U.PureComponent);$e.defaultProps={width:"100%"};$e.propTypes={width:h.a.oneOfType([h.a.number,h.a.string])};var et=$e,tt=n("fzij"),nt=n("sl/w"),rt=n("9dO3"),at=n("dPcB"),it=["de","ja"],ot=function(e,t){var n=e.givenName,r=e.familyName,a=e.email,i=t&&t.locale||Object(rt.a)();return it.indexOf(i)>=0||!n?Object(at.a)({firstName:n,lastName:r,email:a},t):n},st=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"getUnknownSenderText",value:function(){switch(Object(Q.g)(this.props.sender)){case Y.BOT:return Object(d.jsx)(nt.a,{message:"conversations-message-history.responder.bot"});case Y.AGENT:return Object(d.jsx)(nt.a,{message:"conversations-message-history.responder.unknownResponder"});case Y.VISITOR:return Object(d.jsx)(nt.a,{message:"conversations-message-history.responder.unknownVisitor"});case Y.SYSTEM:return Object(d.jsx)(nt.a,{message:"conversations-message-history.responder.automatic"});default:return Object(d.jsx)(nt.a,{message:"conversations-message-history.responder.unknownSender"})}}},{key:"render",value:function(){var e=this.props,t=e.sender;return e.isLoading?Object(d.jsx)(et,{width:100}):t&&ot({givenName:Object(Q.d)(t),familyName:Object(Q.f)(t),email:Object(Q.c)(t)})||this.getUnknownSenderText()}}]);return t}(U.PureComponent);st.displayName="SenderName";st.propTypes={isLoading:h.a.bool,sender:Object(p.a)("Sender")};var ct=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSenderLoading,n=e.sender;return t?Object(d.jsx)(et,{width:150}):Object(d.jsx)(tt.a,{use:"help",children:Object(d.jsx)("strong",{children:Object(d.jsx)(st,{sender:n})})})}}]);return t}(U.PureComponent);ct.displayName="SenderHeaderContent";ct.propTypes={isSenderLoading:h.a.bool,sender:Object(p.a)("Sender")};var ut=ct,dt=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSenderLoading,n=e.sender;return Object(d.jsx)(ut,{sender:n,isSenderLoading:t})}}]);return t}(U.PureComponent);dt.displayName="TypingHeaderContent";dt.propTypes={isSenderLoading:h.a.bool,sender:Object(p.a)("Sender")};var lt=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors,r=e.senders,a=Object(H.getSenderId)(t),i=Object(H.getSenderType)(t),o=Object(H.getSenderType)(t)===Y.VISITOR,s=ne(a,i,r),c=Object(Q.b)(s),u=ae(s),l=o?Z.c:Z.a;return Object(d.jsxs)(Je,{positionDescriptors:n,use:l,children:[Object(d.jsxs)(He,{children:[Object(d.jsx)(_e,{children:Object(d.jsx)(K,{sender:c,isLoading:u})}),Object(d.jsx)(We,{children:Object(d.jsx)(dt,{message:t,sender:c,isSenderLoading:u})})]}),Object(d.jsx)(De,{children:Object(d.jsx)(Le,{children:Object(d.jsx)(Te,{})})})]})}}]);return t}(U.PureComponent);lt.displayName="TypingIndicatorMessage";lt.propTypes={message:Object(p.a)("TypingIndicatorMessage").isRequired,positionDescriptors:X.a.isRequired,senders:$.a.isRequired};var pt,bt=lt,ht=n("t6nY"),ft=n.n(ht),mt=m.a.div.withConfig({displayName:"DashedLabel__StyledBorder",componentId:"sc-8xw2s9-0"})(["display:flex;flex-grow:1;border:solid 1px ",";"],g.i);function gt(e){var t=e.children,n=e.transparent,r=e["data-test-id"],a=e.labelPadding;return Object(d.jsxs)("div",{className:ft()("display-flex align-end",a,n&&"justify-center",!a&&"m-y-6"),"data-test-id":r||"dashed-label",children:[!n&&Object(d.jsx)(mt,{className:"m-bottom-3"}),Object(d.jsx)("div",{className:"max-100 p-x-4",children:Object(d.jsx)(tt.a,{use:"help",className:"m-bottom-1 align-center text-center word-break-break-word flex-column",children:t})}),!n&&Object(d.jsx)(mt,{className:"m-bottom-3"})]})}gt.displayName="DashedLabel";gt.propTypes=(pt={children:h.a.node.isRequired},Object(a.a)(pt,"data-test-id",h.a.string),Object(a.a)(pt,"transparent",h.a.bool),pt);var jt=gt,Ot=n("npjq"),vt=n("sA91"),xt=n("Pz4q"),yt=n("rIrL"),Ct=n("24N/"),wt=document.implementation.createHTMLDocument(""),kt=function(e,t){return"p"===t&&e&&e.classList&&e.classList.contains("MsoNormal")&&e.children&&e.children.length},Tt=function(e){return e&&!e.children.legnth&&"o:p"===e.tagName.toLowerCase()&&e.innerHTML.includes("&nbsp;")},It=function(e){return e&&"span"===e.tagName.toLowerCase()&&Tt(e.firstElementChild)},St=function(e){return!!e.getElementsByTagName("img").length},Rt=function e(t){var n=t.node,r=t.node_name;if(kt(n,r)){var a=n.firstElementChild;if(Tt(a)||It(a)){if(St(n)){n.removeChild(a);return e({node:n,node_name:"p"})}return{node:wt.createElement("br")}}var i=wt.createElement("div");Object.keys(n.attributes).forEach((function(e){var t=n.attributes[e];i.setAttribute(t.nodeName,t.nodeValue)}));i.innerHTML=n.innerHTML.trim().replace(/&nbsp;/g,"");return{node:i}}return null},At=["position","top","bottom","left","right","z-index","clear","float","background-image","white-space"],Pt=function(e){var t=e.node;if(t&&t.style&&t.style.length>0&&t.style.removeProperty){At.forEach((function(e){return t.style.removeProperty(e)}));return{node:t}}return null},Mt=function(e){var t=e.node,n=e.node_name;if(t&&"img"===n&&t.attributes){t.attributes["data-original-height"]&&t.setAttribute("height",t.attributes["data-original-height"].value);t.attributes["data-original-width"]&&t.setAttribute("width",t.attributes["data-original-width"].value);t.attributes["data-full-size-src"]&&t.setAttribute("src",t.attributes["data-full-size-src"].value);return{node:t}}return null},Et=function(e){var t=e.node;if("div"===e.node_name&&t&&t.classList&&t.classList.contains("gmail_default")){var n=wt.createElement("span");Object.keys(t.attributes).forEach((function(e){var r=t.attributes[e];n.setAttribute(r.nodeName,r.nodeValue)}));n.innerHTML=t.innerHTML.trim();return{node:n}}return null},Nt=n("kkqp"),_t=n.n(Nt),qt=function(e){return new _t.a(e)},Ft=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[new Error].concat(n,[{message:e}]))},Lt=function(e){setTimeout((function(){throw e}),0)},Bt=["gmail_extra","gmail_quote","hs_reply","x_hs_reply_wrap"],Dt="divRplyFwdMsg",zt=function(e,t){return t===Dt||e&&e.contains&&Bt.some((function(t){return e.contains(t)}))},Ut=["hs_signature"],Vt=function(e){return e&&e.contains&&Ut.some((function(t){return e.contains(t)}))},Ht={transformers:[Rt,function(e){var t=e.node,n=t.classList,r=t.id,a=t.attributes,i=void 0===a?[]:a;if(zt(n,r)){var o=wt.createElement("span");Object.keys(i).forEach((function(e){var t=i[e];o.setAttribute(t.nodeName,t.nodeValue)}));o.innerHTML="";o.setAttribute("data-email-reply","");return{node:o}}return null},function(e){var t=e.node,n=t.classList,r=t.attributes,a=void 0===r?[]:r;if(Vt(n)){var i=wt.createElement("span");Object.keys(a).forEach((function(e){var t=a[e];i.setAttribute(t.nodeName,t.nodeValue)}));i.innerHTML="";i.setAttribute("data-email-signature","");return{node:i}}return null},Pt,Et,Mt],dom:wt,elements:["b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","figure","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","font","div","span","a"],attributes:{__ALL__:["style","align","valign","width","height"],blockquote:["cite"],col:["span"],colgroup:["span"],figure:["style"],ol:["start","type"],q:["cite"],img:["title","alt","src"],table:["summary","bgcolor"],td:["abbr","axis","colspan","rowspan","bgcolor"],th:["abbr","axis","colspan","rowspan","scope","bgcolor"],ul:["type"],font:["size"],a:["href","title"],span:["data-at-mention","data-owner-id","contenteditable","data-email-reply"]},add_attributes:{a:{target:"_blank"}},remove_contents:["script"],protocols:{a:{href:["http","https"]}}},Qt=function(e){Array.from(e.querySelectorAll("br + [data-email-reply]")).forEach((function(e){var t=e.previousElementSibling;t&&t.nodeName&&"br"===t.nodeName.toLowerCase()&&t.classList&&t.classList.add("display-none")}))},Wt=wt.body,Gt=Object(ee.a)((function(e,t){var n=wt.createElement("div");try{Wt.innerHTML=e;var r=Object.assign({},Ht);r.transformers=t;var a=qt(r).clean_node(Wt).cloneNode(!0);n.appendChild(a);Qt(n)}catch(e){var i=Ft("Error sanitizing email message: "+e.message,e);Lt(i)}return n.innerHTML})),Yt=Object(ee.a)((function(e){return Gt(e,[Rt,Et,Pt,Mt])})),Jt=Object(ee.a)((function(e){if(!e)return null;var t=document.createElement("div");t.innerHTML=Yt(e);document.body.appendChild(t);var n=t.innerText;document.body.removeChild(t);return n})),Kt=n("qkre"),Zt=[xt.a,yt.a,Ct.a],Xt=Object(ee.a)((function(e){setTimeout((function(){Object(Ae.a)(Zt.some((function(t){return e instanceof t})),"hasTextContent: Unsupported message record type %s supplied",Object(vt.a)(e))}),0);var t=Object(Kt.f)(e),n=Object(H.getRichText)(e)||Object(H.getPlainText)(e);return t||Boolean(n&&n.length&&Jt(n))})),$t=n("qCVG"),en=m.a.div.withConfig({displayName:"ContentText__ContentTextWrapper",componentId:"sc-942nqq-0"})(["word-wrap:break-word;box-sizing:border-box;width:100%;white-space:pre-wrap;a{font-weight:inherit;text-decoration:underline;}img{max-width:100%;height:auto;}"]),tn=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e["aria-label"],n=e.contentText,r=e.onClickAction;return Object(d.jsx)(en,{children:Object(d.jsx)("div",{"aria-label":t,"data-test-id":"primary-message-content",dangerouslySetInnerHTML:{__html:Object($t.a)(n,{shouldPreserveNewlines:!0,allowedDomainsForIframe:[/^\/?\/?play\.vidyard\.com\/[a-zA-Z0-9]*\.html$/gm]})},onClick:r})})}}]);return t}(U.PureComponent);tn.displayName="ContentText";tn.propTypes={"aria-label":h.a.string,contentText:h.a.string.isRequired,onClickAction:h.a.func};tn.defaultProps={onClickAction:function(){}};var nn=n("MJM1"),rn=function(e){return Object(nn.a)(["metadata","officeHoursStartTime"],e)},an=function(e){return Object(nn.a)(["officeHoursStartTime"],e)},on=n("awVq"),sn=function(e){return e["@type"]===on.a?an(e)&&an(e)-(new Date).getTime()<0:rn(e)&&rn(e)-(new Date).getTime()<0},cn=function(e){var t=e.message;return t["@type"]===on.a||Xt(t)?sn(t)?null:Object(d.jsx)(jt,{transparent:!0,labelPadding:"m-y-1",children:Object(d.jsx)(tn,{"aria-label":Ot.a.text("conversations-visitor-message-history.systemMessage"),contentText:Object(H.getRichText)(t)||Object(H.getPlainText)(t)})}):null};cn.displayName="AvailabilityMessage";cn.propTypes={message:h.a.oneOfType([Object(p.a)("TypicalResponseTimeMessage"),Object(p.a)("OfficeHoursMessage")]).isRequired};var un=cn,dn=n("3Egs"),ln=n("5N4t"),pn=n("oxA8"),bn=n("QYOI"),hn=function(){return Object(d.jsx)("i",{children:Object(d.jsx)(nt.a,{message:"conversations-message-history.noContent"})})};hn.displayName="NoContentLabel";var fn=hn,mn=n("r1tY"),gn=["fileId"],jn=["fileMetadata"],On=["thumbnailMetadata"],vn=(Object(nn.a)(gn),Object(nn.a)(jn)),xn=(Object(nn.a)(On),["expiresAt"]),yn=["url"],Cn=["name"],wn=["extension"],kn=["type"],Tn=["fileSize"],In=["width"],Sn=["height"],Rn=(Object(nn.a)(xn),Object(nn.a)(yn)),An=Object(nn.a)(Cn),Pn=Object(nn.a)(wn),Mn=Object(nn.a)(kn),En=Object(nn.a)(Tn),Nn=Object(nn.a)(In),_n=Object(nn.a)(Sn),qn=function(e){var t=An(e),n=Pn(e);return n?t+"."+n:t},Fn=n("n8e+"),Ln=n("LRQi"),Bn=m.a.div.withConfig({displayName:"InlineImageAttachment__InlineImageAttachmentWrapper",componentId:"n1kjpq-0"})(["display:block;max-width:100%;"]),Dn=function(e){Object(u.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).hasLoadedImage=function(){n.setState({hasLoaded:!0})};n.state={hasLoaded:!1};return n}Object(o.a)(t,[{key:"getDimensions",value:function(){var e=this.props,t=e.maxWidth,n=e.width,r=e.height;return!this.state.hasLoaded&&t&&n&&r?n<=t?{width:n,height:r}:{width:t,height:r*(t/n)}:{}}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.url,r=this.getDimensions(),a=r.width,i=r.height;return Object(d.jsx)(Bn,{children:Object(d.jsx)(Ln.a,{href:n,target:"_blank","data-test-id":"inline-image-attachment",children:Object(d.jsx)(Fn.a,{alt:t,src:n,width:a,height:i,style:{minHeight:i},onLoad:this.hasLoadedImage})})})}}]);return t}(U.PureComponent);Dn.displayName="InlineImageAttachment";Dn.propTypes={height:h.a.number,maxWidth:h.a.number,name:h.a.string.isRequired,url:h.a.string.isRequired,width:h.a.number};var zn=Dn,Un="IMG",Vn=function(e){return e.filter((function(e){var t=vn(e),n=Mn(t),r=Pn(t);return Boolean(n===Un&&"svg"!==r)}))},Hn=function(e){return e.filter((function(e){var t=vn(e),n=Mn(t),r=Pn(t);return Boolean(n!==Un||"svg"===r)}))},Qn=function(e){return e.some((function(e){var t=vn(e),n=Mn(t),r=Pn(t);return Boolean(n===Un&&"svg"!==r)}))},Wn=300,Gn=m.a.div.withConfig({displayName:"InlineImageAttachments__FileAttachmentsWrapper",componentId:"sc-1tukozh-0"})(["cursor:pointer;box-sizing:border-box;width:100%;max-width:","px;display:block;margin-bottom:16px;margin-top:8px;"],Wn),Yn=function(e){Object(u.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={maxWidth:Wn};n.wrapperRef=Object(U.createRef)();return n}Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(mn.findDOMNode)(this.wrapperRef.current);e&&e.offsetWidth&&e.offsetWidth!==this.state.maxWidth&&this.setState({maxWidth:e.offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props.fileAttachments;return Object(d.jsx)(Gn,{ref:this.wrapperRef,children:Vn(t).map((function(t,n){var r=vn(t),a=qn(r),i=Rn(r),o=Nn(r),s=_n(r);return Object(d.jsx)(zn,{name:a,url:i,width:o,height:s,maxWidth:e.state.maxWidth},"image-"+n)}))})}}]);return t}(U.PureComponent);Yn.displayName="InlineImageAttachments";Yn.propTypes={fileAttachments:h.a.instanceOf(bn.List)};var Jn=Yn,Kn=n("C3IS"),Zn=n("OI0Z"),Xn=n("6xAP"),$n=Object(U.createContext)(Object(Xn.a)()),er=n("dz5W"),tr=n("7LhL"),nr=function(e){return Object(d.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(d.jsx)("defs",{children:Object(d.jsx)("path",{d:"M14.466 0c.076 0 .153.008.233.023.1.02.196.059.288.104.023.011.046.023.068.037.09.052.177.111.252.187l6.345 6.4c.075.076.135.163.186.255.013.023.025.045.036.068.045.093.083.19.103.295.015.075.023.153.023.231v13.2c0 1.884-1.468 3.2-3.569 3.2H6.534c-2.1 0-3.568-1.316-3.568-3.2V3.6c0-1.985 1.6-3.6 3.568-3.6zm-1.133 2H6.25C5.56 2 5 2.56 5 3.25v17.917c0 .689.68.833 1.25.833h12.5c.57 0 1.25-.144 1.25-.833v-12.5h-4.583c-1.149 0-2.084-.935-2.084-2.084V2z",id:"file__a"})}),Object(d.jsx)("use",{xlinkHref:"#file__a"})]}))};nr.displayName="SVGFile";var rr=nr,ar=m.a.div.withConfig({displayName:"FileAttachmentTile__FileAttachmentTileWrapper",componentId:"sc-8puk9w-0"})(["max-width:300px;"]),ir=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props.fileMetadata,t=qn(e),n=Rn(e),r=En(e);return Object(d.jsx)(ar,{children:Object(d.jsx)(er.a,{onClick:function(){return window.open(n)},fileName:t,fileInfo:Object(d.jsx)(Zn.a,{value:r}),preview:Object(d.jsx)(tr.a,{icon:Object(d.jsx)(rr,{}),size:"sm"})})})}}]);return t}(U.PureComponent);ir.contextType=$n;ir.displayName="FileAttachmentTile";ir.propTypes={fileMetadata:Object(p.a)("FileMetadataRecord").isRequired};var or=ir,sr=Object(ue.a)("tileBackgroundColor"),cr=m.a.div.withConfig({displayName:"AttachmentsFooter__AttachmentsFooterWrapper",componentId:"bojgs-0"})(["cursor:pointer;box-sizing:border-box;display:block;background-color:",";"],(function(e){return e.backgroundColor})),ur=m()(or).withConfig({displayName:"AttachmentsFooter__StyledFileAttachmentTile",componentId:"bojgs-1"})(["background-color:",";"],(function(e){return e.backgroundColor||"rgba(255, 255, 255, 0.5)"})),dr=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.fileAttachments;return Object(d.jsx)(cr,{backgroundColor:pe(this.context),children:t.map((function(t,n){return Object(d.jsx)(ur,{fileMetadata:vn(t),backgroundColor:sr(ge(e.context))},n)}))})}}]);return t}(U.PureComponent);dr.contextType=ve;dr.displayName="AttachmentsFooter";dr.propTypes={fileAttachments:h.a.instanceOf(bn.List).isRequired};var lr=dr,pr=/^rgb/i,br=function(e){var t,n,r;try{if(pr.test(e)){var a=e.match(/(\d+)\D+(\d+)\D+(\d+)/);t=parseInt(a[1],10);n=parseInt(a[2],10);r=parseInt(a[3],10)}else{var i=e.toLowerCase().replace(/^#/,"");3===i.length&&(i=i.replace(/([0-9a-f])/g,"$1$1"));t=parseInt(i.substring(0,2),16);n=parseInt(i.substring(2,4),16);r=parseInt(i.substring(4,6),16)}if([t,n,r].some(isNaN))return{}}catch(e){return{}}return{r:t,g:n,b:r}},hr=function(e){var t=br(e),n=t.r,r=t.g,a=t.b;if([n,r,a].some(isNaN))return{hue:0,saturation:0,lightness:0};var i,o=n/255,s=r/255,c=a/255,u=Math.max(o,s,c),d=Math.min(o,s,c),l=(u+d)/2,p=u-d;if(0===p)return{hue:0,saturation:0,lightness:l};var b=l>.5?p/(2-u-d):p/(u+d);switch(u){case o:i=(s-c)/p+(s<c?6:0);break;case s:i=(c-o)/p+2;break;default:i=(o-s)/p+4}i*=60;return{hue:i=Math.round(i),saturation:b,lightness:l}},fr=function(e){var t=e<0?0:e>1?1:e;return Math.round(100*t)+"%"},mr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=hr(e),r=n.hue,a=n.saturation,i=n.lightness;return"hsl("+[r,fr(a),fr(i+t)].join(", ")+")"},gr=function(e){return mr(e,-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1))},jr=n("OwpT"),Or=n.n(jr),vr=m.a.div.withConfig({displayName:"CommonMessageContent__HyperlinkStyleWrapper",componentId:"sc-1qo1ttt-0"})(["overflow:hidden;"," a{color:",";&:hover{color:",";}&:active{color:",";}}"],Be,(function(e){return e.hyperlinkColor}),(function(e){var t=e.hyperlinkColor;return t&&gr(t)}),(function(e){var t=e.hyperlinkColor;return t&&gr(t,.2)})),xr=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"isSentFromVisitor",value:function(){return Object(H.getSenderType)(this.props.message)===Y.VISITOR}},{key:"isClickableLink",value:function(e){return new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(/.*)?").test(e)}},{key:"handleOnClickEvent",value:function(e){e.persist();"A"===e.target.tagName&&this.props.toggleOpen({isOpened:!1})}},{key:"renderContentText",value:function(){var e=this.props,t=e.message,n=e.mobile,r=Object(H.getRichText)(t)||Object(H.getPlainText)(t),a=n&&this.isClickableLink(r);if(!r)return null;var i=Object(H.getRichText)(t)&&Or.a.link(r,{stripPrefix:!1});return Object(d.jsx)(tn,{contentText:i||r,"aria-label":this.isSentFromVisitor()?Ot.a.text("conversations-visitor-message-history.myMessage"):Ot.a.text("conversations-visitor-message-history.agentMessage"),onClickAction:a?this.handleOnClickEvent.bind(this):null})}},{key:"renderMessageSection",value:function(){var e=this.props,t=e.fileAttachments,n=e.isLastMessage,r=e.message,a=!Object(Kn.c)(r)&&t&&Qn(t),i=Xt(r);return a||i?Object(d.jsxs)(Le,{isLastMessage:n,children:[this.renderContentText(),a&&Object(d.jsx)(Jn,{fileAttachments:t}),this.props.quickReplySelect&&this.props.quickReplySelect()]}):null}},{key:"renderAttachmentsSection",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,r=Object(Kn.c)(n)?t:Hn(t);return r&&r.size?Object(d.jsx)(Le,{children:Object(d.jsx)(lr,{fileAttachments:r})}):null}},{key:"render",value:function(){var e=this.renderMessageSection(),t=this.renderAttachmentsSection(),n=this.isSentFromVisitor();return Object(d.jsx)(vr,{hyperlinkColor:n&&me(this.context),children:Object(d.jsxs)(De,{children:[e,t,!e&&!t&&Object(d.jsx)(Le,{children:Object(d.jsx)(fn,{})})]})})}}]);return t}(U.PureComponent);xr.contextType=ve;xr.displayName="CommonMessageContent";xr.propTypes={fileAttachments:h.a.instanceOf(bn.List),isLastMessage:h.a.bool,message:Object(p.a)("CommonMessage").isRequired,mobile:h.a.bool,quickReplySelect:h.a.oneOfType([h.a.bool,h.a.func]),toggleOpen:h.a.func};var yr=xr,Cr=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,r=e.positionDescriptors,a=Object(ln.a)(n),i=r.includes(dn.c);return Object(d.jsxs)(Je,{positionDescriptors:r,use:Z.c,children:[Object(d.jsx)(yr,{fileAttachments:t,isLastMessage:i,message:a}),i&&Object(d.jsx)(Ue,{children:Object(d.jsx)(tt.a,{use:"help",children:Object(d.jsx)(pn.a,{message:"conversations-visitor-message-history.status.publishing.UNPUBLISHED"})})})]})}}]);return t}(U.PureComponent);Cr.displayName="ActivelyPublishingMessage";Cr.propTypes={fileAttachments:h.a.instanceOf(bn.List),message:Object(p.a)("ActivelyPublishing").isRequired,positionDescriptors:X.a.isRequired};var wr=Cr,kr=n("HElP"),Tr=n("yYAF"),Ir=n("BvOu"),Sr=n("SYgn"),Rr=n.n(Sr),Ar=function(e,t){Object(U.useEffect)((function(){var n=function(n){try{var r=n.data,a=(n.__origin,n.source),i=JSON.parse(r);if(i.uuid!==e||!e||!i.uuid)return;var o=i.type,s=i.data,c=t[o];"function"==typeof c&&c({data:s,source:a})}catch(e){Rr.a.captureMessage("POST_MESSAGE_FAILURE",{extra:{error:e}});return}};window.addEventListener("message",n);return function(){return window.removeEventListener("message",n)}}),[])},Pr=window.location.host.includes("local"),Mr=Object(U.memo)((function(e){var t=e.message,n=e.positionDescriptors,r=e.sessionId,a=e.hubspotUtk,i=Object(U.useRef)(Object(Ir.generateUuid)()),o=Object(U.useState)(160),s=Object(kr.a)(o,2),c=s[0],u=s[1],l={RESIZE_IFRAME:function(e){var t=e.data;u(t.height)}};Ar(i.current,l);var p=Object(Tr.getFullUrl)(Pr?"local":"app")+"/feedback-in-chat/"+Object(ue.a)("feedbackTransactionId",t)+"?uuid="+i.current+"&sessionId="+r+"&hubspotUtk="+a;return Object(d.jsx)(Je,{positionDescriptors:n,use:Z.a,children:Object(d.jsx)(De,{children:Object(d.jsx)(Le,{children:Object(d.jsx)("iframe",{src:p,style:{width:"100%",height:c,border:0}})})})})}));Mr.displayName="FeedbackSurveyMessage";Mr.propTypes={message:Object(p.a)("FeedbackSurveyMessage").isRequired,positionDescriptors:X.a.isRequired};var Er=Mr,Nr=n("LdnN"),_r=n("VdXU"),qr=n("Umjh"),Fr=n("Xs/R"),Lr=n("/Maw"),Br=m()(_r.a).withConfig({displayName:"EmailCaptureInput__StyledVizExButton",componentId:"sc-1kebwga-0"})(["padding:0;width:100% !important;height:100%;"]),Dr=m.a.div.withConfig({displayName:"EmailCaptureInput__LoadingButtonContainer",componentId:"sc-1kebwga-1"})(["width:38px;height:32px;margin:4px 4px 4px 0;"]),zr={disabled:h.a.bool,locale:h.a.string,onChange:h.a.func.isRequired,onKeyPress:h.a.func.isRequired,onSubmit:h.a.func,submissionState:h.a.oneOf(["ready","submitting","done"]),value:h.a.string},Ur=function(e){var t=e.disabled,n=e.value,r=e.onChange,a=e.onKeyPress,i=e.onSubmit,o=e.locale,s=e.submissionState;return Object(d.jsx)(Lr.a,{"aria-label":Ot.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:o}),value:n,placeholder:Ot.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:o}),"data-test-id":"email-capture-input",onChange:r,onKeyPress:a,suffix:Object(d.jsx)(Dr,{children:Object(d.jsx)(qr.a,{currentState:s,onClick:i,disabled:t,"aria-label":Ot.a.text("conversations-visitor-message-history.email-capture.sendEmail",{locale:o}),"data-test-id":"email-capture-submit-button",Button:Br,children:Object(d.jsx)(tr.a,{icon:Object(d.jsx)(Fr.a,{color:g.q})})})})})};Ur.displayName="EmailCaptureInput";Ur.propTypes=zr;var Vr=Ur,Hr=m.a.span.withConfig({displayName:"CaptureSection__ErrorMessage",componentId:"ev4h9h-0"})(["color:",";font-size:12px;line-height:18px;text-align:left;margin-top:9px;display:flex;"],g.e),Qr=function(e){var t=e.message,n=e.email,r=e.errorMessage,a=e.onChange,i=e.onKeyPress,o=e.onSubmit,s=e.submissionState;return Object(d.jsxs)(Le,{children:[Object(d.jsx)(tn,{"aria-label":Ot.a.text("conversations-visitor-message-history.agentMessage"),contentText:Object(H.getPlainText)(t)}),Object(d.jsx)(Vr,{disabled:!n,value:n,onChange:a,onKeyPress:i,onSubmit:o,submissionState:s}),Object(d.jsx)(Hr,{"aria-live":"assertive",children:r})]},"email-prompt-capture-section")};Qr.displayName="CaptureSection";Qr.propTypes={email:h.a.string,errorMessage:h.a.string,message:Object(p.a)("EmailCapturePromptMessage").isRequired,onChange:h.a.func.isRequired,onKeyPress:h.a.func.isRequired,onSubmit:h.a.func.isRequired,submissionState:h.a.string.isRequired};var Wr=n("NrIs"),Gr=n("0wDu"),Yr=Gr.a,Jr=Gr.f,Kr=Gr.h,Zr=n("rdz/"),Xr=function(e){var t=e.theme;return Object(f.css)(["box-shadow:0 0 0 1px ",";"],Object(Zr.a)(Kr(t),40))},$r=function(e){var t=e.checked,n=e.theme;return Object(f.css)(["background-color:",";color:",";"],Yr(n),!t&&Object(Zr.a)(Kr(n),40))},ea=m.a.div.withConfig({displayName:"VizExCheckbox__CheckboxBox",componentId:"nwd034-0"})(["flex-shrink:0;height:16px;width:16px;transition:color 0.15s ease-out,background-color 0.15s ease-out;color:",";border-color:currentColor;border:2px solid;border-radius:3px;position:relative;",";",";"],(function(e){var t=e.checked,n=e.theme;return t?Kr(n):Jr(n)}),(function(e){var t=e.hover,n=e.theme,r=e.checked;return t&&$r({theme:n,checked:r})}),(function(e){var t=e.focus,n=e.theme;return t&&Xr({theme:n})})),ta=m.a.label.withConfig({displayName:"VizExCheckbox__CheckboxWrapper",componentId:"nwd034-1"})(["position:relative;display:inline-flex;flex-direction:row;align-items:center;font-size:16px;cursor:pointer;:hover ","{","}input:focus + ","{","}"],ea,$r,ea,Xr),na=m.a.input.withConfig({displayName:"VizExCheckbox__CheckboxInput",componentId:"nwd034-2"})(["position:absolute;top:0;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;"]),ra=m.a.svg.withConfig({displayName:"VizExCheckbox__Indicator",componentId:"nwd034-3"})(["height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;"]),aa=m.a.div.withConfig({displayName:"VizExCheckbox__ContentWrapper",componentId:"nwd034-4"})(["padding-left:8px;user-select:none;cursor:pointer;"]),ia=function(e){var t=e.onChange,n=e.theme,r=e.children,a=e.checked,i=e.focus,o=e.hover,s=Object(Ke.a)(e,["onChange","theme","children","checked","focus","hover"]),c=Object(U.useRef)(null);return Object(d.jsxs)(ta,Object.assign({},s,{onClick:function(){c.current.focus()},"data-testid":"VizExCheckbox",checked:a,theme:n,children:[Object(d.jsx)(na,{ref:c,"data-testid":"VizExCheckbox-input",type:"checkbox",onChange:t}),Object(d.jsx)(ea,{theme:n,checked:a,focus:i,hover:o,children:a&&Object(d.jsx)(ra,{viewBox:"0 0 15 15.343",children:Object(d.jsx)("path",{d:"M1.013 8.11c0-.223.078-.412.234-.568l1.14-1.14c.155-.155.345-.233.568-.233s.413.077.57.233l2.46 2.47 5.492-5.5c.156-.156.346-.234.568-.234.224 0 .413.077.57.233l1.138 1.14c.156.155.234.345.234.568 0 .224-.078.414-.234.57l-6.06 6.06-1.14 1.14c-.155.155-.345.233-.568.233s-.413-.078-.57-.234l-1.138-1.14-3.03-3.03c-.156-.156-.234-.346-.234-.57z",fill:"currentColor"})})}),r&&Object(d.jsx)(aa,{children:r})]}))};ia.displayName="VizExCheckbox";ia.propTypes={checked:h.a.bool,children:h.a.node,focus:h.a.bool,hover:h.a.bool,onChange:h.a.func,theme:Wr.a};var oa=ia,sa=m.a.div.withConfig({displayName:"ConsentToCommunicate__BreakString",componentId:"lon4vs-0"})(["-ms-word-break:break-all;display:block;word-break:break-word;word-wrap:break-word;"]),ca=m()(tt.a).withConfig({displayName:"ConsentToCommunicate__SmallNoParagraphPadding",componentId:"lon4vs-1"})(["p{margin-bottom:0;}"]),ua=function(e){var t=e.message,n=e.companyName,r=e.consentToCommunicate,a=e.onChange,i=Object($t.a)(t)||Ot.a.text("conversations-visitor-message-history.email-capture.consentToCommunicate",{accountName:n});return Object(d.jsx)(oa,{checked:r,onChange:a,children:Object(d.jsx)(ca,{use:"help",children:Object(d.jsx)(sa,{children:Object(d.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})})})})};ua.displayName="ConsentToCommunicate";ua.propTypes={companyName:h.a.string,consentToCommunicate:h.a.bool.isRequired,message:h.a.string.isRequired,onChange:h.a.func.isRequired};var da=ua,la=/\s|@.{0,}@/,pa=function(e){Object(u.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).onConsentChange=function(){n.setState({hasConsentedToCommunicate:!n.state.hasConsentedToCommunicate})};n.state={email:"",emailError:!1,hasConsentedToCommunicate:!1,submitFailure:!1,submissionState:"ready"};n.handleChange=n.handleChange.bind(Object(l.a)(n));n.handleKeyPress=n.handleKeyPress.bind(Object(l.a)(n));n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n));return n}Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({email:e.target.value,emailError:!1,submitFailure:!1,submissionState:"ready"})}},{key:"handleKeyPress",value:function(e){var t=13;e.which===t&&this.handleSubmit()}},{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.sendVisitorEmailAddress,r=t.threadId,a=this.state,i=a.email,o=a.hasConsentedToCommunicate,s=i.trim();Nr.a.test(s)&&!s.match(la)?this.setState({submissionState:"submitting"},(function(){n({email:s,consentToCommunicate:o,threadId:r}).then((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).error;e.setState({submitFailure:Boolean(t),submissionState:"done"})})).done()})):this.setState({emailError:!0,submissionState:"ready"})}},{key:"getValidationMessage",value:function(){switch(!0){case this.state.emailError:return Object(d.jsx)(pn.a,{message:"conversations-visitor-message-history.email-capture.invalid"});case this.state.submitFailure:return Object(d.jsx)(pn.a,{message:"conversations-visitor-message-history.email-capture.failed"});default:return null}}},{key:"render",value:function(){var e=this.props,t=e.companyName,n=e.consentToCommunicateMessage,r=e.hasVisitorEmail,a=e.message,i=e.positionDescriptors,o=e.requiresConsentToCommunicate,s=this.state,c=s.email,u=s.hasConsentedToCommunicate,l=this.getValidationMessage();return Object(d.jsx)(Je,{positionDescriptors:i,use:Z.a,children:Object(d.jsx)(De,{children:r?Object(d.jsx)(Le,{children:Object(d.jsx)(pn.a,{"data-test-id":"email-capture-success",message:"conversations-visitor-message-history.email-capture.thanks"})}):Object(d.jsxs)(U.Fragment,{children:[Object(d.jsx)(Qr,{message:a,email:c,errorMessage:l,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onSubmit:this.handleSubmit,submissionState:this.state.submissionState}),o&&Object(d.jsx)(Le,{children:Object(d.jsx)(da,{message:n,companyName:t,consentToCommunicate:u,onChange:this.onConsentChange})},"email-prompt-content-section")]})})})}}]);return t}(U.PureComponent);pa.displayName="EmailCapturePromptMessage";pa.propTypes={companyName:h.a.string,consentToCommunicateMessage:h.a.string,hasVisitorEmail:h.a.bool.isRequired,message:Object(p.a)("EmailCapturePromptMessage").isRequired,positionDescriptors:X.a.isRequired,requiresConsentToCommunicate:h.a.bool,sendVisitorEmailAddress:h.a.func.isRequired,threadId:h.a.number.isRequired};var ba=pa,ha=n("19qb"),fa=n("AQmo"),ma=n("le4V"),ga=n("MBJP"),ja=n("ZqFO"),Oa=n("647q"),va=Object(ga.a)(Oa.getLatestWidgetData,(function(e){return Object(ja.c)(e)})),xa=Object(ga.a)(Oa.getLatestWidgetData,Object(ue.a)("companyName")),ya=n("Wtdz"),Ca=n("AEyM"),wa=n("eEyY"),ka=function(e){return{coloring:Object(fa.a)(e),companyName:xa(e),consentToCommunicateMessage:va(e),hasVisitorEmail:Object(ya.a)(e),requiresConsentToCommunicate:Object(ma.a)(e),threadId:Object(wa.getCurrentThreadId)(e)}},Ta={sendVisitorEmailAddress:Ca.sendVisitorEmailAddress},Ia=Object(ha.connect)(ka,Ta)(ba),Sa=function(e){return Object(d.jsx)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 28 25",xmlns:"http://www.w3.org/2000/svg"},e,{children:Object(d.jsx)("path",{d:"M12 7.663c-.042-.286.044-.577.234-.796.192-.218.469-.344.76-.344h2.011c.292 0 .57.126.76.344.192.22.277.51.236.796l-1.006 6.992c-.07.492-.494.857-.995.857-.5 0-.925-.365-.995-.857l-1.006-6.992zm2 13.841c-1.11 0-2.01-.894-2.01-1.997 0-1.103.9-1.998 2.01-1.998 1.111 0 2.01.895 2.01 1.998s-.899 1.997-2.01 1.997zm3.001-19.783C16.375.643 15.253 0 14 0s-2.374.643-3 1.72L.47 19.838c-.627 1.078-.627 2.365 0 3.442C1.096 24.357 2.217 25 3.47 25H24.53c1.253 0 2.374-.643 3-1.72.627-1.078.627-2.365 0-3.443L17.001 1.721z",fillRule:"evenodd"})}))};Sa.displayName="SVGWarning";var Ra=Sa,Aa=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,r=e.onRepublish,a=e.positionDescriptors,i=Object(ln.a)(n);return Object(d.jsxs)(Je,{positionDescriptors:a,use:Z.c,children:[Object(d.jsx)(yr,{fileAttachments:t,isLastMessage:!0,message:i}),Object(d.jsx)(Ue,{children:Object(d.jsxs)(tt.a,{use:"error",children:[Object(d.jsx)(tr.a,{icon:Object(d.jsx)(Ra,{}),className:"m-right-1"}),Object(d.jsx)(Ln.a,{onClick:function(){return r(i)},use:"error",children:Object(d.jsx)(pn.a,{message:"conversations-visitor-message-history.status.publishing.PUBLISH_FAILED"})})]})})]})}}]);return t}(U.PureComponent);Aa.displayName="FailedToPublishMessage";Aa.propTypes={fileAttachments:h.a.instanceOf(bn.List),message:Object(p.a)("FailedToPublish").isRequired,onRepublish:h.a.func.isRequired,positionDescriptors:X.a.isRequired};var Pa=Aa,Ma={onRepublish:n("N4ZN").a},Ea=Object(ha.connect)(null,Ma)(Pa),Na=n("gGDi");function _a(e){return"string"==typeof e}function qa(e){return _a(e)?e:e.has("label")?e.get("label"):e.get("value")}function Fa(e){return _a(e)?e:e.get("value")}var La=n("k8Ub"),Ba=n("dvoe"),Da=n("A5YI"),za=function(e){return Object(d.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32"},e,{children:Object(d.jsx)("path",{d:"M29.92 2.58L11.33 21.17l-9.25-9.25c-.362-.362-.862-.586-1.415-.586-1.105 0-2.001.896-2.001 2.001 0 .553.224 1.053.586 1.415L9.92 25.41c.362.362.862.587 1.415.587s1.053-.224 1.415-.587l20-20c.362-.362.586-.862.586-1.415 0-1.105-.896-2.001-2.001-2.001-.553 0-1.053.224-1.415.586z"})}))};za.displayName="SVGSuccess";var Ua=za,Va=m.a.div.withConfig({displayName:"QuickReplyGroup__ButtonWrapper",componentId:"sc-199v4jj-0"})(["margin-bottom:12px;> *{margin-right:8px;margin-bottom:8px;}> *:last-child{margin-right:0;}padding:8px;display:inline-block;"]),Ha=m()(_r.a).withConfig({displayName:"QuickReplyGroup__LeftAlignButton",componentId:"sc-199v4jj-1"})(["text-align:left;"]),Qa=function(e){Object(u.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleSendMulti=n.handleSendMulti.bind(Object(l.a)(n));n.handleQuickReplySend=n.handleQuickReplySend.bind(Object(l.a)(n));n.handleSendIndividual=n.handleSendIndividual.bind(Object(l.a)(n));n.handleSelect=n.handleSelect.bind(Object(l.a)(n));n.state={selected:Object(bn.Set)()};return n}Object(o.a)(t,[{key:"hasSelected",value:function(){return this.state.selected.size>0}},{key:"handleSelect",value:function(e){this.setState((function(t){var n=t.selected;return{selected:n.includes(e)?n.delete(e):n.add(e)}}))}},{key:"handleSendMulti",value:function(){var e=this.state.selected;if(this.hasSelected()){var t=e.map(qa).join(", ");this.handleQuickReplySend(t,e)}}},{key:"handleSendIndividual",value:function(e){var t=Object(bn.List)([e]),n=qa(e);this.handleQuickReplySend(n,t)}},{key:"handleQuickReplySend",value:function(e,t){var n=this.props,r=n.message;(0,n.publishMessage)({text:e,quickReply:Object(La.a)(r).set("quickReplies",t.toJS())})}},{key:"renderOptions",value:function(){var e=this.props,t=e.options,n=e.multiSelect,r=e.disabled,a=this.state.selected,i=n?this.handleSelect:this.handleSendIndividual;return t.map((function(e){var t=function(){return i(e)},o=a.includes(e),s=Fa(e),c=qa(e);if(!s||!c)return null;var u=n&&Object(d.jsx)(oa,{className:"m-right-2",checked:o,onChange:t,children:c});return Object(d.jsx)(Ha,{onClick:t,disabled:r,size:"sm",children:u||c},"quickreply."+s)}))}},{key:"renderSendButton",value:function(){var e=this.props,t=e.disabled;if(!e.multiSelect)return null;var n=!this.hasSelected()||t;return Object(d.jsx)(Da.a,{disabled:n,onClick:this.handleSendMulti,size:"sm",children:Object(d.jsx)(tr.a,{icon:Object(d.jsx)(Ua,{}),size:"sm"})},"send-button")}},{key:"render",value:function(){return Object(d.jsx)(Va,{"data-test-id":"quick-reply-group",children:[].concat(Object(Ba.a)(this.renderOptions()),[this.renderSendButton()])})}}]);return t}(U.Component);Qa.contextType=ve;Qa.defaultProps={multiSelect:!1,hasSentReply:!1};Qa.displayName="QuickReplyGroup";Qa.propTypes={disabled:h.a.bool.isRequired,message:h.a.oneOfType([Object(p.a)("CommonMessage"),Object(p.a)("InitialMessage")]).isRequired,multiSelect:h.a.bool.isRequired,options:h.a.instanceOf(bn.Set).isRequired,publishMessage:h.a.func};var Wa=Qa,Ga=7,Ya=(n("iKGd"),Gr.f),Ja=Gr.e,Ka=(Gr.a,Gr.b,Gr.g,Gr.f,Gr.h,Gr.h),Za=(Gr.h,"__PLACEHOLDER_VALUE__"),Xa=m.a.select.withConfig({displayName:"VizExMobileSelect__StyledSelect",componentId:"x0wghd-0"})(["appearance:none;background:none;border-radius:3px;border:1px solid transparent;color:inherit;cursor:inherit;font-size:16px;margin:0;outline:none;padding:8px 32px 10px 10px;width:100%;height:40px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;&::-ms-expand{display:none;}:focus::-ms-value{color:",";background:transparent;}"],(function(e){var t=e.theme;return Object(Gr.i)(t)})),$a=m.a.div.withConfig({displayName:"VizExMobileSelect__SelectContainer",componentId:"x0wghd-1"})(["background-color:",";border-radius:3px;border:1px solid ",";cursor:pointer;display:block;font-size:16px;height:40px;line-height:22px;padding:0;position:relative;text-align:left;transition:all 0.15s ease-out;width:100%;&::after{border-color:transparent;border-style:solid;border-width:0.375em;display:inline-block;vertical-align:middle;border-top-color:",";margin-top:0.375em;margin-top:-3px;content:' ';position:absolute;top:50%;right:1em;z-index:2;pointer-events:none;}"],(function(e){var t=e.theme;return Ja(t)}),(function(e){var t=e.theme;return Ya(t)}),(function(e){var t=e.theme;return Ka(t)})),ei=function(e){var t=e.options,n=e.disabled,r=e.value,a=e.onChange,i=e.placeholder,o=e.theme,s=Object(Ke.a)(e,["options","disabled","value","onChange","placeholder","theme"]),c=t.map((function(e){var t=e.value,n=e.text;return Object(d.jsx)("option",{value:t,children:n},t)}));return Object(d.jsx)($a,{theme:o,children:Object(d.jsxs)(Xa,Object.assign({},s,{"data-testid":"VizExSelect",disabled:n,defaultValue:Za,value:r,onChange:a,theme:o,children:[i&&Object(d.jsx)("option",{disabled:!0,value:Za,children:i}),c]}))})};ei.displayName="VizExMobileSelect";ei.propTypes={disabled:h.a.bool,onChange:h.a.func.isRequired,options:h.a.arrayOf(h.a.shape({text:h.a.string,value:h.a.string})).isRequired,placeholder:h.a.string,theme:Wr.a,value:h.a.string};var ti=ei,ni="__PLACEHOLDER_VALUE__",ri=function(e){var t=e.quickReplyOptions,n=e.onChange,r=e.disabled,a=e.value,i=e.placeholder,o=Object(U.useMemo)((function(){return t.map((function(e){var t=Fa(e);return{text:qa(e),value:t}})).toJS()}),[t]);return Object(d.jsx)(ti,{options:o,onChange:n,disabled:r,defaultValue:ni,value:a,placeholder:i})};ri.displayName="QuickReplySelect";ri.propTypes={disabled:h.a.bool,onChange:h.a.func.isRequired,placeholder:h.a.string,quickReplyOptions:h.a.instanceOf(bn.OrderedSet).isRequired,value:h.a.string};var ai=ri,ii=n("VADA"),oi=n("pHbL"),si=n("/OK6"),ci=n("SGjM"),ui=n("8HiZ"),di=Object(ee.a)((function(e){var t=e.companyLogo,n=e.customChatName;return new ui.a({avatar:t,firstName:n,senderType:Y.AGENT})})),li=n("Ebn+"),pi=n("G6fO"),bi=Object(ee.a)((function(e,t,n){var r=Object(li.agentTypeToSenderType)(Object(pi.getAgentType)(e)||n);return new ui.a({id:Object(pi.getUserId)(e)||t,avatar:Object(pi.getAvatar)(e),firstName:Object(pi.getFirstName)(e),email:Object(pi.getEmail)(e),lastName:Object(pi.getLastName)(e),senderType:r})})),hi=m.a.div.withConfig({displayName:"InitialMessageAvatar__MultiAvatarWrapper",componentId:"sc-1ezqhac-0"})(["width:100%;height:100%;display:flex;justify-content:center;flex-wrap:wrap;margin-right:4px;margin-left:-4px;& > *{flex:1;line-height:1;position:relative;& > *{position:absolute;left:0;bottom:-8px;}div{background-color:white;}}"]),fi=function(e){Object(u.a)(t,e);function t(){Object(i.a)(this,t);return Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}Object(o.a)(t,[{key:"getSenderAvatars",value:function(){var e=this.props,t=e.chatHeadingConfig,n=e.sender,r=e.sendFromResponders;if(Object(si.isFromBot)(n))return Object(bn.List)([n]);if(r.size)return Object(ci.a)(bi,r);var a=Object(ii.a)(t);return a?Object(bn.List)([di({companyLogo:a,customChatName:Object(oi.a)(t)})]):Object(bn.List)()}},{key:"renderAvatars",value:function(){var e=this.getSenderAvatars();if(!e.size)return Object(d.jsx)(K,{});if(1===e.size){var t=e.get(0);return Object(d.jsx)(K,{sender:t})}var n=2===e.size;return Object(d.jsx)(hi,{children:e.map((function(e,t){return Object(d.jsx)(K,{sender:e,size:n?"xs":"xxs"},t)}))})}},{key:"render",value:function(){return Object(d.jsx)(_e,{children:this.renderAvatars()})}}]);return t}(U.PureComponent);fi.displayName="InitialMessageAvatar";fi.propTypes={chatHeadingConfig:h.a.oneOfType([Object(p.a)("CompanyChatHeadingConfig"),Object(p.a)("OwnerChatHeadingConfig"),Object(p.a)("UsersAndTeamsChatHeadingConfig")]),sendFromResponders:h.a.instanceOf(bn.List).isRequired,sender:Object(p.a)("Sender")};var mi=fi,gi=function(e){Object(u.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleQuickReplySend=function(){var e=n.props,t=e.message,r=e.publishMessage,a=n.state.selectedQuickReply;r({text:qa(a),quickReply:Object(La.a)(t).set("quickReplies",[a])})};n.handleQuickReplySelect=function(e){var t=e.target.value,r=n.props.message,a=Object(La.d)(r).filter((function(e){return Fa(e)===t})).first();n.setState({selectedQuickReply:a})};n.showQuickReplySelection=function(){var e=n.props.message,t=Object(La.d)(e),r=Object(La.b)(e);return n.showQuickReplies()&&t.count()>Ga&&!r};n.renderQuickReplySelect=function(){var e=n.props,t=e.message,r=e.isThreadStarted,a=e.requiresExplicitConsentToProcess,i=n.state.selectedQuickReply,o=Object(La.d)(t);return Object(d.jsx)("div",{className:"m-y-2",children:Object(d.jsx)(ai,{quickReplyOptions:o,disabled:a||!r,onChange:n.handleQuickReplySelect,value:Fa(i),placeholder:Ot.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")})})};n.renderQuickReplySendButton=function(){var e=n.props.isThreadStarted,t=n.state.selectedQuickReply;return Object(d.jsx)(Ue,{children:Object(d.jsx)(_r.a,{disabled:!e||!Fa(t),onClick:n.handleQuickReplySend,size:"sm",use:"primary",children:Object(d.jsx)(nt.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})})})};n.state={selectedQuickReply:Object(bn.Map)()};return n}Object(o.a)(t,[{key:"hasQuickReplyOptions",value:function(){var e=this.props.message,t=Object(H.getSenderType)(e);return Object(La.a)(e)&&t===Y.BOT}},{key:"showQuickReplies",value:function(){var e=this.props,t=e.hasUnansweredQuickReplyMessage,n=e.positionDescriptors,r=t&&n.get(dn.c);return this.hasQuickReplyOptions()&&r}},{key:"renderAvatar",value:function(){var e=this.props,t=e.chatHeadingConfig,n=e.message,r=e.senders,a=e.sendFromResponders,i=Object(H.getSenderId)(n),o=Object(H.getSenderType)(n),s=ne(i,o,r),c=Object(Q.b)(s);return Object(d.jsx)(mi,{chatHeadingConfig:t,sender:c,sendFromResponders:a})}},{key:"renderQuickReplyGroup",value:function(){var e=this.props,t=e.isThreadStarted,n=e.message,r=e.publishMessage,a=e.requiresExplicitConsentToProcess,i=Object(La.d)(n),o=Object(La.b)(n);return Object(d.jsx)(Ue,{children:Object(d.jsx)(Wa,{disabled:a||!t,options:i,message:n,multiSelect:o,publishMessage:r,onSend:this.handleQuickReplySend})})}},{key:"renderContentSection",value:function(){var e,t,n=Object(nn.a)(["metadata","@type"]),r=this.props.message;if(Boolean(n(r))){e=Object(H.getPlainText)(r);t=Object(H.getRichText)(r)}else{e=Object(Na.b)(r);t=Object(Na.a)(r)}var a=Or.a.link(t,{stripPrefix:!1});return Object(d.jsxs)(Le,{children:[Object(d.jsx)(tn,{"aria-label":Ot.a.text("conversations-visitor-message-history.agentMessage"),contentText:a||e}),this.showQuickReplySelection()&&this.renderQuickReplySelect()]})}},{key:"renderMessageFooter",value:function(){var e=this.props.message,t=Object(La.d)(e),n=Object(La.b)(e);return this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=Ga||n)?this.renderQuickReplyGroup():null}},{key:"render",value:function(){var e=this.props.positionDescriptors,t=e.get(dn.a);return Object(d.jsxs)(Je,{positionDescriptors:e,use:Z.a,children:[t&&Object(d.jsx)(He,{children:this.renderAvatar()}),Object(d.jsx)(De,{children:this.renderContentSection()}),this.renderMessageFooter()]})}}]);return t}(U.PureComponent);gi.displayName="InitialMessage";gi.propTypes={chatHeadingConfig:h.a.oneOfType([Object(p.a)("CompanyChatHeadingConfig"),Object(p.a)("OwnerChatHeadingConfig"),Object(p.a)("UsersAndTeamsChatHeadingConfig")]),hasUnansweredQuickReplyMessage:h.a.bool,isThreadStarted:h.a.bool.isRequired,message:Object(p.a)("InitialMessage").isRequired,positionDescriptors:X.a.isRequired,publishMessage:h.a.func,requiresExplicitConsentToProcess:h.a.bool.isRequired,sendFromResponders:h.a.instanceOf(bn.List).isRequired,senders:$.a.isRequired};var ji=gi,Oi=n("p9k8"),vi=n("WUj5"),xi=n("hTKa"),yi=n("PYok"),Ci=n("byjC"),wi=n("k09d"),ki=n("wD2U"),Ti=function(e){var t=Object(wi.a)(e);return{chatHeadingConfig:Object(vi.a)(e),sendFromResponders:Object(xi.a)(e),hasUnansweredQuickReplyMessage:Object(Ci.a)(e,{thread:t}),isThreadStarted:Object(Oi.a)(t),mobile:Object(ki.getIsMobile)(e)}},Ii={publishMessage:yi.a},Si=Object(ha.connect)(Ti,Ii)(ji),Ri=function(e){var t=Object(H.getSenderType)(e);return Object(La.a)(e)&&t===Y.BOT},Ai=function(e){Object(u.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleQuickReplySend=function(){var e=n.props,t=e.message,r=e.publishMessage,a=n.state.selectedQuickReply;r({text:qa(a),quickReply:Object(La.a)(t).set("quickReplies",[a])})};n.handleQuickReplySelect=function(e){var t=e.target.value,r=n.props.message,a=Object(La.d)(r).filter((function(e){return Fa(e)===t})).first();n.setState({selectedQuickReply:a})};n.showQuickReplies=function(){var e=n.props,t=e.hasUnansweredQuickReplyMessage,r=e.message,a=e.positionDescriptors,i=t&&a.get(dn.c);return Ri(r)&&i};n.showQuickReplySelection=function(){var e=n.props.message,t=Object(La.d)(e),r=Object(La.b)(e);return n.showQuickReplies()&&t.count()>Ga&&!r};n.renderQuickReplyGroup=function(){var e=n.props,t=e.isThreadStarted,r=e.message,a=e.publishMessage,i=e.requiresExplicitConsentToProcess,o=Object(La.d)(r),s=Object(La.b)(r);return Object(d.jsx)(Ue,{children:Object(d.jsx)(Wa,{options:o,disabled:i||!t,message:r,multiSelect:s,publishMessage:a,onChange:n.handleQuickReplyUpdate})})};n.renderQuickReplySendButton=function(){var e=n.props.isThreadStarted,t=n.state.selectedQuickReply;return Object(d.jsx)(Ue,{children:Object(d.jsx)(_r.a,{disabled:!e||!Fa(t),onClick:n.handleQuickReplySend,size:"sm",use:"primary",children:Object(d.jsx)(nt.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})})})};n.renderQuickReplySelect=function(){var e=n.props,t=e.message,r=e.isThreadStarted,a=e.requiresExplicitConsentToProcess,i=n.state.selectedQuickReply,o=Object(La.d)(t);return Object(d.jsx)("div",{className:"m-y-2",children:Object(d.jsx)(ai,{quickReplyOptions:o,disabled:a||!r,onChange:n.handleQuickReplySelect,value:Fa(i),placeholder:Ot.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")})})};n.state={selectedQuickReply:Object(bn.Map)()};return n}Object(o.a)(t,[{key:"isSentFromVisitor",value:function(){return Object(H.getSenderType)(this.props.message)===Y.VISITOR}},{key:"renderMessageHeader",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors,r=e.senders;if(!n.includes(dn.b)||this.isSentFromVisitor())return null;var a=Object(H.getSenderId)(t),i=Object(H.getSenderType)(t),o=ne(a,i,r),s=Object(Q.b)(o);s||(s=Object(ui.a)({senderType:i,firstName:Object(H.getFromName)(t),email:Object(H.getFromAddress)(t)||null}));var c=ae(o);return Object(d.jsxs)(He,{children:[Object(d.jsx)(_e,{children:Object(d.jsx)(K,{sender:s,isLoading:c})}),Object(d.jsx)(We,{children:Object(d.jsx)(ut,{isSenderLoading:c,sender:s})})]})}},{key:"renderTimeStamp",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors,r=e.locale,a=n.includes(dn.d),i=Object(H.getTimestamp)(t);return a&&i?Object(d.jsx)(Ue,{children:Object(d.jsx)(tt.a,{use:"help",children:new Date(i).toLocaleTimeString(r,{hour:"2-digit",minute:"2-digit"})})}):null}},{key:"renderMessageFooter",value:function(){var e=this.props.message,t=Object(La.d)(e),n=Object(La.b)(e);return this.showQuickReplies()&&this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=Ga||n)?this.renderQuickReplyGroup():this.renderTimeStamp()}},{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,r=e.positionDescriptors,a=e.toggleOpen,i=e.mobile,o=this.isSentFromVisitor()?Z.c:Z.a;return Object(d.jsxs)(Je,{positionDescriptors:r,use:o,children:[this.renderMessageHeader(),Object(d.jsx)(yr,{fileAttachments:t,isLastMessage:r.includes(dn.c),message:n,quickReplySelect:this.showQuickReplySelection()&&this.renderQuickReplySelect,mobile:i,toggleOpen:a}),this.renderMessageFooter()]})}}]);return t}(U.PureComponent);Ai.displayName="CommonMessage";Ai.propTypes={fileAttachments:h.a.instanceOf(bn.List),hasUnansweredQuickReplyMessage:h.a.bool,isThreadStarted:h.a.bool.isRequired,locale:h.a.string.isRequired,message:Object(p.a)("CommonMessage").isRequired,mobile:h.a.bool,positionDescriptors:X.a.isRequired,publishMessage:h.a.func,requiresExplicitConsentToProcess:h.a.bool.isRequired,senders:$.a,toggleOpen:h.a.func};var Pi=Ai,Mi=n("jxkM"),Ei=n("u8Gm"),Ni=function(e){var t=Object(wi.a)(e);return{hasUnansweredQuickReplyMessage:Object(Ci.a)(e,{thread:t}),isThreadStarted:Object(Oi.a)(t),mobile:Object(ki.getIsMobile)(e),locale:Object(Ei.a)(e)}},_i={publishMessage:yi.a,toggleOpen:Mi.toggleOpen},qi=Object(ha.connect)(Ni,_i)(Pi),Fi=n("lOT2"),Li=function(e){return{requiresExplicitConsentToProcess:Object(Fi.a)(e)}},Bi={},Di=Object(ha.connect)(Li,Bi),zi=["id"],Ui=["timestamp"],Vi=(Object(nn.a)(zi),Object(nn.a)(Ui)),Hi=Object(U.memo)((function(e){var t=e.message,n=e.labelPadding,r=e.locale,a=Vi(t),i=new Date(a).toLocaleDateString(r,{year:"numeric",month:"long",day:"numeric"});return Object(d.jsx)(jt,{labelPadding:n,children:Object(d.jsx)(tt.a,{use:"help",children:i})})}));Hi.displayName="DateLabelMessage";Hi.propTypes={labelPadding:h.a.string,locale:h.a.string.isRequired,message:Object(p.a)("DateMessage").isRequired};var Qi=Hi,Wi=m.a.div.withConfig({displayName:"DateLabel__StyleWrapper",componentId:"mnrucw-0"})(["","{border-color:",";}"],mt,g.f),Gi=function(e){return Object(d.jsx)(Wi,{children:Object(d.jsx)(Qi,Object.assign({},e,{labelPadding:"m-y-3"}))})};Gi.displayName="DateLabel";Gi.propTypes=Qi.propTypes;var Yi,Ji=Gi,Ki=function(e){return{locale:Object(Ei.a)(e)}},Zi=Object(ha.connect)(Ki,null)(Ji),Xi=n("9d9s"),$i=n("E6wg"),eo=function(e){return function(t){var n=Object(ha.useSelector)($i.getSessionId);return Object(d.jsx)(e,Object.assign({},t,{sessionId:n}))}},to=n("081M"),no=function(e){return function(t){var n=Object(ha.useSelector)(to.getHubspotUtk);return Object(d.jsx)(e,Object.assign({},t,{hubspotUtk:n}))}};n.d(t,"a",(function(){return ho}));var ro=Xi.a.ACTIVELY_PUBLISHING,ao=Xi.a.COMMON_MESSAGE,io=Xi.a.DATE_MESSAGE,oo=Xi.a.EMAIL_CAPTURE_PROMPT,so=Xi.a.FAILED_TO_PUBLISH,co=Xi.a.INITIAL_MESSAGE,uo=Xi.a.OFFICE_HOURS,lo=Xi.a.TYPICAL_RESPONSE_TIME,po=Xi.a.TYPING,bo=Xi.a.FEEDBACK_SURVEY,ho=(Yi={},Object(a.a)(Yi,ro,wr),Object(a.a)(Yi,ao,Di(qi)),Object(a.a)(Yi,io,Zi),Object(a.a)(Yi,oo,Ia),Object(a.a)(Yi,so,Ea),Object(a.a)(Yi,co,Di(Si)),Object(a.a)(Yi,uo,un),Object(a.a)(Yi,lo,un),Object(a.a)(Yi,po,bt),Object(a.a)(Yi,bo,eo(no(Er))),Yi)},"5els":function(e,t,n){var r=n("uIOU"),a=n("EzJv"),i=n("2+Io");function o(){this.size=0;this.__data__={hash:new r,map:new(i||a),string:new r}}e.exports=o},"5oUx":function(e,t,n){"use strict";var r=n("fQRB"),a=n("Ebn+"),i=n("G6fO"),o=n("MBJP"),s=n("k09d"),c=n("Q2fA"),u=Object(o.a)([function(e){return e},s.a],(function(e,t){return Object(c.a)(e,{thread:t})})),d=n("eEyY"),l=n("QYOI"),p=n("+TdC"),b=n("BvOu"),h=n("B/8b");n.d(t,"a",(function(){return f}));var f=Object(o.a)([u,d.getCurrentThreadId],(function(e,t){if(!e||!t)return Object(l.List)();var n=Object(a.agentTypeToCMFSenderType)(Object(i.getAgentType)(e),!0),o=Object(h.a)(n);return Object(l.List)([new p.a({id:Object(b.generateUuid)(),typingState:null,sender:Object(r.a)({"@type":n},o,Object(i.getUserId)(e))})])}))},"5rZi":function(e,t,n){"use strict";n.r(t);n.d(t,"createNewThread",(function(){return A}));var r=n("+LtA"),a=n("Ut5p"),i=n("QYOI"),o=n("JGJA"),s=n("4dq7"),c=n("dIvY"),u=n("sWFM"),d=n("V0XL"),l=n("E6wg"),p=n("lJFu"),b=n("Ryja"),h=n("Ux+X"),f=n("081M"),m=n("k3iI"),g=n("qwm9"),j=n("D1SC"),O=n("PY3R"),v=n("q1tZ"),x=n("647q"),y=n("2BFa"),C=n("xM+F"),w=n("CdQ/"),k=n("dZ2B"),T=n("R4/u"),I=Object(a.b)(j.a.STARTED),S=Object(a.b)(j.a.SUCCEEDED,(function(e){return{channel:e.channel,threadId:e.threadId,conversation:e.conversation,threadHistory:e.threadHistory,shouldAskForEmail:e.shouldAskForEmail}})),R=Object(a.b)(j.a.FAILED,(function(e){return{status:e.status,message:e.message,error:e.error}}));function A(){return function(e,t){var n=Object(l.getSessionId)(t()),a=Object(u.getMessageId)(t()),j=Object(d.getMessagesPageUri)(t()),A=Object(f.getHubspotUtk)(),P=Object(x.getLatestWidgetData)(t());e(I());return Object(g.createVisitorThread)({sessionId:n,hubspotUtk:A,messageId:a,messagesPageUri:j,visitorThreadInitialHistory:Object(b.getVisitorInitialThreadHistory)(t()),widgetData:P,zoneId:Object(k.getUserTimezone)()}).then((function(n){var a=n.channelDetails,u=n.sessionId,d=n.id,l=n.history,b=n.shouldAskForEmail,f=new r.a(Object.assign({},l,{attachments:Object(i.Map)(Object(o.a)("attachments",l))})),g=Object(p.buildCreatedThread)({channelDetails:a,messagesPageUri:j,threadId:d,threadHistory:f});e(Object(m.updateSessionId)(u));e(Object(h.trackInteraction)("start-conversation",{action:"new conversation started",threadId:d}));e(Object(T.b)());e(S({channel:Object(v.a)(a),threadId:d,conversation:g,threadHistory:f,shouldAskForEmail:b}));e(Object(s.addAvailabilityMessage)({channel:Object(v.a)(a),threadId:d}));Object(O.a)({thread:g});Object(y.gdprCookieConsentOnExitIntentEnabled)(t(),P)||Object(C.getIsPrivateLoad)(P)||Object(c.handleStoreMessagesCookie)(Object(w.getMessagesUtk)())})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(R({status:t.status,message:t.message,error:t}))}))}}},"6PLn":function(e,t,n){"use strict";n.r(t);n.d(t,"applyGdprConsent",(function(){return i}));var r=n("Qf6G"),a=n("FPMu"),i=function(){return function(e,t){Object(a.shouldRecordImplicitConsentToProcess)(t())&&e(Object(r.consentToProcess)());return Promise.resolve()}}},"6aYC":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("KXN9"),a=n("x1JE"),i=n("MBJP"),o=n("eEyY"),s=n("goEE"),c=n("a/jS"),u=Object(i.a)([c.a,o.getCurrentThreadId],(function(e,t){var n=Object(a.getEntries)(e).map(r.a);return Object(s.getSortedMessagesByThreadId)(n,t)}))},"6s0Z":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return a}));n.d(t,"c",(function(){return i}));var r="agent",a="default",i="visitor"},"6upE":function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=n},"6xAP":function(e,t,n){"use strict";var r=n("eP/i"),a=n("QYOI"),i=n("rkqN"),o=Object(a.Record)({width:"auto",minHeight:36,borderColor:r.h,whiteSpace:"normal",lineHeight:"1rem",color:r.h},"QuickReplyTheme"),s=Object(a.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:r.l,borderColor:r.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:r.p,fileAttachmentTheme:Object(i.a)(),quickReplyTheme:o(),headerBackgroundColor:r.q,headerTextColor:r.p,avatarBackgroundColor:r.a,avatarBorderColor:r.a,avatarTextColor:r.p},"Theme");t.a=s},"7A+m":function(e,t,n){"use strict";var r=n("19qb"),a=n("8g7g"),i=n("V2EP"),o=n("jM00"),s=n("PYok"),c=n("7yF8"),u=n("MBJP"),d=n("Pda3"),l=n("M/2P"),p=Object(u.a)([l.getAsyncPubSubClient],d.isFailed),b=n("k09d"),h=n("AQmo"),f=n("V0XL"),m=n("JoPj"),g=n("byjC"),j=n("ZAuv"),O=n("w1Zi"),v=n("84LK"),x=n("piVz"),y=n("80AS"),C=n("jRRu"),w=n("wD2U"),k=n("vwA6"),T=n("gALC"),I=n("DY0p"),S=n("NpZo"),R=n("JGJA"),A=function(e){return Object(R.a)("messageEditorStaging",e)},P=n("MJM1"),M=n("w1qe"),E=function(e,t){return Object(P.a)([e,M.a],t)},N=Object(u.a)(S.getSelectedThreadId,A,(function(e,t){return E(e,t)})),_=n("Ut5p"),q=n("NID/"),F=Object(_.b)(q.E,(function(e){return e})),L=Object(_.b)(q.x,(function(e){return e})),B=function(e){return function(t,n){t(F({stagingText:e,threadId:Object(S.getSelectedThreadId)(n())}))}},D=function(){return function(e,t){e(L(Object(S.getSelectedThreadId)(t())))}},z=n("/gEt"),U=n("2gT5"),V=n("A+sO"),H=n("JWgK"),Q=function(e){var t=Object(b.a)(e),n=!Object(y.a)(e,{thread:t})&&Object(g.a)(e,{thread:t}),r=Object(C.getIsBot)(e)&&Object(V.getIsWidgetInAwayMode)(e)&&!Object(U.isPersistedThread)(t);return{coloring:Object(h.a)(e),currentConversation:t,disablePublish:!Object(c.a)(e),disableTextInput:n||r,showQuickReplyPlaceholder:n,isOnFocus:Object(T.a)(e),stagedMessage:N(e),messagesPageUri:Object(f.getMessagesPageUri)(e),networkOffline:p(e),showingHsBranding:Object(m.a)(e),showInitialMessageBubble:Object(x.a)(e),stagedAttachments:Object(o.a)(e),mobile:Object(w.getIsMobile)(e),shouldHideAttachmentButton:Object(I.a)(e),shouldSendInputStagingEvent:Object(z.a)(),canUploadAttachments:Object(H.a)(e,{thread:t})}},W={closeInitialMessageBubble:v.a,onRemoveAttachment:a.a,onSelectAttachmentFile:i.a,publishMessage:s.a,publishTypingMessage:j.a,toggleOnAndOffInputFocus:k.a,setMessageEditorStagingText:B,removeMessageEditorStagingText:D};t.a=Object(r.connect)(Q,W)(O.a)},"7j4v":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=3e3},"7yF8":function(e,t,n){"use strict";var r=n("MBJP"),a=n("Pda3"),i=n("kV9q"),o=n("M/2P"),s=n("JGJA"),c=n("KXN9"),u=n("x1JE"),d=n("7bjg"),l=Object(s.a)("subscriptions"),p=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientKey;return void 0===t?d.a:t},b=Object(r.a)([p,l],u.getEntry),h=(Object(r.a)([b],c.a),n("rjAk")),f=n("Ryja"),m=n("dHfq"),g=n("ZSXR");n.d(t,"a",(function(){return j}));var j=Object(r.a)([f.getAsyncStagedThread,o.getAsyncPubSubClient,h.hasPersistedThreads,b,m.a,g.a],(function(e,t,n,r,o,s){return!Object(a.isStarted)(e)&&(!(!Object(a.isUninitialized)(e)||n)||!(!Object(a.isSucceeded)(o)&&!Object(a.isUninitialized)(o)||!Object(a.isSucceeded)(s)&&!Object(a.isUninitialized)(s))&&(!!(n&&Object(i.isClientReady)(t)&&Object(a.isSucceeded)(r))||!!(Object(a.isSucceeded)(e)&&Object(i.isClientReady)(t)&&Object(a.isSucceeded)(r))))}))},"80AS":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("MBJP"),a=n("J4oD"),i=n("C3IS"),o=n("V+nC"),s=n("iPDb"),c=n("k8Ub"),u=n("kWFB"),d=Object(r.a)([a.historyDataForThread],(function(e){if(!e||!Object(u.hasMessages)(e))return!0;var t=Object(s.a)(e).filter((function(e){return Object(i.b)(e)&&!Object(i.c)(e)||Object(o.a)(e)})).last();return Object(c.c)(t)}))},"84zR":function(e,t,n){"use strict";n.r(t);n.d(t,"uploadAttachment",(function(){return g}));var r=n("HElP"),a=n("A3yT"),i=n("Ux+X"),o=n("E6wg"),s=n("9P7L"),c=n("xAl4"),u=n("JIa2"),d=n("VXRw"),l=n("lnDz"),p=n("Zn4N"),b=n("gygH"),h=n("Wnz4"),f=n("kSDi"),m=n("R4/u"),g=function(e){var t=e.attachment,n=e.threadId;return function(e,g){var j=Date.now();e(Object(d.attachmentUploadStart)({attachment:t,threadId:n}));var O=Object(o.getSessionId)(g()),v=Object(a.getLocalId)(t),x=Object(a.getFile)(t),y=Object(u.createFormDataForAttachment)({file:x});return Object(s.fetchAttachmentUploadUrlClient)({sessionId:O,threadId:n}).then((function(t){var r=t.uploadUrl;return Object(c.uploadAttachmentClient)({formData:y,onProgress:function(t){var r=t.loaded,a=t.total;e(Object(b.handleAttachmentUploadProgress)({localId:v,threadId:n,loaded:r,total:a}))},uploadUrl:f.a+"/"+r})})).then((function(t){var a=Object(r.a)(t.objects,1)[0],o=Date.now();e(Object(l.attachmentUploadComplete)({localId:v,threadId:n,fileId:a.id,uploadedFile:a}));e(Object(m.a)());e(Object(i.trackInteraction)("attached-file",{action:"attached file","attachment-type":a.extension,"attachment-size-bytes":x.size,"upload-time-ms":o-j}))})).catch((function(t){if(t&&t.responseJSON&&t.responseJSON.message.includes("not allowed")){e(Object(h.attachmentError)(p.a,n));e(Object(i.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":"invalid file type"}))}else{e(Object(h.attachmentError)(p.c,n));e(Object(i.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":"upload error"}))}}))}}},"8FuJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("Ebn+"),a=n("8HiZ"),i=n("G6fO"),o=n("MBJP"),s=Object(o.b)((function(e,t,n){var o=Object(r.agentTypeToSenderType)(Object(i.getAgentType)(e)||n);return new a.a({id:Object(i.getUserId)(e)||t,avatar:Object(i.getAvatar)(e),firstName:Object(i.getFirstName)(e),email:Object(i.getEmail)(e),lastName:Object(i.getLastName)(e),senderType:o})}))},"8HiZ":function(e,t,n){"use strict";var r=n("QYOI"),a=Object(r.Record)({avatar:null,email:null,firstName:null,id:null,lastName:null,senderType:null},"Sender");t.a=a},"8M+t":function(e,t,n){"use strict";var r=n("5Enb"),a=n("edeU"),i=n("+eZO"),o=n("LpN+"),s=n("g05V"),c=n("QgEn"),u=n("VfuR"),d=n.n(u),l=n("Ktcs"),p=n("9f1P"),b=n.n(p),h=n("eP/i"),f=n("0IL2"),m=n("mKxs"),g=n("evgc"),j=n("sl/w"),O=b.a.div.withConfig({displayName:"ProcessConsentPrompt__ConsentPromptWrapper",componentId:"s2qyig-0"})(["border-top:2px solid ",";"],h.f),v=b.a.div.withConfig({displayName:"ProcessConsentPrompt__AlertWrapper",componentId:"s2qyig-1"})(["margin:10px;"]),x=function(e){Object(s.a)(t,e);function t(){Object(r.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(a.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.trackInteraction)("widget-interaction",{action:"view consent to process"})}},{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.consentToProcess,r=e.consentToProcessError,a=e.consentToProcessMessage,i=e.dismissConsentToProcessError,o=e.showGdprConsentToProcessButton;return Object(c.jsx)(O,{children:r?Object(c.jsx)(v,{children:Object(c.jsx)(g.a,{title:Object(c.jsx)(j.a,{message:"conversations-visitor-ui.network.offline.title"}),onClose:i})}):Object(c.jsx)(f.a,{showButton:o,message:a,onClick:n,coloring:t})})}}]);return t}(l.Component);x.displayName="ProcessConsentPrompt";x.propTypes={coloring:Object(m.a)("ColoringRecord"),consentToProcess:d.a.func,consentToProcessError:d.a.bool,consentToProcessMessage:d.a.string,dismissConsentToProcessError:d.a.func,showGdprConsentToProcessButton:d.a.bool,trackInteraction:d.a.func};t.a=x},"8Q5G":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];"function"==typeof e&&e.apply(void 0,n)}},"8cLO":function(e,t,n){"use strict";n.r(t);n.d(t,"gdprExplicitConsentRequired",(function(){return o}));var r=n("DdHT"),a=n("ZqFO"),i=n("VvTX"),o=Object(r.a)(a.f,i.getGdprExplicitConsentRequired)},"8f3s":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("A3yT"),a=n("xYYH"),i=n("p3n+"),o=function(e){if(!e)return null;var t=e.filter(a.isUploadCompleted).map(r.getFileId);return t.size?Object(i.a)({fileIds:t}):null}},"8g7g":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("A3yT"),a=n("Ux+X"),i=n("BnUr"),o=n("jVj2"),s=function(e){var t=e.attachment,n=e.thread;return function(e){var s=Object(i.getThreadId)(n),c=Object(r.getLocalId)(t);e(Object(o.removeAttachment)({localId:c,threadId:s}));e(Object(a.trackInteraction)("remove-staged-attachment",{action:"remove staged attachment"}))}}},"90r9":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("dIvY"),a=n("CdQ/"),i=n("Ux+X");function o(){return function(e){Object(r.handleStoreMessagesCookie)(Object(a.getMessagesUtk)());e(Object(i.trackInteraction)("widget-interaction",{action:"clicked consent to cookies button"}))}}},"9C7g":function(e,t,n){"use strict";var r=n("QYOI"),a="<<anonymous>>",i={listOf:l,mapOf:b,orderedMapOf:h,setOf:f,orderedSetOf:m,stackOf:g,iterableOf:j,recordOf:O,shape:x,contains:x,mapContains:y,list:c("List",r.List.isList),map:c("Map",r.Map.isMap),orderedMap:c("OrderedMap",r.OrderedMap.isOrderedMap),set:c("Set",r.Set.isSet),orderedSet:c("OrderedSet",r.OrderedSet.isOrderedSet),stack:c("Stack",r.Stack.isStack),seq:c("Seq",r.Seq.isSeq),record:c("Record",(function(e){return e instanceof r.Record})),iterable:c("Iterable",r.Iterable.isIterable)};function o(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof r.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function s(e){function t(t,n,r,i,o,s){for(var c=arguments.length,u=Array(c>6?c-6:0),d=6;d<c;d++)u[d-6]=arguments[d];s=s||r;i=i||a;return null!=n[r]?e.apply(void 0,[n,r,i,o,s].concat(u)):t?new Error("Required "+o+" `"+s+"` was not specified in `"+i+"`."):void 0}var n=t.bind(null,!1);n.isRequired=t.bind(null,!0);return n}function c(e,t){function n(n,r,a,i,s){var c=n[r];if(!t(c)){var u=o(c);return new Error("Invalid "+i+" `"+s+"` of type `"+u+"` supplied to `"+a+"`, expected `"+e+"`.")}return null}return s(n)}function u(e,t,n){function r(r,a,i,s,c){for(var u=arguments.length,d=Array(u>5?u-5:0),l=5;l<u;l++)d[l-5]=arguments[l];var p=r[a];if(!n(p)){var b=s,h=o(p);return new Error("Invalid "+b+" `"+c+"` of type `"+h+"` supplied to `"+i+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+i+"` for propType `"+c+"`, expected a function.");for(var f=p.toArray(),m=0,g=f.length;m<g;m++){var j=e.apply(void 0,[f,m,i,s,c+"["+m+"]"].concat(d));if(j instanceof Error)return j}}return s(r)}function d(e){function t(t,n,r,a,i){for(var o=arguments.length,s=Array(o>5?o-5:0),c=5;c<o;c++)s[c-5]=arguments[c];var u=t[n];if("function"!=typeof e)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+r+"` for propType `"+i+"`, expected a function.");for(var d=u.keySeq().toArray(),l=0,p=d.length;l<p;l++){var b=e.apply(void 0,[d,l,r,a,i+" -> key("+d[l]+")"].concat(s));if(b instanceof Error)return b}}return s(t)}function l(e){return u(e,"List",r.List.isList)}function p(e,t,n,r){function a(){for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return u(e,n,r).apply(void 0,i)||t&&d(t).apply(void 0,i)}return s(a)}function b(e,t){return p(e,t,"Map",r.Map.isMap)}function h(e,t){return p(e,t,"OrderedMap",r.OrderedMap.isOrderedMap)}function f(e){return u(e,"Set",r.Set.isSet)}function m(e){return u(e,"OrderedSet",r.OrderedSet.isOrderedSet)}function g(e){return u(e,"Stack",r.Stack.isStack)}function j(e){return u(e,"Iterable",r.Iterable.isIterable)}function O(e){function t(t,n,a,i,s){for(var c=arguments.length,u=Array(c>5?c-5:0),d=5;d<c;d++)u[d-5]=arguments[d];var l=t[n];if(!(l instanceof r.Record)){var p=o(l);return new Error("Invalid "+i+" `"+s+"` of type `"+p+"` supplied to `"+a+"`, expected an Immutable.js Record.")}for(var b in e){var h=e[b];if(h){var f=l.toObject(),m=h.apply(void 0,[f,b,a,i,s+"."+b].concat(u));if(m)return m}}}return s(t)}function v(e){var t=void 0===arguments[1]?"Iterable":arguments[1],n=void 0===arguments[2]?r.Iterable.isIterable:arguments[2];function a(r,a,i,s,c){for(var u=arguments.length,d=Array(u>5?u-5:0),l=5;l<u;l++)d[l-5]=arguments[l];var p=r[a];if(!n(p)){var b=o(p);return new Error("Invalid "+s+" `"+c+"` of type `"+b+"` supplied to `"+i+"`, expected an Immutable.js "+t+".")}var h=p.toObject();for(var f in e){var m=e[f];if(m){var g=m.apply(void 0,[h,f,i,s,c+"."+f].concat(d));if(g)return g}}}return s(a)}function x(e){return v(e)}function y(e){return v(e,"Map",r.Map.isMap)}e.exports=i},"9P7L":function(e,t,n){"use strict";n.r(t);n.d(t,"fetchAttachmentUploadUrlClient",(function(){return i}));var r=n("VYoM"),a="livechat-public/v1/attachment/upload-url",i=function(e){var t=e.sessionId,n=e.threadId;return r.a.get(a,{query:{sessionId:t,threadId:n}})}},"9d9s":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("GzqH"),a=n("0GyJ"),i=n("7hVK"),o=n("z352"),s=n("awVq"),c=n("3xeV"),u=n("tY0N"),d=n("UsK4"),l=n("GPok"),p={ACTIVELY_PUBLISHING:l.a,COMMON_MESSAGE:a.a,DATE_MESSAGE:r.a,EMAIL_CAPTURE_PROMPT:i.a,FAILED_TO_PUBLISH:l.b,INITIAL_MESSAGE:o.a,OFFICE_HOURS:s.a,TYPICAL_RESPONSE_TIME:c.a,TYPING:u.a,FEEDBACK_SURVEY:d.a}},"9n7a":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("JGJA"),a=Object(r.a)("resolvedAttachments")},"A+8x":function(e,t,n){"use strict";var r=n("MBJP"),a=n("647q"),i=n("4Brc"),o=n("TA7Z"),s=n("X9Pk"),c=n("2BFa"),u=n("JGJA"),d=Object(u.a)("cookieBannerOnExitVisible");n.d(t,"a",(function(){return l}));var l=Object(r.a)([a.getLatestWidgetData,i.a,s.getAPIEnableWidgetCookieBanner,d],(function(e,t,n,r){var a=Object(c.gdprCookieConsentOnWidgetLoadEnabled)(e);return!(!(n||a)&&!r)&&Object(o.a)(t)}))},AEyM:function(e,t,n){"use strict";n.r(t);n.d(t,"sendVisitorEmailAddressRequested",(function(){return b}));n.d(t,"sendVisitorEmailAddressFailed",(function(){return h}));n.d(t,"sendVisitorEmailAddressSucceeded",(function(){return f}));n.d(t,"sendVisitorEmailAddress",(function(){return m}));var r=n("Ut5p"),a=n("E6wg"),i=n("NID/"),o=n("sIRh"),s=n("z96q"),c=n("3OTY"),u=n("Ux+X"),d=n("c2PF"),l=n("081M"),p=n("BnUr"),b=Object(r.b)(i.y,(function(e){return{email:e}})),h=Object(r.b)(i.z,(function(e){return{error:e}})),f=Object(r.b)(i.A,(function(e){return{email:e}}));function m(e){var t=e.consentToCommunicate,n=void 0!==t&&t,r=e.email,i=e.threadId;return function(e,t){e(b(r));var m=Object(d.getThreadByThreadId)(t(),{threadId:i}),g=Object(p.getChannelName)(m),j=Object(a.getSessionId)(t()),O=Object(l.getHubspotUtk)(),v=function(){e(f(r));e(Object(o.default)({channel:g,email:r,threadId:i}));n&&e(Object(c.d)(n));e(Object(u.trackInteraction)("widget-interaction",{action:"submit email"}));return{error:null}},x=function(t){e(h(t));return{error:t}};return s.sendVisitorEmailAddress({threadId:i,email:r,sessionId:j,hubspotUtk:O}).then(v,x)}}},Apky:function(e,t,n){"use strict";n.r(t);var r=n("p9k8"),a=n("19qb"),i=n("MBJP"),o=n("LgEy"),s=n("647q"),c=Object(i.a)([s.getLatestWidgetData],(function(e){return Object(o.gdprConsentToProcessEnabled)(e)})),u=n("A+8x"),d=n("lOT2"),l=n("k09d"),p=n("JoPj"),b=n("Wzl7"),h=n("zB5l"),f=n("vwA6"),m=n("V2EP"),g=n("3gKe"),j=function(e){return{shouldShowMeetingsLink:Object(h.a)(e),isThreadStarted:Object(r.a)(Object(l.a)(e)),requiresExplicitConsentToProcess:Object(d.a)(e),showingGdprProcess:c(e)&&!Object(g.a)(e),renderCookieConsentPrompt:Object(u.a)(e),showingHsBranding:Object(p.a)(e)}},O={toggleOnAndOffInputFocus:f.a,selectAttachmentFile:m.a};t.default=Object(a.connect)(j,O)(b.a)},BB3q:function(e,t,n){var r=n("QhUm");function a(e,t){var n=r(this,e),a=n.size;n.set(e,t);this.size+=n.size==a?0:1;return this}e.exports=a},"BW+T":function(e,t,n){var r=n("d1Q1"),a="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);n.cache=i.set(a,o)||i;return o};n.cache=new(i.Cache||r);return n}i.Cache=r;e.exports=i},BYz9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("WdXK"),a=n("MeE7"),i=function(e){return Object(r.buildSenderLocator)(Object(a.getType)(e),Object(a.getId)(e))}},CPwH:function(e,t,n){"use strict";n.r(t);n.d(t,"getFileName",(function(){return i}));var r=n("JGJA"),a=n("A3yT"),i=function(e){var t=Object(a.getFile)(e);return Object(r.a)("name",t)||""}},CnAB:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r,a=n("fQRB"),i=n("eP/i"),o=n("Ktcs"),s=n("6s0Z"),c=n("iDVC"),u=(r={},Object(a.a)(r,s.b,Object(c.a)()),Object(a.a)(r,s.a,Object(c.a)()),Object(a.a)(r,s.c,Object(c.a)({backgroundColor:i.c,borderColor:i.d,alignment:"flex-end"})),r),d=Object(o.createContext)(u);t.a=d},DOHQ:function(e,t,n){var r=n("8i16")["__core-js_shared__"];e.exports=r},DY0p:function(e,t,n){"use strict";var r=n("MBJP"),a=n("MJM1"),i=Object(a.a)(["isAttachmentDisabled"]),o=n("QnHA");n.d(t,"a",(function(){return s}));var s=Object(r.a)([o.a],(function(e){return i(e)}))},EzJv:function(e,t,n){var r=n("RLxx"),a=n("ccWV"),i=n("Uz5A"),o=n("mMAp"),s=n("IrnW");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r;c.prototype.delete=a;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},"FC+o":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"e",(function(){return a}));n.d(t,"a",(function(){return i}));n.d(t,"d",(function(){return o}));n.d(t,"c",(function(){return s}));var r="NETWORK_OFFLINE",a="THREAD_HISTORY_FAILED",i="CREATE_NEW_THREAD_FAILED",o="SUBSCRIPTIONS_FAILED",s="PUBSUB_FAILED"},FJf1:function(e,t,n){"use strict";n.r(t);n.d(t,"trackSendMessage",(function(){return a}));var r=n("Ux+X"),a=function(e){var t=e.threadId;return function(e){var n={};"number"==typeof t&&(n.threadId=t);e(Object(r.trackInteraction)("send-message",n))}}},FPMu:function(e,t,n){"use strict";n.r(t);n.d(t,"shouldRecordImplicitConsentToProcess",(function(){return c}));var r=n("MBJP"),a=n("LgEy"),i=n("8cLO"),o=n("647q"),s=n("3gKe"),c=Object(r.a)([o.getLatestWidgetData,s.a],(function(e,t){return Object(a.gdprConsentToProcessEnabled)(e)&&!Object(i.gdprExplicitConsentRequired)(e)&&!t}))},GiLH:function(e,t){e.exports="//static.hsappstatic.net/salesImages/static-1.425/messages/bot-avatar.svg"},GkNN:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("MBJP"),a=n("JGJA"),i=n("xePV"),o=n("BnUr"),s=n("BMD5"),c=Object(r.a)([i.a,s.a],(function(e,t){var n=Object(o.getThreadId)(t);return Object(a.a)(n,e)||null}))},GzqH:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return a}));var r="@type",a="DATE_MESSAGE"},IqZ3:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("Ut5p"),a=n("FDs6"),i=Object(r.b)(a.e,(function(e){return{threadId:e}}))},IrnW:function(e,t,n){var r=n("LPlp");function a(e,t){var n=this.__data__,a=r(n,e);if(a<0){++this.size;n.push([e,t])}else n[a][1]=t;return this}e.exports=a},Isoj:function(e,t,n){"use strict";var r=n("5Enb"),a=n("edeU"),i=n("+eZO"),o=n("LpN+"),s=n("g05V"),c=n("QgEn"),u=n("19qb"),d=n("VfuR"),l=n.n(d),p=n("npjq"),b=n("Ktcs"),h=n("HElP"),f=n("9f1P"),m=n.n(f),g=n("VdXU"),j=n("sl/w"),O=n("qCVG"),v=n("gFbD"),x=n("A2+2"),y=n("Kcjm"),C=n("fzij"),w=m.a.div.withConfig({displayName:"ConsentModal__ConsentModalContainer",componentId:"sc-1k2789k-0"})(["position:absolute;display:flex;align-items:flex-start;justify-content:center;height:calc(100% - ","px);top:","px;width:100%;background-color:rgba(45,62,80,0.79);backdrop-filter:blur(2px);padding-top:20%;border-bottom-left-radius:","px;border-bottom-right-radius:","px;overflow-y:hidden;"],y.d,y.d,x.a,x.a),k=m.a.div.withConfig({displayName:"ConsentModal__ContentContainer",componentId:"sc-1k2789k-1"})(["display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;background-color:white;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,0.75);margin:0 20px;"]),T=m()(C.a).withConfig({displayName:"ConsentModal__SmallNoParagraphPadding",componentId:"sc-1k2789k-2"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),I=m()(g.a).withConfig({displayName:"ConsentModal__FullWidthButton",componentId:"sc-1k2789k-3"})(["padding:9px 16px;flex:0 1 100%;&:not(:first-child){margin-left:8px;}"]),S=m.a.div.withConfig({displayName:"ConsentModal__ButtonsContainer",componentId:"sc-1k2789k-4"})(["display:flex;flex-direction:row;margin:12px 0 0 0;width:100%;"]),R=m.a.p.withConfig({displayName:"ConsentModal__Header",componentId:"sc-1k2789k-5"})(["text-transform:none;font-size:18px;font-weight:500;margin-top:18px;margin-bottom:12px;line-height:normal;"]),A=function(e){var t=e.headerMessage,n=e.message,r=e.onClick,a=e.onDeclineClick,i=Object(b.useState)({isEntering:!0,shouldRender:!0,callback:function(){}}),o=Object(h.a)(i,2),s=o[0],u=o[1],d=function(){if(!s.isEntering){s.callback();u(Object.assign({},s,{shouldRender:!1}))}},l=function(e){u(Object.assign({},s,{isEntering:!1,callback:e}))};return s.shouldRender?Object(c.jsx)(w,{style:{animation:(s.isEntering?"consent-modal-background-fadeIn":"consent-modal-background-fadeOut")+" .3s"},"data-test-id":"gdpr-consent-prompt-container",onAnimationEnd:d,children:Object(c.jsx)(v.a,{children:function(e){return Object(c.jsxs)(k,{"data-test-id":"gdpr-consent-prompt",style:{animation:(s.isEntering?"consent-modal-content-fadeIn":"consent-modal-content-fadeOut")+" .3s"},children:[t&&Object(c.jsx)(R,{children:t}),Object(c.jsx)(T,{use:"help","data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(O.a)(n)}}),Object(c.jsxs)(S,{children:[Object(c.jsx)(I,{onClick:function(){l(r)},"data-test-id":"gdpr-consent-agree-button",use:"primary",children:Object(c.jsx)(j.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:e}})}),Object(c.jsx)(I,{onClick:function(){l(a)},"data-test-id":"gdpr-consent-dismiss-button",children:Object(c.jsx)(j.a,{message:"conversations-visitor-experience-components.buttons.disagree",options:{locale:e}})})]})]},"consent-modal-content-container")}})},Math.random+"-consent-modal-container"):null};A.defaultProps={animationTimeMs:300,onClick:function(){},onDeclineClick:function(){}};A.propTypes={headerMessage:l.a.node,message:l.a.string.isRequired,onClick:l.a.func.isRequired,onDeclineClick:l.a.func.isRequired};A.displayName="ConsentModal";var P=A,M=n("0IL2"),E=n("Ux+X"),N=n("90r9"),_=n("iatO"),q=n("2BFa"),F=n("VTHq");function L(){return function(e,t){(Object(q.gdprCookieConsentOnExitIntentEnabled)(t())||Object(F.getAPIEnableWidgetCookieBannerOnExitIntent)(t()))&&e(Object(_.a)(!1));e(Object(E.trackInteraction)("widget-interaction",{action:"clicked decline cookies button"}))}}var B=n("AQmo"),D=n("mKxs"),z=n("647q"),U=n("X9Pk"),V=function(e){Object(s.a)(t,e);function t(){Object(r.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(a.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.trackInteraction)("widget-interaction",{action:"view consent to cookies"})}},{key:"render",value:function(){var e=this;return Object(c.jsx)(v.a,{children:function(t){return e.props.isExitIntentPrompt?Object(c.jsx)(P,{headerMessage:Object(c.jsx)(j.a,{message:"conversations-visitor-ui.gdpr.consentToCookies.promptHeader",options:{locale:t}}),message:p.a.text("conversations-visitor-ui.gdpr.consentToCookies.exitIntentCookieConsent",{locale:t}),onDeclineClick:e.props.declineCookies,onClick:e.props.consentToCookies,coloring:e.props.coloring}):Object(c.jsx)(M.a,{message:p.a.text("conversations-visitor-ui.gdpr.consentToCookies.pageLoadCookieConsent",{locale:t}),onDeclineClick:e.props.declineCookies,onClick:e.props.consentToCookies,coloring:e.props.coloring,showButton:!0})}})}}]);return t}(b.Component);V.displayName="CookieConsentPrompt";V.propTypes={coloring:Object(D.a)("ColoringRecord"),consentToCookies:l.a.func.isRequired,declineCookies:l.a.func.isRequired,isExitIntentPrompt:l.a.bool.isRequired,trackInteraction:l.a.func.isRequired};var H={consentToCookies:N.a,declineCookies:L,trackInteraction:E.trackInteraction},Q=function(e){return{coloring:Object(B.a)(e),widgetData:Object(z.getLatestWidgetData)(e),isExitIntentPrompt:Object(q.gdprCookieConsentOnExitIntentEnabled)(e)&&!Object(U.getAPIEnableWidgetCookieBanner)(e)}};t.a=Object(u.connect)(Q,H)(V)},JIa2:function(e,t,n){"use strict";n.r(t);n.d(t,"createFormDataForAttachment",(function(){return r}));var r=function(e){var t=e.file,n=new FormData;n.append("file",t);return n}},JWgK:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("MBJP"),a=n("jM00"),i=n("byjC"),o=n("80AS"),s=Object(r.a)([o.a,a.a,i.a],(function(e,t,n){return!(!e&&n)&&(!t||!t.size)}))},JoPj:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("JGJA"),a=n("MBJP"),i=n("647q"),o=Object(a.a)(i.getLatestWidgetData,Object(r.a)("showingHsBranding"))},KLi6:function(e,t,n){var r=n("uQvf"),a="__lodash_hash_undefined__";function i(e,t){var n=this.__data__;this.size+=this.has(e)?0:1;n[e]=r&&void 0===t?a:t;return this}e.exports=i},KSjU:function(e,t,n){"use strict";var r=n("MJM1");t.a=Object(r.a)(["meetingsLinkUrl"])},LPlp:function(e,t,n){var r=n("+a0K");function a(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}e.exports=a},LdnN:function(e,t,n){"use strict";var r=n("EuUD"),a="\\.",i='\\s\\?\\#\\/\\(\\)\\=\\:\\;\\@\\\\"'+a,o="(?:www"+a+")",s="(?:[%a-zA-Z0-9_-]+)",c="(?:(?:\\.[%a-zA-Z0-9-]+)[^\\.\\s])",u="\\s\\?\\#\\&",d=new RegExp("^(?:.+)@"+{www:o,domain:o+"?(?:(?:[^"+i+"]+)"+a+")+(?:[^"+i+"]+)",protocol:"(?:(?:https?:)?\\/\\/)",protocolRequired:"(?:https?:\\/\\/)",path:"(?:(?:\\/[^\\s\\/\\#\\&\\?]*)+\\/?)",wildcardPath:"(?:(/(?:[%a-zA-Z0-9_-])*?)*(?:/[\\*]))",file:""+s+c,fileName:s,fileExtension:c,search:"(?:([\\?&#][^"+u+"]*?=?([^"+u+"]*))+)",ungroupedSearch:"(?:(?:[\\?&#][^"+u+"]*?=?(?:[^"+u+"]*))+)"}.domain+"$");t.a=Object(r.a)({name:"EmailAddress",validator:function(e){return d.test(e)}})},OI0Z:function(e,t,n){"use strict";var r=n("FGh+"),a=n("QgEn"),i=n("VfuR"),o=n.n(i),s=n("yvRk"),c=n.n(s),u=n("npjq");t.a=c()({displayName:"FormattedSize",propTypes:{value:o.a.number.isRequired},render:function(){var e=this.props,t=e.value,n=Object(r.a)(e,["value"]);return Object(a.jsx)("span",{children:u.a.formatSize(t,n)})}})},OhTC:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("JGJA"),a=Object(r.a)("fileUploads")},OoDT:function(e,t,n){"use strict";var r=n("5Enb"),a=n("edeU"),i=n("+eZO"),o=n("LpN+"),s=n("6DYd"),c=n("g05V"),u=n("QgEn"),d=n("VfuR"),l=n.n(d),p=n("Ktcs"),b=n("dvoe"),h=n("qjq5"),f=n("scKg");function m(e){if("number"==typeof e&&e>=0)return e;throw new Error("expected `interval` to be a positive number but got `"+e+"`")}function g(e,t){m(e);Object(f.a)(t);var n,r,a=0,i=null;function o(){if(null!==i){clearTimeout(i);i=null}}function s(){a=Date.now();r=t.apply(void 0,Object(b.a)(n))}function c(){for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];n=c;o();Date.now()-a>=e?s():i=setTimeout(s,e);return r}c.cancel=o;return c}var j=Object(h.a)(g),O=100,v=function(e){Object(c.a)(t,e);function t(e){var n;Object(r.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={inTop:!0,inBottom:!0,height:0,distanceToBottom:0,shouldKeepAtBottom:!0};n.scrollContainer=Object(p.createRef)();n.scrollContent=Object(p.createRef)();n.onResize=j(O,n.onResize.bind(Object(s.a)(n)));n.onScroll=j(O,n.onScroll.bind(Object(s.a)(n)));return n}Object(a.a)(t,[{key:"componentDidMount",value:function(){var e=this.scrollContent.current;if(e){this.setState({height:e.clientHeight});this.scrollToBottom()}window.addEventListener("resize",this.onResize,{passive:!0})}},{key:"getSnapshotBeforeUpdate",value:function(){return this.scrollContainer.current?{prevScrollTop:this.getScrollDistanceFromTop()}:null}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.scrollContainer.current;if(n&&r)if(this.state.shouldKeepAtBottom)this.scrollToBottom();else if(0!==this.state.distanceToBottom){var a=n.prevScrollTop,i=this.getScrollDistanceFromTop();i===a&&t.height>this.state.height&&this.setScrollTop(i+(t.height-this.state.height))}else this.setState({shouldKeepAtBottom:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"getScrollDistanceFromTop",value:function(){var e=this.scrollContainer.current,t=this.scrollContent.current,n=e.scrollHeight-t.clientHeight;return e.scrollTop-n}},{key:"onScroll",value:function(){var e=this.props,t=e.onScrollToTop,n=e.onScrollFromBottom,r=e.onScrollToBottom;if(this.scrollContainer.current&&this.scrollContent.current){var a=this.inThreshold(),i=a.inTop,o=a.inBottom;!this.state.inTop&&i&&t();!this.state.inBottom&&o&&r();this.state.inBottom&&!o&&n();var s=this.getScrollDistanceFromBottom();this.setState({inTop:i,inBottom:o,distanceToBottom:s,shouldKeepAtBottom:!1})}}},{key:"inThreshold",value:function(){var e=this.props,t=e.topThreshold,n=e.bottomThreshold;return{inTop:this.getScrollDistanceFromTop()<=t,inBottom:this.getScrollDistanceFromBottom()<=n}}},{key:"getScrollDistanceFromBottom",value:function(){var e=this.scrollContainer.current;if(!e)return 0;var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight,a=e.offsetHeight;return n-(r||a)-t}},{key:"scrollToBottom",value:function(){var e=this.scrollContainer.current;e&&this.setScrollTop(e.scrollHeight);this.setState({shouldKeepAtBottom:!0})}},{key:"setScrollTop",value:function(e){var t=this.scrollContainer.current;t&&(t.scrollTop=e||0)}},{key:"onResize",value:function(){var e=this.scrollContent.current;e&&this.setState({height:e.clientHeight||0})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.stickToTop;return Object(u.jsxs)("div",{className:n,style:{flexGrow:1},onScroll:this.onScroll,ref:this.scrollContainer,children:[r,Object(u.jsx)("div",{ref:this.scrollContent,children:t})]})}}]);return t}(p.PureComponent);v.displayName="ScrollWrapper";v.propTypes={bottomThreshold:l.a.number.isRequired,children:l.a.node,className:l.a.string,onScrollFromBottom:l.a.func.isRequired,onScrollToBottom:l.a.func.isRequired,onScrollToTop:l.a.func.isRequired,stickToTop:l.a.node,topThreshold:l.a.number.isRequired};var x=function(){};v.defaultProps={bottomThreshold:300,onScrollFromBottom:x,onScrollToBottom:x,onScrollToTop:x,topThreshold:300};var y=v,C=n("2rNL"),w=function(e){return document.querySelector("["+C.a+'="'+e+'"]')},k=n("Gc2C"),T=function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;Object(k.a)(!!e.prototype[s],"Component missing required function %s",s)}}catch(e){r=!0;a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}},I=function(){var e=document.querySelector("["+C.a+"]:last-child");return e&&e.getAttribute?e.getAttribute(C.a):null},S=function(e){var t=I();if(!e||!t)return null;var n=w(t);if(!n)return null;var r=e.getScrollDistanceFromTop();return{lastMessageId:t,lastMessageOffsetTop:n.offsetTop,prevScrollTop:r}},R=300,A=function(){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{alignment:"start"}).alignment,n=w(e);e&&n&&n.scrollIntoView&&n.scrollIntoView("start"===t)}},P=function(e){var t=e.scrollWrapperRef;return function(){var e=t.current;e&&e.scrollToBottom()}},M=function(e){var t=e.scrollWrapperRef;return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).threshold,n=void 0===e?R:e,r=t.current;r&&r.state&&(t.current.state.distanceToBottom<=n||r.getScrollDistanceFromBottom()<=n)&&r.scrollToBottom()}},E=function(e){var t=e.current;return{lastMessageId:t.lastMessageId,lastMessageOffsetTop:t.lastMessageOffsetTop,prevScrollTop:t.prevScrollTop}},N=function(e){T(e,["getScrollDistanceFromTop","getScrollDistanceFromBottom","setScrollTop","scrollToBottom"]);var t=Object(p.forwardRef)((function(e,t){var n=Object(p.useRef)(),r=Object(p.useRef)();t.current={scrollToMessage:A(),scrollToBottom:P({scrollWrapperRef:n}),scrollToBottomIfInThreshold:M({scrollWrapperRef:n})};var a=Object(p.useRef)(!0);Object(p.useLayoutEffect)((function(){var e=n.current;if(a.current){r.current=S(e);a.current=!1}else if(r.current){var t=E(r),i=t.lastMessageId,o=t.lastMessageOffsetTop,s=t.prevScrollTop;r.current=S(e);if(e.getScrollDistanceFromTop()===s){var c=w(i);if(c&&c.offsetTop){var u=c.offsetTop-o;u&&e.setScrollTop(e.getScrollDistanceFromTop()+u)}}}}));return Object(u.jsx)(y,Object.assign({ref:n},e))}));t.displayName="WithScrollTo";return t},_=n("mKxs"),q=n("021p"),F=n("kWFB"),L=n("9f1P"),B=n.n(L),D=n("DgSg"),z=n("t6nY"),U=n.n(z),V=n("Xcjc"),H=n("R1eS"),Q=B()(D.a).withConfig({displayName:"ThreadHistoryFetcher__LoadingSpinnerWrapper",componentId:"mpap2q-0"})(["height:0;margin-top:20px;"]),W=B()(N(y)).withConfig({displayName:"ThreadHistoryFetcher__ScrollToWrapper",componentId:"mpap2q-1"})(["flex:1 1;display:flex;flex-direction:column;align-self:stretch;overflow-y:scroll;overflow-x:hidden;"]),G=function(e){Object(c.a)(t,e);function t(e){var n;Object(r.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).scrollWrapper=Object(p.createRef)();n.fetchHistory=n.fetchHistory.bind(Object(s.a)(n));return n}Object(a.a)(t,[{key:"componentDidMount",value:function(){var e=this.scrollWrapper.current;e&&e.scrollToBottom();this.fetchHistory()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.threadId,r=t.messageCount,a=t.shouldScrollToBottom,i=t.isOnFocus,o=e.threadId,s=e.messageCount,c=e.shouldScrollToBottom,u=e.isOnFocus,d=this.scrollWrapper.current;if(n===o)if(s){r!==s&&d&&d.scrollToBottomIfInThreshold();a!==c&&d&&d.scrollToBottomIfInThreshold();i!==u&&d&&d.scrollToBottomIfInThreshold()}else d&&d.scrollToBottom();else{this.fetchHistory();d&&d.scrollToBottom()}}},{key:"fetchHistory",value:function(){var e=this.props,t=e.fetchThreadHistory,n=e.threadId,r=e.threadHistory,a=e.sessionId;n!==V.a&&t({offsetOrdinal:Object(q.c)(r),offsetTimestamp:Object(q.d)(r),threadId:n,sessionId:a})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isLoadingHistory,r=e.loadingHistoryFailed,a=e.threadId,i=e.threadHistory;if(n&&!Object(F.hasMessages)(i))return Object(u.jsx)(D.a,{grow:!0});if(r&&!Object(F.hasMessages)(i))return Object(u.jsx)(H.a,{});var o=U()(this.props.className,"messages-scroll-container-utv");return Object(u.jsx)(W,{className:o,ref:this.scrollWrapper,onScrollToTop:this.fetchHistory,stickToTop:n&&Object(u.jsx)(Q,{grow:!0}),children:t},a)}}]);return t}(p.PureComponent);G.propTypes={children:l.a.node.isRequired,className:l.a.string,fetchThreadHistory:l.a.func.isRequired,isLoadingHistory:l.a.bool,isOnFocus:l.a.bool.isRequired,loadingHistoryFailed:l.a.bool,messageCount:l.a.number.isRequired,sessionId:l.a.string.isRequired,shouldScrollToBottom:l.a.bool.isRequired,threadHistory:Object(_.a)("ThreadHistory"),threadId:l.a.number.isRequired};G.displayName="ThreadHistoryFetcher";t.a=G},P5SP:function(e,t,n){"use strict";n.r(t);var r=n("MBJP"),a=n("c2PF"),i=n("lTxV"),o=Object(r.a)([a.getThreadByThreadId],i.a),s=n("V0XL");n.d(t,"shouldRecordUrlContextUpdate",(function(){return c}));var c=Object(r.a)([o,s.getMessagesPageUri],(function(e,t){return e!==t}))},PY3R:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("sZZm"),a=n("tek+"),i=n("6WMu"),o=function(e){var t=e.thread;Object(r.postExternalApiEvent)({eventType:a.c,payload:{conversation:Object(i.serializeThreadForExternalEvent)(t)}})}},PYok:function(e,t,n){"use strict";var r=n("BnUr"),a=n("31tl"),i=n("LdnN"),o=n("5rZi"),s=n("6PLn"),c=n("4SpI"),u=n("2gT5"),d=n("IqZ3"),l=n("k09d"),p=n("FJf1"),b=n("UxS0"),h=n("tbpt"),f=n("V0XL"),m=n("P5SP"),g=n("wy0V"),j=n("AEyM"),O=n("SbeA"),v=n("CdQ/"),x=n("gD8A"),y=n("E6wg"),C=n("Xcjc"),w=n("JGJA"),k=n("MBJP"),T=n("deD5"),I="Conversations:PersistedAutomatedMessagesV2",S="Communication:newMetadataDifferenceLogger",R=(Object(k.a)([T.a],(function(e){return Boolean(Object(w.a)(I,e))})),Object(k.a)([T.a],(function(e){return Boolean(Object(w.a)(S,e))}))),A=n("647q"),P=Object(k.a)([A.getLatestWidgetData],Object(w.a)("channelInstanceId"));n.d(t,"a",(function(){return N}));var M=function(){return function(e,t){var n=Object(l.a)(t()),a=Object(f.getMessagesPageUri)(t()),i=Object(r.getThreadId)(n);return Object(m.shouldRecordUrlContextUpdate)(t(),{threadId:i})&&i!==C.a?Object(x.updateVisitorContext)({currentUrl:a,sessionId:Object(y.getSessionId)(t()),threadId:i}).then((function(){e(Object(g.a)({threadId:i,currentUrl:a}))})).catch((function(){return Promise.resolve()})):Promise.resolve()}},E=function(e){var t=e.text,n=e.richText,f=e.quickReply,m=e.fileAttachment;return function(e,g){var x=Object(l.a)(g()),y=Object(u.isPersistedThread)(x),C=Object(r.getChannelName)(x),w=Object(r.getThreadId)(x),k=Object(v.getMessagesUtk)(),T=R(g()),I=P(g()),S=Object(b.buildVisitorCommonMessage)({channelInstanceId:I,clientType:a.a,fileAttachment:m,quickReply:f,richText:n,senderId:k,text:t,ungatedForCommunicationDifferenceLogger:T});e(Object(d.a)(w));e(Object(p.trackSendMessage)({threadId:w}));if(!y){e(Object(h.stageMessageOnStubbedThread)(S));return e(Object(o.createNewThread)())}Object(O.getMostRecentMessageIsEmailPrompt)(g())&&i.a.test(t)&&e(Object(j.sendVisitorEmailAddress)({email:t,consentToCommunicate:!1,threadId:w}));return e(Object(c.publishMessage)({channel:C,message:S,threadId:w})).then((function(){return e(Object(s.applyGdprConsent)())}))}};function N(e){var t=e.text,n=e.richText,r=e.quickReply,a=e.fileAttachment;return function(e){return e(M()).then((function(){e(E({text:t,richText:n,quickReply:r,fileAttachment:a}))}))}}},PzWr:function(e,t,n){"use strict";n.r(t);n.d(t,"getFileSize",(function(){return i}));var r=n("JGJA"),a=n("A3yT"),i=function(e){var t=Object(a.getFile)(e);return Object(r.a)("size",t)||0}},Q2fA:function(e,t,n){"use strict";var r=n("MBJP"),a=n("qjq5"),i=n("AaWM"),o=Object(a.a)(i.a),s=n("JGJA"),c=n("G6fO"),u=n("RyNb"),d=n("ncoD"),l=n("SfUm");n.d(t,"a",(function(){return p}));var p=Object(r.a)([l.a,d.getAllAgentResponders,u.a],(function(e,t,n){var r=Object(c.getUserId)(n);return Object(s.a)(r,e)?n:t&&t.find((function(t){var n=Object(c.getUserId)(t);return o(n,e)}))}))},QG41:function(e,t,n){var r=n("uQvf");function a(){this.__data__=r?r(null):{};this.size=0}e.exports=a},QVIP:function(e,t){var n=Function.prototype.toString;function r(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}e.exports=r},Qf6G:function(e,t,n){"use strict";n.r(t);n.d(t,"clickedConsentToProcess",(function(){return f}));n.d(t,"consentToProcessSucceeded",(function(){return m}));n.d(t,"consentToProcessFailed",(function(){return g}));n.d(t,"consentToProcess",(function(){return j}));var r=n("Ut5p"),a=n("wwi/"),i=n("E6wg"),o=n("wn0x"),s=n("uk/S"),c=n("dIvY"),u=n("2BFa"),d=n("k3iI"),l=n("081M"),p=n("Ux+X"),b=n("647q"),h=n("CdQ/"),f=Object(r.b)(a.d),m=Object(r.b)(a.f),g=Object(r.b)(a.e,(function(e){return{error:e.error}}));function j(){return function(e,t){var n=Object(i.getSessionId)(t()),r=Object(o.getMessageId)(t()),a=Object(l.getHubspotUtk)(),j=Object(b.getLatestWidgetData)(t());e(f());Object(s.sendConsentToProcess)({sessionId:n,hubspotUtk:a,welcomeMessageId:r,widgetData:j}).then((function(n){var r=n.sessionId,a=Object(u.gdprCookieConsentOnExitIntentEnabled)(t(),j);try{localStorage.setItem("userHasGivenConsentToProcess",!0)}catch(e){console.warn("local storage not set!")}a||Object(c.handleStoreMessagesCookie)(Object(h.getMessagesUtk)());e(Object(d.updateSessionId)(r));e(m());e(Object(p.trackInteraction)("widget-interaction",{action:"clicked consent to process button"}))}),(function(t){return e(g({error:t}))})).done()}}},QhUm:function(e,t,n){var r=n("xP7N");function a(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}e.exports=a},R1eS:function(e,t,n){"use strict";var r=n("QgEn"),a=n("9f1P"),i=n.n(a),o=n("sl/w"),s=i.a.div.withConfig({displayName:"ErrorState__ErrorWrapper",componentId:"sc-9n3cba-0"})(["display:flex;justify-content:center;align-items:center;height:100%;flex-direction:column;"]),c=function(){return Object(r.jsxs)(s,{children:[Object(r.jsx)("h5",{children:Object(r.jsx)(o.a,{message:"conversations-visitor-ui.asyncError.body"})}),Object(r.jsx)("div",{className:"m-top-3",children:Object(r.jsx)(o.a,{message:"conversations-visitor-ui.asyncError.noRetry"})})]})};c.displayName="ErrorState";var u=c,d=i.a.div.withConfig({displayName:"ThreadHistoryError__ThreadHistoryErrorWrapper",componentId:"eons6g-0"})(["text-align:center;flex-grow:1;"]),l=function(){return Object(r.jsx)(d,{children:Object(r.jsx)(u,{})})};l.displayName="ThreadHistoryError";t.a=l},"R4/u":function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n.d(t,"a",(function(){return i}));var r=n("0GGv");function a(){return function(e,t){Object(r.a)(t())||window.newrelic&&window.newrelic.addPageAction&&window.newrelic.setCustomAttribute&&window.newrelic.addPageAction("threadCreatedInWidget",{actionAttribute:"createdThreadInhWidget"})}}function i(){return function(e,t){Object(r.a)(t())||window.newrelic&&window.newrelic.addPageAction&&window.newrelic.setCustomAttribute&&window.newrelic.addPageAction("fileAttachedToWidget",{actionAttribute:"attachedFileToWidget"})}}},RLxx:function(e,t){function n(){this.__data__=[];this.size=0}e.exports=n},SbeA:function(e,t,n){"use strict";n.r(t);n.d(t,"getMostRecentMessageIsEmailPrompt",(function(){return s}));var r=n("MBJP"),a=n("4nf7"),i=n("0IK8"),o=n("7hVK"),s=Object(r.a)([a.a],(function(e){return Object(i.getType)(e.last())===o.a}))},SfUm:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("QYOI"),a=n("MBJP"),i=n("JGJA"),o=n("BnUr"),s=n("BMD5"),c=n("6T8d"),u=Object(a.a)([s.a,c.typingStates],(function(e,t){var n=Object(o.getThreadId)(e);return Object(i.a)(""+n,t)||Object(r.Map)()}))},Syy6:function(e,t,n){var r=n("9Utk"),a=n("kmmH"),i="Expected a function";function o(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError(i);if(a(n)){o="leading"in n?!!n.leading:o;s="trailing"in n?!!n.trailing:s}return r(e,t,{leading:o,maxWait:t,trailing:s})}e.exports=o},TXBG:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("KXN9"),a=n("Pda3"),i=n("x1JE"),o=n("QYOI"),s=n("MBJP"),c=n("bYG+"),u=n("9n7a"),d=Object(s.a)([u.a],(function(e){return e&&Object(i.getEntries)(e).size?Object(i.getEntries)(e).reduce((function(e,t,n){return t&&n&&Object(a.isSucceeded)(t)?Object(c.a)(String(n),Object(r.a)(t),e):e}),Object(o.Map)()):Object(o.Map)()}))},Umjh:function(e,t,n){"use strict";var r,a,i=n("FGh+"),o=n("QgEn"),s=n("VfuR"),c=n.n(s),u=n("9f1P"),d=n.n(u),l=n("DgSg"),p=n("fQRB"),b=n("0wen"),h=n("54vt"),f="primary",m="secondary",g={PRIMARY:f,SECONDARY:m},j=(r={},Object(p.a)(r,f,b.PRIMARY),Object(p.a)(r,m,b.SECONDARY),r),O=function(e){return j[e]},v=(a={},Object(p.a)(a,f,h.SECONDARY),Object(p.a)(a,m,h.PRIMARY),a),x=function(e){return v[e]},y=g,C=n("NrIs"),w=d()(l.a).withConfig({displayName:"VizExLoadingButton__Spinner",componentId:"sc-1f530i3-0"})(["height:0;position:absolute;top:50%;right:0;transition:opacity 0.2s;opacity:",";"],(function(e){return e.show?1:0})),k=d.a.div.withConfig({displayName:"VizExLoadingButton__ReadyWrapper",componentId:"sc-1f530i3-1"})(["transition:opacity 0.2s;opacity:",";"],(function(e){return e.show?1:0})),T=function(e){var t=e.children,n=e.Button,r=e.result,a=e.use,s=e.theme,c=e.currentState,u=e.onClick,d=Object(i.a)(e,["children","Button","result","use","theme","currentState","onClick"]),l="ready"===c,p="submitting"===c,b="done"===c;return Object(o.jsxs)(n,Object.assign({theme:s,onClick:p||b?function(){}:u,use:O(a),style:{position:"relative"}},d,{children:[Object(o.jsx)(k,{"data-testid":"VizExLoadingButton-Ready",show:l,children:t}),Object(o.jsx)(w,{size:"xs",grow:!0,use:x(a),theme:s,showResult:b,show:p||b,"data-testid":"VizExLoadingButton-Spinner",children:r})]}))};T.propTypes={Button:c.a.node.isRequired,children:c.a.node.isRequired,currentState:c.a.oneOf(["ready","submitting","done"]),onClick:c.a.func,result:c.a.node,theme:C.a,use:c.a.oneOf(Object.values(y))};T.defaultProps={"data-test-id":"loading-button",use:y.PRIMARY,onClick:function(){}};T.displayName="VizExLoadingButton";t.a=T},UxS0:function(e,t,n){"use strict";n.r(t);var r,a,i=n("fQRB"),o=n("wxG8"),s=n("+Q4j"),c=n("6d8N"),u=n("B/8b"),d=n("bWKF"),l=n("BvOu"),p=n("v0wH"),b=n("GavG"),h=n("Gc2C"),f=n("4kas"),m=(r={},Object(i.a)(r,f.a,o.AGENT),Object(i.a)(r,f.b,o.BOT),Object(i.a)(r,f.d,o.INTEGRATOR),Object(i.a)(r,f.e,o.SYSTEM),Object(i.a)(r,f.f,o.VISITOR),Object(i.a)(r,f.c,o.EMAIL),a={},Object(i.a)(a,o.AGENT,f.a),Object(i.a)(a,o.BOT,f.b),Object(i.a)(a,o.INTEGRATOR,f.d),Object(i.a)(a,o.SYSTEM,f.e),Object(i.a)(a,o.VISITOR,f.f),Object(i.a)(a,o.EMAIL,f.c),a),g=function(e){return m[e]||null},j=n("TWJS"),O=Object.keys(o),v=function(e){var t=e.senderType,n=void 0===t?null:t,r=e.senderId,a=void 0===r?null:r,i=e.senderField,o=void 0===i?null:i,s=e.deliveryIdentifier,c=void 0===s?null:s;Object(h.a)(O.includes(n)||null===n,"Invalid sender type. Should be one of "+O.join(" | ")+". Received %s",n);var u=g(n);return Object(j.a)({actorId:u&&a?u+"-"+a:"",senderField:o,deliveryIdentifier:c})},x=n("QYOI"),y=1e3,C=n("zHet");n.d(t,"buildVisitorCommonMessage",(function(){return w}));var w=function(e){var t=e.channelInstanceId,n=e.clientType,r=e.fileAttachment,a=e.quickReply,h=e.richText,f=e.senderId,m=e.text,g=e.ungatedForCommunicationDifferenceLogger,j=void 0!==g&&g,O=Object(d.b)(o.VISITOR),w=Object(u.a)(O),k=[],T=v({senderType:o.VISITOR,senderId:f}),I=j?Object(x.List)([T]):Object(x.List)();r&&k.push(r);a&&k.push(new c.a(a));return Object(b.buildCommonMessage)({status:{source:s.a,messageStatus:p.b},clientType:n,attachments:k,text:m,richText:h,id:Object(l.generateUuid)(),sender:Object(i.a)({"@type":O},w,f),senders:I,channelInstanceId:t,genericChannelId:y,messageDirection:C.a})}},Uz5A:function(e,t,n){var r=n("LPlp");function a(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}e.exports=a},V2EP:function(e,t,n){"use strict";var r=n("xM7V"),a=n("Ux+X"),i=n("Zn4N"),o=function(e){switch(e){case i.b:return"size limit exceeded";default:return null}},s=n("Wnz4"),c=n("BnUr"),u=n("5N3d"),d=n("84zR");n.d(t,"a",(function(){return l}));var l=function(e){var t=e.file,n=e.thread;return function(e){var i=Object(c.getThreadId)(n);return Object(u.validateAttachmentFile)(t).then((function(){var n=new r.a({file:t,progress:0});return e(Object(d.uploadAttachment)({attachment:n,threadId:i}))})).catch((function(t){e(Object(s.attachmentError)(t,i));e(Object(a.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":o(t)}))}))}}},VXRw:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadStart",(function(){return i}));var r=n("Ut5p"),a=n("FDs6"),i=Object(r.b)(a.d,(function(e){return{attachment:e.attachment,threadId:e.threadId}}))},VdXU:function(e,t,n){"use strict";var r=n("FGh+"),a=n("QgEn"),i=n("VfuR"),o=n.n(i),s=n("9f1P"),c=n.n(s),u=n("7719"),d=n("NrIs"),l=n("aXPX"),p=n("0wen"),b=n("0wDu"),h=b.h,f=b.j,m=(b.b,b.a,n("rdz/")),g=function(e){var t=e.theme;switch(e.use){case p.PRIMARY:var n=h(t);return Object(s.css)(["background-color:",";"],Object(m.a)(n,20));case p.SECONDARY:default:var r=h(t);return Object(s.css)(["background-color:",";"],Object(m.a)(r,95))}},j=function(e){var t=e.theme;switch(e.use){case p.PRIMARY:var n=h(t);return Object(s.css)(["background-color:",";"],Object(m.a)(n,-10));case p.SECONDARY:default:var r=h(t);return Object(s.css)(["background-color:",";"],Object(m.a)(r,90))}},O=function(e){var t,n=e.theme,r=e.use,a=e.active,i=e.hover,o=e.disabled,c=e.isSubmitting;if(o&&!c)return Object(s.css)(["background-color:",";border:none;"],Object(b.a)(n));a&&(t=j({theme:n,use:r}));i&&(t=g({theme:n,use:r}));switch(r){case p.PRIMARY:return Object(s.css)(["background-color:",";border:none;",""],h(n),t);case p.SECONDARY:default:return Object(s.css)(["background-color:transparent;border-color:",";",""],h(n),t)}},v=function(e){var t=e.theme,n=e.use,r=e.disabled,a=e.isSubmitting;if(r&&!a)return Object(s.css)(["color:",";"],Object(b.b)(t));switch(n){case p.PRIMARY:return Object(s.css)(["color:",";"],f(t));case p.SECONDARY:default:return Object(s.css)(["color:",";"],h(t))}},x=Object(s.css)(["&:hover{","}&:active{","}"],g,j),y=c.a.button.withConfig({displayName:"VizExButton__AbstractVizExButton",componentId:"sc-6ytpdc-0"})(["flex-shrink:0;border-radius:3px;padding:",";font-size:",";line-height:16px;outline:none;transition:background-color 150ms ease-out;border-style:solid;border-width:1px;cursor:",";user-select:",";text-align:center;word-break:normal;overflow-wrap:break-word;"," "," ",";&:focus{outline:0;}"],(function(e){var t=e.size;return l.b[t]}),(function(e){var t=e.size;return l.a[t]}),(function(e){return e.disabled?"not-allowed":"pointer"}),(function(e){return e.disabled?"none":null}),v,O,(function(e){return e.disabled?null:x})),C=c.a.div.withConfig({displayName:"VizExButton__NoSelect",componentId:"sc-6ytpdc-1"})(["user-select:none;"]),w=function(e){var t=e.children,n=e.onClick,i=e.use,o=e.theme,s=e.hover,c=e.active,u=e.disabled,d=Object(r.a)(e,["children","onClick","use","theme","hover","active","disabled"]);return Object(a.jsx)(y,Object.assign({},d,{theme:o,use:i,onClick:n,hover:s,active:c,disabled:u,children:Object(a.jsx)(C,{children:t})}))};w.displayName="VizExButton";w.propTypes={active:o.a.bool,children:o.a.node,disabled:o.a.bool,hover:o.a.bool,onClick:o.a.func,size:o.a.oneOf(Object.keys(l.c)),theme:d.a,use:o.a.oneOf(Object.values(p))};w.defaultProps={use:p.SECONDARY,disabled:!1,size:u.e};t.a=w},Vsm7:function(e,t,n){var r=n("QhUm");function a(e){return r(this,e).get(e)}e.exports=a},VuFk:function(e,t,n){"use strict";var r,a=n("nDpY"),i=n.n(a),o=n("19qb"),s=n("5Enb"),c=n("edeU"),u=n("+eZO"),d=n("LpN+"),l=n("g05V"),p=n("QgEn"),b=n("QYOI"),h=n("VfuR"),f=n.n(h),m=n("Ktcs"),g=n("9f1P"),j=n.n(g),O=n("0IK8"),v=n("fQRB"),x=n("eP/i"),y=n("6s0Z"),C=n("6xAP"),w=(r={},Object(v.a)(r,y.b,Object(C.a)()),Object(v.a)(r,y.a,Object(C.a)()),Object(v.a)(r,y.c,Object(C.a)({backgroundColor:x.c,borderColor:x.d})),r),k=Object(m.createContext)(w),T=n("qXlW"),I=n("3xeV"),S=n("5N4t"),R=n("0GyJ"),A=n("tY0N"),P=n("LLbC"),M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?P.c:O.getSenderId,a=n?P.d:O.getSenderType;return r(e)===r(t)&&a(e)===a(t)},E=function(e,t,n,r){return e===n&&t===r||e===r&&t===n},N=function(e,t){var n=Object(O.getType)(e),r=Object(O.getType)(t);return n===r||E(n,r,R.a,A.a)},_=function(e){return function(t,n){var r=Object(O.getTimestamp)(t),a=Object(O.getTimestamp)(n);return Math.abs(r-a)>=e}}(6e4),q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Object(S.a)(e)||e;t=Object(S.a)(t)||t;return M(e,t,n)&&N(e,t)&&!_(e,t)},F=function(e){return Object(S.a)(e)||e},L=n("rCfO"),B=n("SlUU"),D=Object(L.a)((function(e,t){e=F(e);return Object(B.fileAttachmentIdsInMessage)(e).reduce((function(e,n){return t.has(""+n)?e.push(t.get(""+n)):e}),Object(b.List)())})),z=n("eoCu"),U=n("3Egs"),V=function(e,t,n,r){var a,i=!t,o=!q(e,t),s=!r&&!q(e,n),c=!n,u=(a={},Object(v.a)(a,U.a,i),Object(v.a)(a,U.b,o),Object(v.a)(a,U.d,s),Object(v.a)(a,U.c,c),a);return Object.keys(u).reduce((function(e,t){return u[t]?e.add(t):e}),Object(b.Set)())},H=n("i2Vg"),Q=n("2rNL"),W=function(e,t){return!Object.keys(e).some((function(n){return"fileAttachments"===n||"positionDescriptors"===n||"senders"===n?!Object(b.is)(e[n],t[n]):e[n]!==t[n]}))},G=Object(m.memo)((function(e){var t=e.canRestoreMessagesForThread,n=e.fileAttachments,r=e.historyConfig,a=e.message,i=e.portalId,o=e.positionDescriptors,s=e.presentSenderLocators,c=e.senders,u=e.visitorLastReadTimestamp,d=e.lastMessageId,l=e.ungatedForNewOmniChannelThreadAPI,b=e.metadataDifferenceLogger,h=e.vid,f=e.recipientVisitors,m=Object(v.a)({},Q.a,Object(z.a)(a)),g=r[Object(O.getType)(a)];return g?Object(p.jsx)("div",Object.assign({},m,{children:Object(p.jsx)(g,{canRestoreMessagesForThread:t,fileAttachments:n,message:a,portalId:i,positionDescriptors:o,senders:c,presentSenderLocators:s,visitorLastReadTimestamp:u,lastMessageId:d,ungatedForNewOmniChannelThreadAPI:l,metadataDifferenceLogger:b,vid:h,recipientVisitors:f})})):null}),W);G.displayName="MessageHistoryItem";G.propTypes={canRestoreMessagesForThread:f.a.bool,fileAttachments:f.a.instanceOf(b.List),historyConfig:f.a.object.isRequired,lastMessageId:f.a.string,message:f.a.instanceOf(b.Record).isRequired,metadataDifferenceLogger:f.a.func,portalId:f.a.number.isRequired,positionDescriptors:H.a.isRequired,presentSenderLocators:f.a.instanceOf(b.Set),recipientVisitors:f.a.instanceOf(b.Map),senders:T.a,vid:f.a.number,visitorLastReadTimestamp:f.a.number};G.defaultProps={innerRef:function(){},positionDescriptors:[]};var Y=G,J=j.a.div.withConfig({displayName:"MessageHistory__ReflowElement",componentId:"mpook8-0"})(["z-index:0;padding-top:4px;padding-left:16px;padding-right:16px;flex-shrink:0;@media screen and (max-width:900px){padding-left:8px;padding-right:8px;}"]),K=function(e){Object(l.a)(t,e);function t(){Object(s.a)(this,t);return Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}Object(c.a)(t,[{key:"getDontIncludeLastInGroup",value:function(e,t){var n=this.props,r=n.messages,a=n.ungatedForNewOmniChannelThreadAPI,i=r.get(t+2);return!(!i||!q(e,i,a))}},{key:"renderHistory",value:function(){var e=this,t=this.props,n=t.canRestoreMessagesForThread,r=t.fileAttachments,a=t.getAdditionalPositionDescriptors,i=t.historyConfig,o=t.lastMessageId,s=t.messages,c=t.portalId,u=t.presentSenderLocators,d=t.senders,l=t.ungatedForNewOmniChannelThreadAPI,h=t.visitorLastReadTimestamp,f=t.metadataDifferenceLogger,m=t.vid,g=t.recipientVisitors,j=a(s);return s.map((function(t,a){var v,x=a>0?s.get(a-1):void 0,y=s.get(a+1);Object(O.getType)(y)===I.a&&(v=e.getDontIncludeLastInGroup(t,a));var C=D(t,r),w=V(t,x,y,v),k=Object(O.getId)(t);w=w.merge(j.get(k,Object(b.Set)()));return Object(p.jsx)(Y,{canRestoreMessagesForThread:n,historyConfig:i,fileAttachments:C,portalId:c,positionDescriptors:w,message:t,senders:d,presentSenderLocators:u,visitorLastReadTimestamp:h,lastMessageId:o,ungatedForNewOmniChannelThreadAPI:l,metadataDifferenceLogger:f,vid:m,recipientVisitors:g},Object(z.a)(t))}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.themeConfig;return Object(p.jsx)(J,{className:t,children:Object(p.jsx)(k.Provider,{value:n,children:this.renderHistory()})})}}]);return t}(m.PureComponent);K.displayName="MessageHistory";K.propTypes={canRestoreMessagesForThread:f.a.bool,className:f.a.string,fileAttachments:f.a.instanceOf(b.Map),getAdditionalPositionDescriptors:f.a.func,historyConfig:f.a.object.isRequired,lastMessageId:f.a.string,messages:f.a.instanceOf(b.List),metadataDifferenceLogger:f.a.func,portalId:f.a.number.isRequired,presentSenderLocators:f.a.instanceOf(b.Set),recipientVisitors:f.a.instanceOf(b.Map),senders:T.a,themeConfig:f.a.object,ungatedForNewOmniChannelThreadAPI:f.a.bool,vid:f.a.number,visitorLastReadTimestamp:f.a.number};K.defaultProps={canRestoreMessagesForThread:!1,getAdditionalPositionDescriptors:function(){return Object(b.Map)()},fileAttachments:Object(b.Map)(),preventAutoscroll:!1,presentSenderLocators:Object(b.Set)(),scrollContainerToBottom:function(){},displayEmailDeleteBanner:!1,ungatedForNewOmniChannelThreadAPI:!1};var Z=K,X=n("mKxs"),$=n("CnAB"),ee=Object(m.memo)((function(e){var t=e.themeConfig,n=e.children;return Object(p.jsx)($.a.Provider,{value:t,children:n})}));ee.displayName="ThemeConfigProvider";ee.propTypes={children:f.a.node.isRequired,themeConfig:f.a.objectOf(Object(X.a)("Theme"))};var te=ee,ne=n("T25L").a,re=n("5SRO"),ae=n("Pda3"),ie=n("E6wg"),oe=n("HiOC"),se=n("OoDT"),ce=n("3oj9"),ue=n("ZSXR"),de=n("eEyY"),le=n("gALC"),pe=function(e){var t=Object(ue.a)(e);return{isLoadingHistory:Object(ae.isStarted)(t),loadingHistoryFailed:Object(ae.isFailed)(t),sessionId:Object(ie.getSessionId)(e),threadHistory:Object(ce.a)(e),threadId:Object(de.getCurrentThreadId)(e),isOnFocus:Object(le.a)(e)}},be={fetchThreadHistory:oe.fetchThreadHistory},he=Object(o.connect)(pe,be)(se.a),fe=n("Fjoq"),me=Object(b.Record)({tileBackgroundColor:"rgba(255, 255, 255, 0.5)"},"FileAttachmentTheme"),ge=n("xzMr"),je=n("iDVC"),Oe=me({tileBackgroundColor:x.j}),ve=function(e){var t,n=e.coloring;return t={},Object(v.a)(t,y.b,Object(je.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:Oe})),Object(v.a)(t,y.a,Object(je.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:Oe,widgetAccent:Object(fe.c)(n)?x.k:Object(fe.a)(n),quickReplyTheme:Object(ge.a)({borderColor:Object(fe.c)(n)?x.h:Object(fe.a)(n),color:Object(fe.c)(n)?x.k:Object(fe.b)(n)})})),Object(v.a)(t,y.c,Object(je.a)({alignItems:"flex-end",backgroundColor:Object(fe.c)(n)?x.l:Object(fe.a)(n),borderColor:"rgba(0, 0, 0, 0.2)",borderRadius:"8px 0px 8px 8px",borderWidth:"0px",textColor:Object(fe.c)(n)?x.k:Object(fe.b)(n),fileAttachmentTheme:Oe,widgetAccent:Object(fe.c)(n)?x.k:Object(fe.a)(n)})),t},xe=n("sl/w"),ye=n("gFbD"),Ce=n("LRQi"),we=j.a.div.withConfig({displayName:"NewThreadPrompt__NewThreadpromptContainer",componentId:"gvh43c-0"})(["padding:32px 20px 12px 20px;text-align:center;width:100%;"]);function ke(e){var t=e.createNewThread;return Object(p.jsx)(ye.a,{children:function(e){return Object(p.jsxs)(we,{children:[Object(p.jsx)("p",{className:"m-bottom-0",children:Object(p.jsx)(xe.a,{message:"conversations-visitor-ui.newThreadPrompt.newHeading",options:{locale:e}})}),Object(p.jsx)(Ce.a,{"data-test-id":"visitor-widget-start-new-thread-button",onClick:t,children:Object(p.jsx)(xe.a,{message:"conversations-visitor-ui.newThreadPrompt.newButton",options:{locale:e}})})]})}})}ke.propTypes={createNewThread:f.a.func.isRequired};ke.displayName="NewThreadPrompt";var Te=ke,Ie=n("uxYb"),Se=n("AQmo"),Re=function(e){return{accentColor:Object(fe.a)(Object(Se.a)(e))}},Ae={createNewThread:Ie.a},Pe=Object(o.connect)(Re,Ae)(Te),Me=function(e){Object(l.a)(t,e);function t(){Object(s.a)(this,t);return Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.fileAttachments,r=e.messagesList,a=e.portalId,i=e.senders,o=e.shouldRenderNewThreadPrompt;return Object(p.jsx)(he,{messageCount:ne(r),shouldScrollToBottom:o,children:Object(p.jsxs)(te,{themeConfig:ve({coloring:t}),children:[Object(p.jsx)(Z,{fileAttachments:n,historyConfig:re.a,messages:r,portalId:a,senders:i}),o&&Object(p.jsx)(Pe,{})]})})}}]);return t}(m.Component);Me.propTypes={coloring:Object(X.a)("ColoringRecord").isRequired,fileAttachments:f.a.instanceOf(b.Map).isRequired,messagesList:f.a.instanceOf(b.List),portalId:f.a.number.isRequired,senders:f.a.instanceOf(b.Map).isRequired,shouldRenderNewThreadPrompt:f.a.bool.isRequired};Me.displayName="ThreadHistory";var Ee=Me,Ne=n("dJw2"),_e=n("f8gn"),qe=n("TXBG"),Fe=n("eCQl"),Le=n("YibP"),Be=function(e){var t;try{t=Object(Ne.a)(e)}catch(e){Object(Fe.reportError)({error:Object(Le.a)("ConnectedChatHistoryGetMessagesList selector threw: "+e.message,e)});throw e}return{coloring:Object(Se.a)(e),fileAttachments:Object(qe.a)(e),messagesList:t,portalId:i.a.get(),senders:Object(_e.a)(e)}},De={};t.a=Object(o.connect)(Be,De)(Ee)},Vv6d:function(e,t,n){"use strict";var r=n("FGh+"),a=n("QgEn"),i=n("VfuR"),o=n.n(i),s=n("9f1P"),c=n.n(s),u=n("0wDu").h,d=n("NrIs"),l=c.a.div.withConfig({displayName:"VizExNanoProgress__Bar",componentId:"sc-11fol2g-0"})(["transition:width 0.2s ease-in-out;left:0;position:absolute;top:0;opacity:",";width:",";height:3px;z-index:",";background-color:",";"],(function(e){return 0===e.value?0:1}),(function(e){return e.value+"%"}),(function(e){return e.zIndex}),(function(e){var t=e.theme;return u(t)})),p=function(e){var t=e.zIndex,n=e.value,i=e.theme,o=Object(r.a)(e,["zIndex","value","theme"]);return Object(a.jsx)(l,Object.assign({},o,{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":n,role:"progressbar",zIndex:t,value:n,theme:i}))};p.propTypes={theme:d.a,value:o.a.number,zIndex:o.a.number};p.defaultProps={zIndex:10,value:0};p.displayName="VizExNanoProgress";t.a=p},WdXK:function(e,t,n){"use strict";n.r(t);var r=n("wxG8"),a=n("QYOI"),i=Object(a.Record)({senderId:null,senderType:null},"SenderLocator");n.d(t,"buildSenderLocator",(function(){return s}));var o=[r.AGENT,r.BOT,r.SYSTEM,r.VISITOR,r.INTEGRATOR],s=function(e,t){o.includes(e)||console.warn("buildSenderLocator recevied invalid sender type "+e+" expected one of: "+o);return i({senderType:e,senderId:t?""+t:null})}},Wnz4:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentError",(function(){return i}));var r=n("Ut5p"),a=n("FDs6"),i=Object(r.b)(a.a,(function(e,t){return{error:e,threadId:t}}))},Wzl7:function(e,t,n){"use strict";var r=n("5Enb"),a=n("edeU"),i=n("+eZO"),o=n("LpN+"),s=n("g05V"),c=n("QgEn"),u=n("VfuR"),d=n.n(u),l=n("Ktcs"),p=n("7A+m"),b=n("VuFk"),h=n("19qb"),f=n("k09d"),m=n("G0nr"),g=n("Ux+X"),j=n("mKxs"),O=n("Zn4N"),v=n("FC+o"),x=n("evgc"),y=n("npjq"),C=n("sl/w"),w=n("/EZN"),k=n("LRQi"),T=n("FGh+"),I=n("8Q5G"),S=n("9f1P"),R=n.n(S).a.input.withConfig({displayName:"VizExFileButton__FilePickerInput",componentId:"ehisro-0"})(["display:none;"]),A=function(e){var t=e.children,n=e.multiple,r=e.accept,a=e.onChange,i=e.onClick,o=Object(T.a)(e,["children","multiple","accept","onChange","onClick"]),s=Object(l.useRef)(),u=function(e){s.current.click();Object(I.a)(i,e)};return Object(c.jsxs)(l.Fragment,{children:[t({onClick:u}),Object(c.jsx)(R,Object.assign({},o,{ref:s,type:"file",accept:r.join(","),multiple:n,onChange:a}))]})};A.displayName="VizExFileButton";A.defaultProps={accept:[]};A.propTypes={accept:d.a.arrayOf(d.a.string),children:d.a.func.isRequired,multiple:d.a.bool,onChange:d.a.func,onClick:d.a.func};var P=A,M=function(e){return Object(c.jsx)(P,{accept:w.a,use:"unstyled",onClick:e.onClick,onChange:e.onChange,children:function(t){return Object(c.jsx)(k.a,Object.assign({use:"on-bright"},t,{children:e.children}))}})};M.displayName="FilePickerLink";M.propTypes={children:d.a.node.isRequired,onChange:d.a.func.isRequired,onClick:d.a.func};var E=M,N=n("kSDi"),_=n("BnUr"),q=function(e){var t=e.attachmentsError,n=e.dismissAttachmentsError,r=e.selectAttachmentFile,a=e.thread,i=e.trackInteraction,o=function(){n({threadId:Object(_.getThreadId)(a)})},s=function(e){var t=e.target.files;if(t&&t.length){var n=t.item(0);r({file:n,thread:a})}},u=function(){i("retry-attachment-upload",{action:"retry attachment upload"})},d=function(){switch(t){case O.b:return Object(c.jsx)(C.a,{message:"cvVisitorUIAttachments.errors.fileSizeExceeded",options:{maxSize:y.a.formatSize(N.b)}});case O.c:return Object(c.jsx)(C.a,{message:"cvVisitorUIAttachments.errors.uploadError"});case O.a:return Object(c.jsx)(C.a,{message:"cvVisitorUIAttachments.errors.invalidFileType"});default:return null}}();return Object(c.jsx)(x.a,{title:d,onClose:o,link:Object(c.jsx)(E,{onChange:s,onClick:u,children:Object(c.jsx)(C.a,{message:"cvVisitorUIAttachments.tryAgain"})})})};q.displayName="AttachmentErrorAlerts";q.propTypes={attachmentsError:d.a.oneOf([O.b,O.c,O.a]),dismissAttachmentsError:d.a.func.isRequired,selectAttachmentFile:d.a.func.isRequired,thread:Object(j.a)("Thread").isRequired,trackInteraction:d.a.func.isRequired};var F=q,L=n("dvoe"),B=n("HElP"),D=function(e){var t=e.createNewThread,n=e.fetchOlderThreadHistory,r=e.networkError,a=e.startPubSub,i=e.resubscribe,o=Object(l.useState)([]),s=Object(B.a)(o,2),u=s[0],d=s[1],p=function(){d([].concat(Object(L.a)(u),[r]))};if(u.includes(r))return null;var b=function(){switch(r){case v.b:case v.c:case v.d:return Object(c.jsx)(C.a,{message:"conversations-visitor-ui.network.offline.title"});case v.e:return Object(c.jsx)(C.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});case v.a:return Object(c.jsx)(C.a,{message:"conversations-visitor-ui.network.newThreadFailure.title"});default:return null}}(),h=function(){switch(r){case v.e:return Object(c.jsx)(k.a,{use:"on-bright",onClick:n,children:Object(c.jsx)(C.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case v.a:return Object(c.jsx)(k.a,{use:"on-bright",onClick:t,children:Object(c.jsx)(C.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case v.d:return Object(c.jsx)(k.a,{use:"on-bright",onClick:i,children:Object(c.jsx)(C.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case v.c:return Object(c.jsx)(k.a,{use:"on-bright",onClick:a,children:Object(c.jsx)(C.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});default:return null}}();return Object(c.jsx)(x.a,{title:b,onClose:p,link:h})};D.displayName="NetworkErrorAlerts";D.propTypes={createNewThread:d.a.func.isRequired,fetchOlderThreadHistory:d.a.func.isRequired,networkError:d.a.oneOf([v.b,v.e,v.a,v.c,v.d]).isRequired,resubscribe:d.a.func.isRequired,startPubSub:d.a.func.isRequired};var z=D,U=function(e){Object(s.a)(t,e);function t(){Object(r.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.attachmentsError,n=e.createNewThread,r=e.dismissAttachmentsError,a=e.fetchOlderThreadHistory,i=e.networkError,o=e.resubscribe,s=e.selectAttachmentFile,u=e.startPubSub,d=e.thread,l=e.trackInteraction;return t?Object(c.jsx)(F,{attachmentsError:t,dismissAttachmentsError:r,selectAttachmentFile:s,thread:d,trackInteraction:l}):i?Object(c.jsx)(z,{createNewThread:n,fetchOlderThreadHistory:a,networkError:i,resubscribe:o,startPubSub:u}):null}}]);return t}(l.Component);U.displayName="ChatAreaAlertContainer";U.propTypes={attachmentsError:d.a.oneOf([O.b,O.c,O.a]),createNewThread:d.a.func.isRequired,dismissAttachmentsError:d.a.func.isRequired,fetchOlderThreadHistory:d.a.func.isRequired,networkError:d.a.oneOf([v.b,v.e,v.a,v.c,v.d]),resubscribe:d.a.func.isRequired,selectAttachmentFile:d.a.func.isRequired,startPubSub:d.a.func.isRequired,thread:Object(j.a)("Thread").isRequired,trackInteraction:d.a.func.isRequired};var V=U,H=n("GkNN"),Q=n("lRdY"),W=n("V2EP"),G=n("r0yA"),Y=n("NpZo"),J=n("E6wg"),K=n("Xcjc"),Z=n("J4oD"),X=n("HiOC"),$=n("021p"),ee=function(){return function(e,t){var n=t(),r=Object(J.getSessionId)(n),a=Object(Y.getSelectedThreadId)(n);if(null!==a&&a!==K.a){var i=Object(f.a)(n),o=Object(Z.historyDataForThread)(n,{thread:i}),s=Object($.c)(o),c=Object($.d)(o);e(Object(X.fetchThreadHistory)({offsetOrdinal:s,offsetTimestamp:c,threadId:a,sessionId:r}))}}},te=n("5rZi"),ne=n("8HpB"),re=function(e,t){var n=t.thread;return{attachmentsError:Object(H.a)(e,{thread:n}),networkError:Object(G.a)(e)}},ae={createNewThread:te.createNewThread,dismissAttachmentsError:Q.a,fetchOlderThreadHistory:ee,selectAttachmentFile:W.a,trackInteraction:g.trackInteraction,startPubSub:ne.startPubSub,resubscribe:m.resubscribe},ie=Object(h.connect)(re,ae)(V),oe=function(e){return{thread:Object(f.a)(e)}},se=Object(h.connect)(oe)(ie),ce=n("Qf6G"),ue=n("/Dz0"),de=n("MBJP"),le=n("647q"),pe=n("ZqFO"),be=Object(de.a)([le.getLatestWidgetData],(function(e){return Object(pe.d)(e)})),he=n("lOT2"),fe=n("8M+t"),me=n("AQmo"),ge=n("JGJA"),je=Object(ge.a)("gdpr"),Oe=Object(de.a)([je],Object(ge.a)("consentToProcessError")),ve=function(e){return{consentToProcessMessage:be(e),showGdprConsentToProcessButton:Object(he.a)(e),coloring:Object(me.a)(e),consentToProcessError:Oe(e)}},xe={consentToProcess:ce.consentToProcess,dismissConsentToProcessError:ue.b,trackInteraction:g.trackInteraction},ye=Object(h.connect)(ve,xe)(fe.a),Ce=n("Isoj"),we=n("NfVS"),ke=n("eP/i"),Te=n("monH"),Ie=n("T77c"),Se=function(e){var t=e.ariaLabel,n=e.children,r=e.onClick,a=e.href;a||(a=void 0);return Object(c.jsx)(k.a,{theme:Object(Te.a)(Object(Ie.e)(ke.m)),onClick:r,href:a,external:!0,"aria-label":t,children:n})};Se.propTypes={ariaLabel:d.a.string,children:d.a.node.isRequired,href:d.a.string,onClick:d.a.func};Se.defaultProps={href:"",onClick:function(){}};Se.displayName="BrandingLink";var Re=Se,Ae=n("7LhL"),Pe=function(e){return Object(c.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(c.jsx)("defs",{children:Object(c.jsx)("path",{d:"M17 16c-1.38 0-2.5-1.12-2.5-2.5S15.62 11 17 11s2.5 1.12 2.5 2.5S18.38 16 17 16m.906-8.43V4.832c.716-.338 1.218-1.061 1.218-1.9v-.064c0-1.158-.95-2.105-2.11-2.105h-.064c-1.161 0-2.111.947-2.111 2.105v.064c0 .839.503 1.562 1.219 1.9V7.57c-1.067.164-2.042.603-2.846 1.249L5.676 2.97c.05-.191.085-.387.085-.594C5.762 1.067 4.698.001 3.384 0 2.069-.001 1 1.06 1 2.372.998 3.683 2.063 4.748 3.378 4.75c.428 0 .825-.121 1.172-.318l7.413 5.753c-.63.95-1 2.087-1 3.311 0 1.282.406 2.467 1.093 3.443L9.8 19.188c-.178-.053-.363-.091-.56-.091-1.08 0-1.956.874-1.956 1.952 0 1.078.876 1.951 1.956 1.951 1.081 0 1.957-.873 1.957-1.95 0-.196-.038-.381-.091-.559l2.23-2.225c1.012.772 2.273 1.235 3.645 1.235 3.324 0 6.018-2.69 6.018-6.005 0-3.002-2.21-5.482-5.094-5.926",id:"sprocket__a"})}),Object(c.jsx)("use",{xlinkHref:"#sprocket__a",fillRule:"evenodd"})]}))};Pe.displayName="SVGSprocket";var Me=Pe,Ee=n("Y8MA"),Ne=n("fzij"),_e=function(e){Object(s.a)(t,e);function t(){Object(r.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.liveChatHref,n=e.onLinkClick;return Object(c.jsxs)("div",{className:"m-bottom-2 align-center justify-center",children:[Object(c.jsx)(Ae.a,{theme:Object(Te.a)(Object(Ee.b)(ke.m)),icon:Object(c.jsx)(Me,{}),className:"m-right-1"}),Object(c.jsx)(Ne.a,{use:"help",children:Object(c.jsx)(we.a,{message:"conversations-visitor-experience-components.chatArea.branding_jsx",elements:{Link:Re},options:{ariaLabel:y.a.text("conversations-visitor-experience-components.chatArea.brandingAriaLabel"),href:t,onClick:n}})})]})}}]);return t}(l.PureComponent);_e.propTypes={liveChatHref:d.a.string,onLinkClick:d.a.func};_e.displayName="WidgetBranding";var qe=_e,Fe=n("JWyW"),Le=n("jxkM"),Be=function(e){return{liveChatHref:Object(Fe.a)(e),onLinkClick:Le.clickedViralLink}},De=Object(h.connect)(Be)(qe),ze=n("QmIQ"),Ue=1e3,Ve=function(e){Object(s.a)(t,e);function t(e){var n;Object(r.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={renderNewThreadPrompt:!e.isThreadStarted};return n}Object(a.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.isThreadStarted,a=n.toggleOnAndOffInputFocus,i=e.isThreadStarted;r||r===i||setTimeout((function(){t.setRenderNewThreadPromptTrue();a(!1)}),Ue);r&&this.state.renderNewThreadPrompt&&this.setRenderNewThreadPromptFalse()}},{key:"setRenderNewThreadPromptTrue",value:function(){this.setState({renderNewThreadPrompt:!0})}},{key:"setRenderNewThreadPromptFalse",value:function(){this.setState({renderNewThreadPrompt:!1})}},{key:"renderMessageEditor",value:function(){var e=this.props,t=e.requiresExplicitConsentToProcess,n=e.renderCookieConsentPrompt,r=this.state.renderNewThreadPrompt;return t||n||r?null:Object(c.jsxs)(l.Fragment,{children:[Object(c.jsx)(se,{}),Object(c.jsx)(p.a,{})]})}},{key:"renderError",value:function(){var e=Object(c.jsx)(C.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});return Object(c.jsx)(x.a,{title:e,onClose:function(){}})}},{key:"render",value:function(){var e=this.props,t=e.showingGdprProcess,n=e.showingHsBranding,r=e.renderCookieConsentPrompt,a=this.state.renderNewThreadPrompt;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ze.a,{renderError:this.renderError,errorLoggingTitle:"ConnectedThreadHistory",children:Object(c.jsx)(b.a,{shouldRenderNewThreadPrompt:a})}),r&&Object(c.jsx)(Ce.a,{}),t&&!r&&Object(c.jsx)(ye,{}),this.renderMessageEditor(),n&&Object(c.jsx)(De,{})]})}}]);return t}(l.PureComponent);Ve.displayName="UnifiedThreadView";Ve.propTypes={isThreadStarted:d.a.bool.isRequired,renderCookieConsentPrompt:d.a.bool.isRequired,requiresExplicitConsentToProcess:d.a.bool.isRequired,showingGdprProcess:d.a.bool.isRequired,showingHsBranding:d.a.bool.isRequired,toggleOnAndOffInputFocus:d.a.func.isRequired};t.a=Ve},XXaZ:function(e,t,n){var r=n("uQvf"),a=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}e.exports=i},XiSY:function(e,t,n){var r=n("3FHW"),a=n("bwj0"),i=n("kmmH"),o=n("QVIP"),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,u=Function.prototype,d=Object.prototype,l=u.toString,p=d.hasOwnProperty,b=RegExp("^"+l.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(e){return!(!i(e)||a(e))&&(r(e)?b:c).test(o(e))}e.exports=h},"Xs/R":function(e,t,n){"use strict";var r=n("QgEn"),a=(n("Ktcs"),function(e){return Object(r.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(r.jsx)("defs",{children:Object(r.jsx)("path",{d:"M21.158.222L2.568 11.815c-.8.498-.749 1.215.113 1.591l4.406 1.923 10.395-9.903c1.377-1.296 1.569-1.119.426.395L8.254 18.215v4.927c0 .953.5 1.141 1.113.418l4.473-5.282 5.055 2.207c.861.376 1.643-.092 1.736-1.04l1.81-18.404c.094-.949-.484-1.317-1.283-.819",id:"send__a"})}),Object(r.jsx)("use",{xlinkHref:"#send__a",fillRule:"evenodd"})]}))});a.displayName="SVGSend";t.a=a},Z6IV:function(e,t,n){"use strict";n.r(t);n.d(t,"isSupportedMessageType",(function(){return d}));var r=n("U+Gd"),a=n("bCG+"),i=n("5N4t"),o=n("/rM/"),s=n("0IK8"),c=n("wxG8"),u=n("9d9s"),d=function(e){if(e instanceof r.a||e instanceof a.a){e=Object(i.a)(e);if(Object(s.getSenderType)(e)!==c.VISITOR)return!1}if(Object(o.a)(e))return!1;var t=Object(s.getType)(e);return Object.keys(u.a).some((function(e){return e===t}))}},ZAuv:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("fQRB"),a=n("oawp"),i=n("BnUr"),o=n("nS6h"),s=n("+TdC"),c=n("+Q4j"),u=n("BvOu"),d=n("B/8b"),l=n("v0wH"),p=n("CdQ/"),b=function(e){var t=e.thread;return function(e){var n=Object(i.getChannelName)(t),b=Object(i.getThreadId)(t),h=a.VISITOR_SENDER,f=Object(d.a)(h),m=Object(p.getMessagesUtk)(),g=new s.a({id:Object(u.generateUuid)(),typingState:null,sender:Object(r.a)({"@type":h},f,m),status:{source:c.a,messageStatus:l.b}});e(Object(o.publishMessageToConversation)({channel:n,message:g,threadId:b}))}}},Zn4N:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"c",(function(){return a}));n.d(t,"a",(function(){return i}));var r="SIZE_LIMIT_EXCEEDED",a="UPLOAD_ERROR",i="INVALID_FILE_TYPE"},"b+5w":function(e,t,n){"use strict";function r(){var e,t;return{promise:new Promise((function(n,r){t=n;e=r})),reject:e,resolve:t}}t.a=r},bOW6:function(e,t,n){"use strict";n.r(t);n.d(t,"wrapFailedMessage",(function(){return c}));var r=n("v0wH"),a=n("0IK8"),i=n("C3IS"),o=n("bCG+"),s=n("qjq5"),c=Object(s.a)((function(e,t){var n=e.threadId,s=e.channel,c=e.allowRetry,u=void 0===c||c;return Object(i.b)(t)&&Object(a.getStatusForCmf)(t)===r.a?Object(o.a)({message:t,threadId:n,channel:s,allowRetry:u}):t}))},bwj0:function(e,t,n){var r,a=n("DOHQ"),i=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";function o(e){return!!i&&i in e}e.exports=o},byjC:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("MBJP"),a=n("k8Ub"),i=n("C3IS"),o=n("V+nC"),s=n("J4oD"),c=n("kWFB"),u=n("iPDb"),d=Object(r.a)(s.historyDataForThread,(function(e){if(!e||!Object(c.hasMessages)(e))return!1;var t=Object(u.a)(e).filter((function(e){return Object(i.b)(e)&&!Object(i.c)(e)||Object(o.a)(e)})).last();return Boolean(Object(a.a)(t))}))},ccWV:function(e,t,n){var r=n("LPlp"),a=Array.prototype.splice;function i(e){var t=this.__data__,n=r(t,e);if(n<0)return!1;n==t.length-1?t.pop():a.call(t,n,1);--this.size;return!0}e.exports=i},d1Q1:function(e,t,n){var r=n("5els"),a=n("p1fP"),i=n("Vsm7"),o=n("wID2"),s=n("BB3q");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r;c.prototype.delete=a;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},dJw2:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("yynV"),a=n("MBJP"),i=n("5SRO"),o=n("4nf7"),s=!1,c=Object(a.a)([o.a],(function(e){return Object(r.insertDatesIntoMessageList)(e,i.a,s)}))},dZ2B:function(e,t,n){"use strict";n.r(t);n.d(t,"getUserTimezone",(function(){return i}));var r=function(e){return(e>0)-(e<0)||+e},a=function(e){return e>=10?e:"0"+e},i=function(){var e=(new Date).getTimezoneOffset(),t=r(e),n=Math.floor(Math.abs(e/60)),i=Math.abs(e%60),o=a(n)+":"+a(i);return t>0?"-"+o:"+"+o}},deD5:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("MBJP"),a=n("JGJA"),i=n("647q"),o=Object(r.a)([i.getLatestWidgetData],Object(a.a)("gates"))},dz5W:function(e,t,n){"use strict";var r=n("FGh+"),a=n("QgEn"),i=n("9f1P"),o=n.n(i),s=n("0wDu"),c=s.b,u=s.a,d=s.i,l=function(){return"#f5f8fa"},p=function(){return"#eaf0f6"},b=n("VfuR"),h=n.n(b),f=n("NrIs"),m=function(e){var t=e.theme;return Object(i.css)(["color:",";background-color:",";"],c(t),u(t))},g=o.a.div.withConfig({displayName:"VizExFileAttachment__AttachmentWrapper",componentId:"blby5x-0"})(["display:flex;font-size:12px;padding:12px;padding-right:32px;border-radius:3px;position:relative;max-width:100%;flex-direction:row;background-color:",";border:1px solid ",";color:",";",";"],(function(e){var t=e.theme;return l(t)}),(function(e){var t=e.theme;return p(t)}),(function(e){var t=e.theme;return d(t)}),(function(e){return e.processing&&m(e)})),j=o.a.div.withConfig({displayName:"VizExFileAttachment__ContentWrapper",componentId:"blby5x-1"})(["display:flex;position:relative;max-width:100%;> *:nth-child(2){padding-left:12px;}"]),O=o.a.div.withConfig({displayName:"VizExFileAttachment__PreviewWrapper",componentId:"blby5x-2"})(["overflow-y:hidden;overflow-x:hidden;align-items:center;display:flex;flex-basis:auto;justify-content:center;flex-shrink:0;font-size:32px;max-height:32px;width:32px;"]),v=o.a.div.withConfig({displayName:"VizExFileAttachment__FileInfoWrapper",componentId:"blby5x-3"})(["flex-grow:1;flex-shrink:0;flex-basis:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;@media all and (-ms-high-contrast:none){flex-basis:auto;max-width:100%;padding-right:12px;}"]),x=o.a.b.withConfig({displayName:"VizExFileAttachment__FileName",componentId:"blby5x-4"})(["font-weight:600;font-size:12px;line-height:12px;"]),y=o.a.div.withConfig({displayName:"VizExFileAttachment__FileInfo",componentId:"blby5x-5"})(["font-size:12px;line-height:12px;"]),C=function(e){var t=e.processing,n=e.preview,i=e.fileName,o=e.fileInfo,s=e.children,c=e.theme,u=Object(r.a)(e,["processing","preview","fileName","fileInfo","children","theme"]);return Object(a.jsxs)(g,Object.assign({},u,{theme:c,processing:t,children:[s,Object(a.jsxs)(j,{children:[n&&Object(a.jsx)(O,{children:n}),Object(a.jsxs)(v,{children:[Object(a.jsx)(x,{children:i}),Object(a.jsx)(y,{children:o})]})]})]}))};C.propTypes={children:h.a.node,fileInfo:h.a.node,fileName:h.a.node,preview:h.a.node,processing:h.a.bool,theme:f.a};C.displayName="VizExFileAttachment";t.a=C},"eg+O":function(e,t,n){"use strict";n.r(t);n.d(t,"fileExceedsSizeLimit",(function(){return a}));var r=n("kSDi"),a=function(e){return e.size>r.b}},eoCu:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("MJM1"),a=function(e){return Object(r.a)(["id"],e)||Object(r.a)(["message","id"],e)||-1}},evgc:function(e,t,n){"use strict";var r=n("5Enb"),a=n("edeU"),i=n("+eZO"),o=n("LpN+"),s=n("g05V"),c=n("QgEn"),u=n("VfuR"),d=n.n(u),l=n("Ktcs"),p=n("9f1P"),b=n.n(p),h=n("A5YI"),f=n("7LhL"),m=n("3MJX"),g=n("monH"),j=n("soAR"),O=n("eP/i"),v=b.a.div.withConfig({displayName:"ChatAreaAlert__Wrapper",componentId:"sc-9clpe5-0"})(["width:100%;display:flex;justify-content:center;background-color:transparent;"]),x=b.a.div.withConfig({displayName:"ChatAreaAlert__Alert",componentId:"sc-9clpe5-1"})(["display:flex;justify-content:flex-end;align-items:center;padding:7px 14px;min-width:85%;background-color:",";border:1px solid ",";font-weight:500;font-size:12px;"],O.n,O.o),y=b.a.div.withConfig({displayName:"ChatAreaAlert__Title",componentId:"sc-9clpe5-2"})(["flex:0 1 100%;"]),C=b.a.div.withConfig({displayName:"ChatAreaAlert__LinkWrapper",componentId:"sc-9clpe5-3"})(["flex:0 0 auto;"]),w=b()(h.a).withConfig({displayName:"ChatAreaAlert__StyledCloseButton",componentId:"sc-9clpe5-4"})(["position:static;flex:0 0 12px;margin-left:20px;"]),k=function(e){Object(s.a)(t,e);function t(){Object(r.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(a.a)(t,[{key:"render",value:function(){return Object(c.jsx)(v,{"data-test-id":"alert",children:Object(c.jsxs)(x,{children:[Object(c.jsx)(y,{children:this.props.title}),Object(c.jsx)(C,{children:this.props.link}),Object(c.jsx)(w,{use:"transparent-on-background",theme:Object(j.i)(O.p,Object(g.a)()),onClick:this.props.onClose,children:Object(c.jsx)(f.a,{icon:Object(c.jsx)(m.a,{})})})]})})}}]);return t}(l.Component);k.propTypes={link:d.a.node,onClose:d.a.func.isRequired,title:d.a.node.isRequired};k.defaultProps={onClose:function(){}};k.displayName="ChatAreaAlert";t.a=k},f8gn:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("fQRB"),a=n("MZef"),i=n("N7dr"),o=n("KXN9"),s=n("x1JE"),c=n("QYOI"),u=n("MBJP"),d=n("g4ag"),l=n("fl6v"),p=n("8FuJ"),b=n("BYz9"),h=Object(u.a)([l.getResponders],(function(e){return Object(s.getEntries)(e).reduce((function(e,t,n){var s,c=Object(o.a)(t);return Object(d.a)([Object(b.a)(n)],Object(a.a)((s={},Object(r.a)(s,i.a,c?Object(p.a)(c):null),Object(r.a)(s,i.c,Object(o.c)(t)),s)),e)}),Object(c.Map)())}))},fzij:function(e,t,n){"use strict";var r=n("9f1P"),a=n.n(r),i=n("0wDu"),o="help",s="default",c="error",u=n("tnBd"),d=function(e){var t=e.use,n=e.theme;switch(t){case c:return Object(r.css)(["color:",";"],Object(i.c)(n));case o:return Object(r.css)(["color:",";"],Object(i.d)(n));case s:default:return null}},l=a.a.small.withConfig({displayName:"VizExSmall",componentId:"t7ljp3-0"})(["display:block;",";",";"],u.b,d);t.a=l},gALC:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("MJM1"),a=function(e){return Object(r.a)(["widgetInputFocusStatus","widgetInputIsOnFocus"],e)}},gD8A:function(e,t,n){"use strict";n.r(t);n.d(t,"updateVisitorContext",(function(){return a}));var r=n("VYoM");function a(e){var t=e.currentUrl,n=e.sessionId,a=e.threadId;return r.a.put("livechat-public/v1/thread/visitor/"+a+"/currentUrl",{query:{sessionId:n,threadId:a},data:{currentUrl:t}})}},gygH:function(e,t,n){"use strict";n.r(t);n.d(t,"handleAttachmentUploadProgress",(function(){return i}));var r=n("kSDi"),a=n("qgyf"),i=function(e){var t=e.localId,n=e.threadId,i=e.loaded,o=e.total;return function(e){var s=i/o*r.c;e(Object(a.attachmentUploadProgress)({localId:t,threadId:n,progress:s}))}}},i2Vg:function(e,t,n){"use strict";var r=n("VfuR"),a=n.n(r),i=n("9C7g");t.a=Object(i.setOf)(a.a.string)},iDVC:function(e,t,n){"use strict";var r=n("rkqN"),a=n("eP/i"),i=n("QYOI"),o=n("xzMr"),s=Object(i.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:a.l,borderColor:a.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:a.k,fileAttachmentTheme:Object(r.a)(),quickReplyTheme:Object(o.a)(),widgetAccent:a.k},"Theme");t.a=s},iao3:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("sZZm"),a=n("tek+"),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(r.postExternalApiEvent)({eventType:a.d,payload:{visitorMessageData:e,isEmptyInput:t}})}},iu1j:function(e,t,n){"use strict";var r=n("5Enb"),a=n("edeU"),i=n("+eZO"),o=n("LpN+"),s=n("g05V"),c=n("QgEn"),u=n("VfuR"),d=n.n(u),l=n("Ktcs"),p=n("npjq"),b=n("sl/w"),h=n("OI0Z"),f=["PNG","GIF","JPEG","JPG"],m=function(e){var t=e.name.split("."),n=t[t.length-1]||"";return-1!==f.indexOf(n.toUpperCase())},g=n("A3yT"),j=function(e){var t=Object(g.getFile)(e),n=Object(g.getUploadProgress)(e);return t&&n?n/100*t.size:0},O=n("CPwH"),v=n("PzWr"),x=n("xYYH"),y=n("n8e+"),C=function(e){Object(s.a)(t,e);function t(e){var n;Object(r.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={imageDataUrl:""};return n}Object(a.a)(t,[{key:"componentDidMount",value:function(){this.processImageFile(this.props.imageFile)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.imageFile!==this.props.imageFile&&this.processImageFile(e.imageFile)}},{key:"shouldComponentUpdate",value:function(e,t){return t.imageDataUrl!==this.state.imageDataUrl}},{key:"processImageFile",value:function(e){var t=this,n=new FileReader;n.addEventListener("load",(function(){t.setState({imageDataUrl:n.result})}));n.readAsDataURL(e)}},{key:"render",value:function(){return Object(c.jsx)(y.a,{src:this.state.imageDataUrl})}}]);return t}(l.Component);C.displayName="ImageAttachmentPreview";C.propTypes={imageFile:d.a.instanceOf(File).isRequired};var w=C,k=n("mKxs"),T=n("Vv6d"),I=n("dz5W"),S=n("Euw7"),R=function(e){Object(s.a)(t,e);function t(){Object(r.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(a.a)(t,[{key:"customFilePreview",value:function(){var e=this.props.attachment,t=Object(g.getFile)(e);if(m(t))return Object(c.jsx)(w,{imageFile:t})}},{key:"fileInfo",value:function(){return Object(x.isUploadCompleted)(this.props.attachment)?Object(c.jsx)(h.a,{value:Object(v.getFileSize)(this.props.attachment)}):Object(c.jsx)(b.a,{message:"conversations-visitor-ui.stagedAttachment.uploadProgress",options:{uploadedBytes:p.a.formatSize(j(this.props.attachment),{precision:2,strip_insignificant_zeroes:!0}),totalBytes:p.a.formatSize(Object(v.getFileSize)(this.props.attachment))}})}},{key:"renderProgress",value:function(){return Object(x.isUploadCompleted)(this.props.attachment)?null:Object(c.jsx)(T.a,{value:Object(g.getUploadProgress)(this.props.attachment)})}},{key:"render",value:function(){return Object(c.jsxs)(I.a,{processing:!Object(x.isUploadCompleted)(this.props.attachment),fileName:Object(O.getFileName)(this.props.attachment),fileInfo:this.fileInfo(),preview:this.customFilePreview(),style:{minWidth:220},children:[Object(c.jsx)(S.a,{size:"xs",onClick:this.props.onRemove}),this.renderProgress()]})}}]);return t}(l.Component);R.displayName="FileUpload";R.propTypes={attachment:Object(k.a)("FileUploadRecord").isRequired,onRemove:d.a.func.isRequired};t.a=R},jM00:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("QYOI"),a=n("MBJP"),i=n("JGJA"),o=n("eEyY"),s=n("OhTC"),c=Object(a.a)([s.a,o.getCurrentThreadId],(function(e,t){var n=Object(i.a)(t,e);return n?n.toList():Object(r.List)()}))},jVj2:function(e,t,n){"use strict";n.r(t);n.d(t,"removeAttachment",(function(){return i}));var r=n("Ut5p"),a=n("FDs6"),i=Object(r.b)(a.g,(function(e){return{localId:e.localId,threadId:e.threadId}}))},k3iI:function(e,t,n){"use strict";n.r(t);n.d(t,"updateSessionId",(function(){return i}));var r=n("Ut5p"),a=n("Gaau"),i=Object(r.b)(a.b,(function(e){return{sessionId:e}}))},kSDi:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return a}));n.d(t,"c",(function(){return i}));var r="filemanager/api",a=10485760,i=95},ksA9:function(e,t,n){"use strict";n("npjq");var r=n("MJM1"),a=(n("wxG8"),["avatar"]),i=["data"],o=["email"],s=["firstName"],c=["id"],u=["lastName"],d=["senderType"],l=["status"];n.d(t,"a",(function(){return p}));n.d(t,"c",(function(){return b}));n.d(t,"d",(function(){return h}));n.d(t,"e",(function(){return f}));n.d(t,"f",(function(){return m}));n.d(t,"g",(function(){return g}));n.d(t,"b",(function(){return j}));n.d(t,"h",(function(){return O}));var p=Object(r.a)(a),b=Object(r.a)(o),h=Object(r.a)(s),f=Object(r.a)(c),m=Object(r.a)(u),g=Object(r.a)(d),j=Object(r.a)(i),O=Object(r.a)(l)},lJFu:function(e,t,n){"use strict";n.r(t);var r=n("UxsU"),a=n("+Q4j"),i=n("Xvzl"),o=n("DdHT"),s=n("nf9S"),c=n("Hnia"),u=n("021p"),d=function(e){Object(c.threadHistoryInvariant)(e);return Object(o.a)(u.b,Object(i.a)(s.isConversationalMessage),(function(e){return e&&e.last()}))(e)},l=n("nzmY"),p=n("0IK8");n.d(t,"buildCreatedThread",(function(){return b}));var b=function(e){var t=e.channelDetails,n=e.messagesPageUri,i=e.threadHistory,o=e.threadId;return Object(l.a)({channelDetails:t,currentUrl:n,latestMessageTimestamp:Object(p.getTimestamp)(d(i)),source:a.a,status:r.a.STARTED,threadId:o})}},lMvc:function(e,t,n){var r=n("uQvf"),a="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;function o(e){var t=this.__data__;if(r){var n=t[e];return n===a?void 0:n}return i.call(t,e)?t[e]:void 0}e.exports=o},lOT2:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("MBJP"),a=n("LgEy"),i=n("8cLO"),o=n("647q"),s=n("3gKe"),c=Object(r.a)([o.getLatestWidgetData,s.a],(function(e,t){return Object(a.gdprConsentToProcessEnabled)(e)&&!t&&Object(i.gdprExplicitConsentRequired)(e)}))},lRdY:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("Ut5p"),a=n("FDs6"),i=Object(r.b)(a.f,(function(e){return{threadId:e.threadId}}))},lTxV:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("JGJA"),a=Object(r.a)("currentUrl")},le4V:function(e,t,n){"use strict";var r=n("MBJP"),a=n("DdHT"),i=n("ZqFO"),o=n("VvTX"),s=Object(a.a)(i.f,o.getGdprConsentToCommunicateEnabled),c=n("647q");n.d(t,"a",(function(){return u}));var u=Object(r.a)([c.getLatestWidgetData],(function(e){return s(e)}))},lnDz:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadComplete",(function(){return i}));var r=n("Ut5p"),a=n("FDs6"),i=Object(r.b)(a.b,(function(e){return{localId:e.localId,threadId:e.threadId,fileId:e.fileId,uploadedFile:e.uploadedFile}}))},mMAp:function(e,t,n){var r=n("LPlp");function a(e){return r(this.__data__,e)>-1}e.exports=a},"n8e+":function(e,t,n){"use strict";var r=n("FGh+"),a=n("QgEn"),i=n("VfuR"),o=n.n(i),s="javascript:void(0)",c=/^([^:]+):/,u=/[\s\x00-\x1f]/g,d=function(e){if(e&&"string"==typeof e){var t=e.match(c);if(!t||e===s)return!1;if("javascript:"===t[0].replace(u,"").toLowerCase())return!0}return!1},l=n("9f1P"),p=n.n(l).a.img.withConfig({displayName:"VizExImage__StyledImg",componentId:"sc-1ay3lib-0"})(["display:block;height:auto;max-width:100%;"]),b=function(e){var t=e.src,n=Object(r.a)(e,["src"]),i=d(t);i&&console.warn("VizExImage was given an unsafe src, defaulting to empty.");return Object(a.jsx)(p,Object.assign({},n,{src:i?null:t}))};b.propTypes={src:o.a.string.isRequired};b.displayName="VizExImage";t.a=b},nEWr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=1024},oxA8:function(e,t,n){"use strict";var r=n("QgEn"),a=n("yvRk"),i=n.n(a),o=n("PVk8");t.a=i()({displayName:"FormattedHTMLMessage",mixins:[o.a],propTypes:o.c,render:function(){this.props.message;var e=Object(o.b)(Object(o.d)(this.props));return Object(r.jsx)("i18n-string",Object.assign({},e,{dangerouslySetInnerHTML:{__html:this._getValue()}}))}})},p1fP:function(e,t,n){var r=n("QhUm");function a(e){var t=r(this,e).delete(e);this.size-=t?1:0;return t}e.exports=a},p5BV:function(e,t,n){"use strict";n.r(t);n.d(t,"generateIdForFile",(function(){return r}));var r=function(e){var t=e.file,n=e.timestamp;return t.name+"-"+n}},pDio:function(e,t,n){var r=n("XiSY"),a=n("/TWJ");function i(e,t){var n=a(e,t);return r(n)?n:void 0}e.exports=i},qXlW:function(e,t,n){"use strict";var r=n("mKxs"),a=n("VfuR"),i=n.n(a),o=n("9C7g"),s=n.n(o);t.a=s.a.mapOf(s.a.recordOf({data:Object(r.a)("Sender"),status:i.a.string.isRequired}),Object(r.a)("SenderLocator"))},qgyf:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadProgress",(function(){return i}));var r=n("Ut5p"),a=n("FDs6"),i=Object(r.b)(a.c,(function(e){return{localId:e.localId,threadId:e.threadId,progress:e.progress}}))},qwm9:function(e,t,n){"use strict";n.r(t);n.d(t,"createVisitorThread",(function(){return o}));var r=n("nDpY"),a=n.n(r),i=n("VYoM");function o(e){var t=e.sessionId,n=e.messageId,r=e.hubspotUtk,o=e.messagesPageUri,s=e.visitorThreadInitialHistory,c=e.zoneId;return i.a.post("livechat-public/v1/thread/visitor",{query:{sessionId:t,welcomeMessageId:n,hubspotUtk:r,portalId:a.a.get(),expectedResponseType:"WRAPPER_V2",zoneId:c},data:{visitorThreadInitialHistory:s},headers:{"X-HubSpot-Messages-Uri":o}})}},r0yA:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("MBJP"),a=n("JGJA"),i=n("FC+o"),o=n("Pda3"),s=n("KXN9"),c=n("Ryja"),u=n("M/2P"),d=n("ZSXR"),l=function(e){return e.clientData.isPubNubClientConnected},p=Object(a.a)("subscriptions"),b=Object(r.a)([d.a,c.getAsyncStagedThread,p,u.getAsyncPubSubClient,l],(function(e,t,n,r,a){if(Object(o.isFailed)(e))return i.e;if(Object(o.isFailed)(t)){var c=Object(s.b)(t),u=c&&418===c.status;if(!c||!u)return i.a}return Object(o.isFailed)(n)?i.d:Object(o.isFailed)(r)?i.c:a?null:i.b}))},rkqN:function(e,t,n){"use strict";var r=n("QYOI"),a=Object(r.Record)({tileBackgroundColor:"rgba(255, 255, 255, 1)"},"FileAttachmentTheme");t.a=a},sIRh:function(e,t,n){"use strict";n.r(t);n.d(t,"default",(function(){return u}));n.d(t,"publishEmailCaptureResponseMessage",(function(){return u}));var r=n("+Q4j"),a=n("mu7T"),i=n("nS6h"),o=n("oawp"),s=n("BvOu"),c=n("v0wH"),u=function(e){var t=e.channel,n=e.email,u=e.threadId;return function(e){var d=o.SYSTEM_SENDER,l=new a.a({id:Object(s.generateUuid)(),text:n,sender:{"@type":d},status:{source:r.a,messageStatus:c.b}});e(Object(i.publishMessageToConversation)({channel:t,message:l,threadId:u}))}}},sWFM:function(e,t,n){"use strict";n.r(t);n.d(t,"getMessageId",(function(){return i}));var r=n("MBJP"),a=n("647q"),i=Object(r.a)([a.getLatestWidgetData],(function(e){return e.message.id}))},tOFb:function(e,t,n){"use strict";var r=n("QgEn"),a=(n("Ktcs"),function(e){return Object(r.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(r.jsx)("defs",{children:Object(r.jsx)("path",{d:"M16.233 8.738c.564-.502.564-1.317 0-1.818-.564-.503-1.477-.503-2.04 0l-7.128 6.35c-1.374 1.223-1.374 3.213 0 4.436.686.612 1.587.918 2.49.918.9 0 1.802-.306 2.489-.918l10.318-9.193h.001c2.183-1.946 2.183-5.11 0-7.055-2.181-1.944-5.733-1.944-7.918 0l-12.2 10.87c-2.993 2.667-2.993 7.006 0 9.673C3.742 23.334 5.707 24 7.673 24c1.965 0 3.93-.666 5.427-2l9.01-8.027c.563-.501.563-1.316 0-1.818-.564-.503-1.478-.503-2.042 0l-9.009 8.027c-1.867 1.664-4.906 1.663-6.773 0-1.867-1.664-1.867-4.37 0-6.035l12.2-10.869c1.058-.944 2.779-.943 3.836-.001s1.057 2.475 0 3.417h-.002l-10.317 9.194c-.249.22-.651.22-.897 0-.248-.22-.248-.58 0-.8l7.127-6.35z",id:"attach__a"})}),Object(r.jsx)("use",{xlinkHref:"#attach__a",fillRule:"evenodd"})]}))});a.displayName="SVGAttach";t.a=a},tlSg:function(e,t,n){"use strict";n.r(t);n.d(t,"sendConsentToCommunicate",(function(){return s}));var r=n("nDpY"),a=n.n(r),i=n("VYoM"),o="livechat-public/v1/privacy/consentToCommunicate";function s(e){var t=e.sessionId,n=e.hubspotUtk,r=e.threadId;return i.a.put(o,{query:{sessionId:t,hubspotUtk:n,threadId:r,portalId:a.a.get()}})}},uIOU:function(e,t,n){var r=n("QG41"),a=n("6upE"),i=n("lMvc"),o=n("XXaZ"),s=n("KLi6");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r;c.prototype.delete=a;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},uQvf:function(e,t,n){var r=n("pDio")(Object,"create");e.exports=r},"uk/S":function(e,t,n){"use strict";n.r(t);n.d(t,"sendConsentToProcess",(function(){return s}));var r=n("nDpY"),a=n.n(r),i=n("VYoM"),o="livechat-public/v1/privacy/consentToProcess";function s(e){var t=e.sessionId,n=e.hubspotUtk,r=e.welcomeMessageId;return i.a.put(o,{query:{sessionId:t,hubspotUtk:n,welcomeMessageId:r,portalId:a.a.get()}})}},vwA6:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("Ut5p"),a=n("NID/"),i=Object(r.b)(a.G,(function(e){return{widgetInputIsOnFocus:e}}));function o(e){return function(t){t(i(e))}}},w1Zi:function(e,t,n){"use strict";var r=n("5Enb"),a=n("edeU"),i=n("+eZO"),o=n("LpN+"),s=n("6DYd"),c=n("g05V"),u=n("QgEn"),d=n("1HZx"),l=n("9Utk"),p=n.n(l),b=n("Syy6"),h=n.n(b),f=n("VfuR"),m=n.n(f),g=n("Ktcs"),j=n("7j4v"),O=n("2gT5"),v=n("mKxs"),x=n("kSDi"),y=n("QYOI"),C=n("8f3s"),w=n("/EZN"),k=1e3,T=n("iao3"),I=function(e){Object(c.a)(t,e);function t(e){var n;Object(r.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).publishTypingMessage=h()(n.props.publishTypingMessage,j.a,{leading:!0,trailing:!1});n.onChatInputChanged=n.onChatInputChanged.bind(Object(s.a)(n));n.onPublishMessage=n.onPublishMessage.bind(Object(s.a)(n));n.onSelectAttachmentFiles=n.onSelectAttachmentFiles.bind(Object(s.a)(n));n.onRemoveAttachment=n.onRemoveAttachment.bind(Object(s.a)(n));n.inputStagingEvent=p()(T.a,k);return n}Object(a.a)(t,[{key:"onChatInputChanged",value:function(e){var t=this.props,n=t.currentConversation,r=t.disablePublish,a=t.shouldSendInputStagingEvent,i=t.showInitialMessageBubble;(0,t.setMessageEditorStagingText)(e);r||""===e||this.publishTypingMessage({thread:n});a&&this.inputStagingEvent(e,!1);i&&this.props.closeInitialMessageBubble()}},{key:"onPublishMessage",value:function(e){var t=e.text,n=e.richText,r=e.quickReply,a=this.props,i=a.messagesPageUri,o=a.publishMessage,s=a.stagedAttachments,c=a.removeMessageEditorStagingText;this.publishTypingMessage.cancel();o({text:t,richText:n,quickReply:r,url:i,fileAttachment:Object(C.a)(s)});c()}},{key:"onSelectAttachmentFiles",value:function(e){var t=e.files;if(t&&t.length){var n=this.props,r=n.onSelectAttachmentFile,a=n.currentConversation;r({file:t.item(0),thread:a})}}},{key:"onRemoveAttachment",value:function(e){var t=e.attachment,n=this.props,r=n.currentConversation,a=n.onRemoveAttachment;a({attachment:t,thread:r})}},{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.currentConversation,r=e.disablePublish,a=e.disableTextInput,i=e.isOnFocus,o=e.mobile,s=e.networkOffline,c=e.shouldHideAttachmentButton,l=e.shouldSendInputStagingEvent,p=e.showingHsBranding,b=e.stagedAttachments,h=e.toggleOnAndOffInputFocus,f=e.stagedMessage,m=e.showQuickReplyPlaceholder,g=e.canUploadAttachments;return Object(u.jsx)(d.a,{coloring:t,chatInputChanged:this.onChatInputChanged,disabled:a,disablePublish:r,isOnFocus:i,maxAttachmentFileSize:x.b,mobile:o,networkOffline:s,onSelectAttachmentFiles:this.onSelectAttachmentFiles,onRemoveAttachment:this.onRemoveAttachment,publishMessage:this.onPublishMessage,shouldHideAttachmentButton:c,showingHsBranding:p,stagedAttachments:b,stagedMessageEditorText:f,supportsAttachments:Object(O.isPersistedThread)(n),toggleOnAndOffInputFocus:h,fileTypes:w.a,showQuickReplyPlaceholder:m,shouldSendInputStagingEvent:l,inputStaging:this.inputStagingEvent,canUploadAttachments:g})}}]);return t}(g.PureComponent);I.displayName="MessageEditorWrapper";I.propTypes={canUploadAttachments:m.a.bool.isRequired,closeInitialMessageBubble:m.a.func.isRequired,coloring:Object(v.a)("ColoringRecord").isRequired,currentConversation:Object(v.a)("Thread"),disablePublish:m.a.bool.isRequired,disableTextInput:m.a.bool.isRequired,isOnFocus:m.a.bool.isRequired,messagesPageUri:m.a.string,mobile:m.a.bool,networkOffline:m.a.bool.isRequired,onRemoveAttachment:m.a.func.isRequired,onSelectAttachmentFile:m.a.func.isRequired,publishMessage:m.a.func.isRequired,publishTypingMessage:m.a.func.isRequired,removeMessageEditorStagingText:m.a.func.isRequired,setMessageEditorStagingText:m.a.func.isRequired,shouldHideAttachmentButton:m.a.bool.isRequired,shouldSendInputStagingEvent:m.a.bool.isRequired,showInitialMessageBubble:m.a.bool.isRequired,showQuickReplyPlaceholder:m.a.bool.isRequired,showingHsBranding:m.a.bool.isRequired,stagedAttachments:m.a.instanceOf(y.List),stagedMessage:m.a.string,toggleOnAndOffInputFocus:m.a.func};t.a=I},wID2:function(e,t,n){var r=n("QhUm");function a(e){return r(this,e).has(e)}e.exports=a},wn0x:function(e,t,n){"use strict";n.r(t);n.d(t,"getMessageId",(function(){return o}));var r=n("MBJP"),a=n("JGJA"),i=n("OmJX"),o=Object(r.a)(i.a,Object(a.a)("id"))},wy0V:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("Ut5p"),a=n("kT9C"),i=Object(r.b)(a.b,(function(e){return{currentUrl:e.currentUrl,threadId:e.threadId}}))},xAl4:function(e,t,n){"use strict";n.r(t);n.d(t,"uploadAttachmentClient",(function(){return a}));var r=n("SOdg"),a=function(e){var t=e.formData,n=e.uploadUrl,a=e.onProgress,i=void 0===a?function(){}:a;return r.a.post(n,{headers:{"content-type":!1},data:t,timeout:0,withXhr:function(e){e.upload.addEventListener("progress",i,!1)}})}},xM7V:function(e,t,n){"use strict";var r=n("5Enb"),a=n("+eZO"),i=n("LpN+"),o=n("g05V"),s=n("QYOI"),c=n("p5BV"),u=function(e){Object(o.a)(t,e);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);return Object(a.a)(this,Object(i.a)(t).call(this,Object.assign({},e,{localId:Object(c.generateIdForFile)({file:e.file,timestamp:Date.now()})})))}return t}(Object(s.Record)({file:null,localId:"",fileId:-1,uploadProgress:0},"FileUploadRecord"));t.a=u},xP7N:function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},xYYH:function(e,t,n){"use strict";n.r(t);n.d(t,"isUploadCompleted",(function(){return a}));var r=n("A3yT"),a=function(e){return-1!==Object(r.getFileId)(e)}},xePV:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("JGJA"),a=Object(r.a)("fileUploadsErrors")},xzMr:function(e,t,n){"use strict";var r=n("QYOI"),a=n("eP/i"),i=Object(r.Record)({width:"auto",minHeight:36,borderColor:a.h,whiteSpace:"normal",lineHeight:"1rem",color:a.h},"QuickReplyTheme");t.a=i},yynV:function(e,t,n){"use strict";n.r(t);var r,a=n("QYOI"),i=n("BW+T"),o=n.n(i),s=n("0IK8"),c=function(e,t){return Boolean(t[Object(s.getType)(e)])},u=n("fQRB"),d=n("GzqH"),l=Object(a.Record)((r={},Object(u.a)(r,d.b,d.a),Object(u.a)(r,"timestamp",null),Object(u.a)(r,"id",null),r),"DateMessage"),p=function(e,t){var n=new Date(Object(s.getTimestamp)(e)),r=new Date(Object(s.getTimestamp)(t));return n.getFullYear()!==r.getFullYear()||n.getMonth()!==r.getMonth()||n.getDate()!==r.getDate()},b=function(e,t,n){return!(!t&&!n)&&Boolean(Object(s.getTimestamp)(e)&&(!t||p(t,e)))},h=n("eoCu");n.d(t,"insertDatesIntoMessageList",(function(){return m}));var f=o()(l,(function(e){return e.id})),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.reduce((function(r,a,i){var o=i>0?e.get(i-1):void 0;b(a,o,n)&&c(a,t)&&(r=r.push(f({id:Object(h.a)(a)+"-date",timestamp:Object(s.getTimestamp)(a)})));return r.push(a)}),Object(a.List)())}},z96q:function(e,t,n){"use strict";n.r(t);n.d(t,"sendVisitorEmailAddress",(function(){return a}));var r=n("VYoM");function a(e){var t=e.threadId,n=e.email,a=e.sessionId,i=e.hubspotUtk;return r.a.post("livechat-public/v1/visitor/public",{query:{threadId:t,email:n,sessionId:a,hubspotUtk:i}})}},zB5l:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("MBJP"),a=n("KSjU"),i=n("xk3e"),o=Object(r.a)([i.getAssignedResponderInWidget],(function(e){return Boolean(e&&Object(a.a)(e))}))},zHet:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="OUTGOING"}}]);
//# sourceMappingURL=threadview-utv.js.map